var tg=Object.create;var yi=Object.defineProperty;var rg=Object.getOwnPropertyDescriptor;var og=Object.getOwnPropertyNames;var ng=Object.getPrototypeOf,ig=Object.prototype.hasOwnProperty;var Ii=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ja=(e,t)=>{for(var r in t)yi(e,r,{get:t[r],enumerable:!0})},sg=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of og(t))!ig.call(e,n)&&n!==r&&yi(e,n,{get:()=>t[n],enumerable:!(o=rg(t,n))||o.enumerable});return e};var Si=(e,t,r)=>(r=e!=null?tg(ng(e)):{},sg(t||!e||!e.__esModule?yi(r,"default",{value:e,enumerable:!0}):r,e));var Ba=Ii((Ur,Ti)=>{"use strict";(function(e,t){typeof Ur=="object"&&typeof Ti=="object"?Ti.exports=t():typeof Ur=="object"?Ur[0]=t():e[0]=t()})(Ur,function(){return t=[function(o,n,i){"use strict";i.r(n),i.d(n,"AWSMarketingClientSideDataServiceClient",function(){return Me}),i.d(n,"AWSMarketingClientSideDataServiceClientConfig",function(){return ve}),i.d(n,"D2CBatchEventRequest",function(){return U}),i.d(n,"D2CEvent",function(){return Le}),i.d(n,"D2CEventType",function(){return Ve}),i.d(n,"LogDataRequest",function(){return Do}),i.d(n,"LogDataV2Request",function(){return Po}),i.d(n,"Metric",function(){return Vr});var s="alpha",a="prod";function c(S){return(c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function d(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(c(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(c(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),c(h)==="symbol"?h:String(h)}(E.key),E)}}var l="https://",u=".d2c.marketing.aws.a2z.org.cn/",m=function(){function S(E){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.config=E}var g,I;return g=S,(I=[{key:"getEndpoint",value:function(){var E=this.config.getEnvironment()||s;if(this.config.getIsBJS())return this._getCNEndpoint(E);if(E===a)return l+"d2c.aws.amazon.com/";if(E==="dev"){var h=this.config.getDevEndpoint();if(h)return h;E=s}return l+E+".d2c.marketing.aws.dev/"}},{key:"_getCNEndpoint",value:function(E){switch(E){case"dev":return l+s+u;case a:return l+"d2c.amazonaws.cn/";default:return l+E+u}}}])&&d(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function p(S){return(p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function f(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(p(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(p(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),p(h)==="symbol"?h:String(h)}(E.key),E)}}var y="application/json",v=function(){function S(E,h){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.config=E,this.endpointProvider=h,this.baseUrl=this._getBaseURL(),this.headers={"Content-Type":"application/plain",Accept:y}}var g,I;return g=S,(I=[{key:"get",value:function(E){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},T=Object.assign({},{headers:this.headers,credentials:"include"},2<arguments.length?arguments[2]:void 0),L=new URL(E,this.baseUrl);return Object.keys(h).forEach(function(_){return L.searchParams.append(_,h[_])}),fetch(L,T).then(function(_){return _.ok?_:Promise.reject({message:"Request failed with status code ".concat(_.status),response:_})}).then(function(_){return _.json().then(function(V){return{data:V,status:_.status}})})}},{key:"post",value:function(E,h,T){return E=new URL(E,this.baseUrl),h=Object.assign({},{method:"POST",headers:Object.assign({},this.headers,{"Content-Type":y}),body:JSON.stringify(h),credentials:"include"},T),fetch(E,h).then(function(L){return L.ok?L:Promise.reject({message:"Request failed with status code ".concat(L.status),response:L})}).then(function(L){return L.json().then(function(_){return{data:_,status:L.status}})})}},{key:"_getBaseURL",value:function(){var E=this.config.getEnvironment();return this.endpointProvider.getEndpoint(E)}}])&&f(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function A(S){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function b(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(A(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(A(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),A(h)==="symbol"?h:String(h)}(E.key),E)}}var N=function(){function S(){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function")}var g,I;return g=S,I=[{key:"isValid",value:function(E){var h;return A(E)==="object"&&(h=E.getMetrics(),E=E.getDimensions(),h=Array.isArray(h)&&0<h.length,!Array.isArray(E))&&A(E)==="object"&&h}}],I&&b(g,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function k(S){return(k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function J(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(k(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(k(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),k(h)==="symbol"?h:String(h)}(E.key),E)}}var Y=function(){function S(){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function")}var g,I;return g=S,I=[{key:"isValidRequest",value:function(E){return!(!E||typeof E.getData!="function")&&(E=E.getData())&&Array.isArray(E)&&0<E.length}},{key:"isValidData",value:function(E){return!!E&&!Array.isArray(E)&&0<Object.keys(E).length}}],I&&J(g,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function F(S){return(F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function te(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(F(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(F(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),F(h)==="symbol"?h:String(h)}(E.key),E)}}var de=function(){function S(){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function")}var g,I;return g=S,I=[{key:"translate",value:function(E){var h=[];return E.forEach(function(T){T!==void 0&&h.push(T.toString())}),h.join("/")}}],I&&te(g,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function ie(S){return(ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function ke(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(ie(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(ie(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),ie(h)==="symbol"?h:String(h)}(E.key),E)}}var Me=function(){function S(E){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");var h=new m(E);this.httpClient=new v(E,h)}var g,I;return g=S,(I=[{key:"logData",value:function(E){var h;N.isValid(E)&&(h=this._getRequestPath(E.getMetrics()),this.httpClient.get(h,E.getDimensions()).catch(function(){}))}},{key:"logDataV2",value:function(E){var h=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};Y.isValidRequest(E)&&(E={input:{requestBody:E.getData()}},this.httpClient.post("/csds/v2/metrics",E,h).catch(function(){}))}},{key:"logD2CBatchEventV1",value:function(E,h){E&&!Array.isArray(E)&&Object.keys(E).length!=0&&this.httpClient.post("/csds/collector/v1/events/batch",E,h).catch(function(){})}},{key:"_getRequestPath",value:function(E){return"/csds/data/"+de.translate(E)}}])&&ke(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function be(S){return(be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function Oe(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(be(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(be(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),be(h)==="symbol"?h:String(h)}(E.key),E)}}var ve=function(){function S(E){var h=1<arguments.length&&arguments[1]!==void 0&&arguments[1],T=this,L=S;if(!(T instanceof L))throw new TypeError("Cannot call a class as a function");this.environment=E,this.isBJS=h,this.setTimeout(5e3)}var g,I;return g=S,(I=[{key:"getEnvironment",value:function(){return this.environment}},{key:"getTimeout",value:function(){return this.timeout}},{key:"setTimeout",value:function(E){this.timeout=E}},{key:"setDevEndpoint",value:function(E){this.devEndpoint=E}},{key:"getDevEndpoint",value:function(){return this.devEndpoint}},{key:"getIsBJS",value:function(){return this.isBJS}}])&&Oe(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function x(S){return(x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function C(S,g){return function(I){if(Array.isArray(I))return I}(S)||function(I,E){var h=I==null?null:typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(h!=null){var T,L,_,V,B=[],D=!0,Q=!1;try{if(_=(h=h.call(I)).next,E===0){if(Object(h)!==h)return;D=!1}else for(;!(D=(T=_.call(h)).done)&&(B.push(T.value),B.length!==E);D=!0);}catch(Ue){Q=!0,L=Ue}finally{try{if(!D&&h.return!=null&&(V=h.return(),Object(V)!==V))return}finally{if(Q)throw L}}return B}}(S,g)||function(I,E){var h;if(I)return typeof I=="string"?O(I,E):(h=(h=Object.prototype.toString.call(I).slice(8,-1))==="Object"&&I.constructor?I.constructor.name:h)==="Map"||h==="Set"?Array.from(I):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?O(I,E):void 0}(S,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function O(S,g){(g==null||g>S.length)&&(g=S.length);for(var I=0,E=new Array(g);I<g;I++)E[I]=S[I];return E}function M(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(x(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(x(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),x(h)==="symbol"?h:String(h)}(E.key),E)}}var U=function(S,g,I){return g&&M(S.prototype,g),I&&M(S,I),Object.defineProperty(S,"prototype",{writable:!1}),S}(function S(g,I,E){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},T=this,L=S;if(!(T instanceof L))throw new TypeError("Cannot call a class as a function");for(var _=0,V=Object.entries(h);_<V.length;_++){var B=(D=C(V[_],2))[0],D=D[1];this[B]=D}this.batchId=g,this.schemaVersion=I,this.batchEvents=E});function P(S){return(P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function re(S,g){return function(I){if(Array.isArray(I))return I}(S)||function(I,E){var h=I==null?null:typeof Symbol<"u"&&I[Symbol.iterator]||I["@@iterator"];if(h!=null){var T,L,_,V,B=[],D=!0,Q=!1;try{if(_=(h=h.call(I)).next,E===0){if(Object(h)!==h)return;D=!1}else for(;!(D=(T=_.call(h)).done)&&(B.push(T.value),B.length!==E);D=!0);}catch(Ue){Q=!0,L=Ue}finally{try{if(!D&&h.return!=null&&(V=h.return(),Object(V)!==V))return}finally{if(Q)throw L}}return B}}(S,g)||function(I,E){var h;if(I)return typeof I=="string"?se(I,E):(h=(h=Object.prototype.toString.call(I).slice(8,-1))==="Object"&&I.constructor?I.constructor.name:h)==="Map"||h==="Set"?Array.from(I):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?se(I,E):void 0}(S,g)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function se(S,g){(g==null||g>S.length)&&(g=S.length);for(var I=0,E=new Array(g);I<g;I++)E[I]=S[I];return E}function me(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(P(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(P(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),P(h)==="symbol"?h:String(h)}(E.key),E)}}var Le=function(S,g,I){return g&&me(S.prototype,g),I&&me(S,I),Object.defineProperty(S,"prototype",{writable:!1}),S}(function S(g,I,E){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},T=this,L=S;if(!(T instanceof L))throw new TypeError("Cannot call a class as a function");for(var _=0,V=Object.entries(h);_<V.length;_++){var B=(D=re(V[_],2))[0],D=D[1];this[B]=D}this.pageURL=g,this.eventType=I,this.eventTimestamp=E}),Ve={PAGEVIEW:"pageView",LINKCLICK:"linkClick",CLICK:"click",IMPRESSION:"impression",MEDIA:"media",TOOL:"tool",FORM:"form",SEARCH:"search",FILTER:"filter",SIGNUP:"signup",SCROLL:"scroll",LOGEVENT:"logEvent"};function Ce(S){return(Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function No(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(Ce(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(Ce(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),Ce(h)==="symbol"?h:String(h)}(E.key),E)}}var Do=function(){function S(E){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.metrics=E,this.dimensions={}}var g,I;return g=S,(I=[{key:"setDimensions",value:function(E){this.dimensions=E}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"getMetrics",value:function(){return this.metrics}}])&&No(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function Er(S){return(Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function gr(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(Er(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(Er(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),Er(h)==="symbol"?h:String(h)}(E.key),E)}}var Po=function(){function S(){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.data=[]}var g,I;return g=S,(I=[{key:"addData",value:function(E){E!==void 0&&Array.isArray(E)&&(E=E.filter(function(h){return Y.isValidData(h)}),this.data=this.data.concat(E))}},{key:"getData",value:function(){return this.data}}])&&gr(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}();function et(S){return(et=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(S)}function gi(S,g){for(var I=0;I<g.length;I++){var E=g[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(S,function(h){return h=function(T,L){if(et(T)!=="object"||T===null)return T;var _=T[Symbol.toPrimitive];if(_===void 0)return String(T);if(et(_=_.call(T,L))!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}(h,"string"),et(h)==="symbol"?h:String(h)}(E.key),E)}}var Vr=function(){function S(E,h,T){if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.name=E,this.value=h,this.unit=T}var g,I;return g=S,(I=[{key:"getName",value:function(){return this.name}},{key:"getValue",value:function(){return this.value}},{key:"getUnit",value:function(){return this.unit}},{key:"toString",value:function(){return"".concat(this.name,"@v=").concat(this.value,":u=").concat(this.unit)}}])&&gi(g.prototype,I),Object.defineProperty(g,"prototype",{writable:!1}),S}()}],r={},e.m=t,e.c=r,e.d=function(o,n,i){e.o(o,n)||Object.defineProperty(o,n,{enumerable:!0,get:i})},e.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},e.t=function(o,n){if(1&n&&(o=e(o)),8&n||4&n&&typeof o=="object"&&o&&o.__esModule)return o;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&n&&typeof o!="string")for(var s in o)e.d(i,s,function(a){return o[a]}.bind(null,s));return i},e.n=function(o){var n=o&&o.__esModule?function(){return o.default}:function(){return o};return e.d(n,"a",n),n},e.o=function(o,n){return Object.prototype.hasOwnProperty.call(o,n)},e.p="",e(e.s=0);function e(o){var n;return(r[o]||(n=r[o]={i:o,l:!1,exports:{}},t[o].call(n.exports,n,n.exports,e),n.l=!0,n)).exports}var t,r})});var rc=Ii((Br,Lo)=>{"use strict";(function(e,t){"use strict";var r="1.0.40",o="",n="?",i="function",s="undefined",a="object",c="string",d="major",l="model",u="name",m="type",p="vendor",f="version",y="architecture",v="console",A="mobile",b="tablet",N="smarttv",k="wearable",J="embedded",Y=500,F="Amazon",te="Apple",de="ASUS",ie="BlackBerry",ke="Browser",Me="Chrome",be="Edge",Oe="Firefox",ve="Google",x="Huawei",C="LG",O="Microsoft",M="Motorola",U="Opera",P="Samsung",re="Sharp",se="Sony",me="Xiaomi",Le="Zebra",Ve="Facebook",Ce="Chromium OS",No="Mac OS",Do=" Browser",Er=function(V,B){var D={};for(var Q in V)B[Q]&&B[Q].length%2===0?D[Q]=B[Q].concat(V[Q]):D[Q]=V[Q];return D},gr=function(V){for(var B={},D=0;D<V.length;D++)B[V[D].toUpperCase()]=V[D];return B},Po=function(V,B){return typeof V===c?et(B).indexOf(et(V))!==-1:!1},et=function(V){return V.toLowerCase()},gi=function(V){return typeof V===c?V.replace(/[^\d\.]/g,o).split(".")[0]:t},Vr=function(V,B){if(typeof V===c)return V=V.replace(/^\s\s*/,o),typeof B===s?V:V.substring(0,Y)},S=function(V,B){for(var D=0,Q,Ue,pt,Z,j,ft;D<B.length&&!j;){var hi=B[D],Ua=B[D+1];for(Q=Ue=0;Q<hi.length&&!j&&hi[Q];)if(j=hi[Q++].exec(V),j)for(pt=0;pt<Ua.length;pt++)ft=j[++Ue],Z=Ua[pt],typeof Z===a&&Z.length>0?Z.length===2?typeof Z[1]==i?this[Z[0]]=Z[1].call(this,ft):this[Z[0]]=Z[1]:Z.length===3?typeof Z[1]===i&&!(Z[1].exec&&Z[1].test)?this[Z[0]]=ft?Z[1].call(this,ft,Z[2]):t:this[Z[0]]=ft?ft.replace(Z[1],Z[2]):t:Z.length===4&&(this[Z[0]]=ft?Z[3].call(this,ft.replace(Z[1],Z[2])):t):this[Z]=ft||t;D+=2}},g=function(V,B){for(var D in B)if(typeof B[D]===a&&B[D].length>0){for(var Q=0;Q<B[D].length;Q++)if(Po(B[D][Q],V))return D===n?t:D}else if(Po(B[D],V))return D===n?t:D;return B.hasOwnProperty("*")?B["*"]:V},I={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},E={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},h={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,U+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[u,U+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[u,U]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[u,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[f,[u,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[u,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+ke]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[u,"Smart Lenovo "+ke]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+ke],f],[/\bfocus\/([\w\.]+)/i],[f,[u,Oe+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,U+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,U+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI"+Do]],[/fxios\/([\w\.-]+)/i],[f,[u,Oe]],[/\bqihoobrowser\/?([\w\.]*)/i],[f,[u,"360"]],[/\b(qq)\/([\w\.]+)/i],[[u,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1"+Do],f],[/samsungbrowser\/([\w\.]+)/i],[f,[u,P+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[f,[u,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[u,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[u],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[f,u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,Ve],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,Me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,Me+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+ke]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,g,I]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/(wolvic|librewolf)\/([\w\.]+)/i],[u,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,Oe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,et]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,o,et]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,et]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,P],[m,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,P],[m,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[p,te],[m,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,te],[m,b]],[/(macintosh);/i],[l,[p,te]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,re],[m,A]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[p,"Honor"],[m,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,x],[m,b]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,x],[m,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[p,me],[m,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,me],[m,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[m,A]],[/\b(opd2\d{3}a?) bui/i],[l,[p,"OPPO"],[m,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[m,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[m,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,M],[m,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,M],[m,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,C],[m,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,C],[m,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[m,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[m,A]],[/(pixel c)\b/i],[l,[p,ve],[m,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,ve],[m,A]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,se],[m,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,se],[m,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[m,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,F],[m,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,F],[m,A]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[m,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,ie],[m,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,de],[m,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,de],[m,A]],[/(nexus 9)/i],[l,[p,"HTC"],[m,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[m,A]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[p,"TCL"],[m,b]],[/(itel) ((\w+))/i],[[p,et],l,[m,g,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[m,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[m,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[p,"Ulefone"],[m,A]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[p,"Energizer"],[m,A]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[p,"Cat"],[m,A]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[p,"Smartfren"],[m,A]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[p,"Nothing"],[m,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[m,A]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[m,b]],[/(surface duo)/i],[l,[p,O],[m,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[m,A]],[/(u304aa)/i],[l,[p,"AT&T"],[m,A]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[m,A]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[m,b]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[m,b]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[m,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[m,b]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[m,b]],[/\b(k88) b/i],[l,[p,"ZTE"],[m,b]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[m,A]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[m,A]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[m,b]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[m,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[m,b]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[m,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[m,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[m,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[m,A]],[/\b(ph-1) /i],[l,[p,"Essential"],[m,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[m,b]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[m,b]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[m,b]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[m,b]],[/(sprint) (\w+)/i],[p,l,[m,A]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,O],[m,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,Le],[m,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,Le],[m,A]],[/smart-tv.+(samsung)/i],[p,[m,N]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,P],[m,N]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,C],[m,N]],[/(apple) ?tv/i],[p,[l,te+" TV"],[m,N]],[/crkey/i],[[l,Me+"cast"],[p,ve],[m,N]],[/droid.+aft(\w+)( bui|\))/i],[l,[p,F],[m,N]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[p,re],[m,N]],[/(bravia[\w ]+)( bui|\))/i],[l,[p,se],[m,N]],[/(mitv-\w{5}) bui/i],[l,[p,me],[m,N]],[/Hbbtv.*(technisat) (.*);/i],[p,l,[m,N]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,Vr],[l,Vr],[m,N]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[m,v]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[m,v]],[/(playstation [345portablevi]+)/i],[l,[p,se],[m,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,O],[m,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[p,P],[m,k]],[/((pebble))app/i],[p,l,[m,k]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[p,te],[m,k]],[/droid.+; (glass) \d/i],[l,[p,ve],[m,k]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,Le],[m,k]],[/droid.+; (glass) \d/i],[l,[p,ve],[m,k]],[/(pico) (4|neo3(?: link|pro)?)/i],[p,l,[m,k]],[/; (quest( \d| pro)?)/i],[l,[p,Ve],[m,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[m,J]],[/(aeobc)\b/i],[l,[p,F],[m,J]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[m,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[m,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,A]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,be+"HTML"]],[/(arkweb)\/([\w\.]+)/i],[u,f],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[u,[f,g,E]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,g,E],[u,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,No],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,ie]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,Oe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,Me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,Ce],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},T=function(V,B){if(typeof V===a&&(B=V,V=t),!(this instanceof T))return new T(V,B).getResult();var D=typeof e!==s&&e.navigator?e.navigator:t,Q=V||(D&&D.userAgent?D.userAgent:o),Ue=D&&D.userAgentData?D.userAgentData:t,pt=B?Er(h,B):h,Z=D&&D.userAgent==Q;return this.getBrowser=function(){var j={};return j[u]=t,j[f]=t,S.call(j,Q,pt.browser),j[d]=gi(j[f]),Z&&D&&D.brave&&typeof D.brave.isBrave==i&&(j[u]="Brave"),j},this.getCPU=function(){var j={};return j[y]=t,S.call(j,Q,pt.cpu),j},this.getDevice=function(){var j={};return j[p]=t,j[l]=t,j[m]=t,S.call(j,Q,pt.device),Z&&!j[m]&&Ue&&Ue.mobile&&(j[m]=A),Z&&j[l]=="Macintosh"&&D&&typeof D.standalone!==s&&D.maxTouchPoints&&D.maxTouchPoints>2&&(j[l]="iPad",j[m]=b),j},this.getEngine=function(){var j={};return j[u]=t,j[f]=t,S.call(j,Q,pt.engine),j},this.getOS=function(){var j={};return j[u]=t,j[f]=t,S.call(j,Q,pt.os),Z&&!j[u]&&Ue&&Ue.platform&&Ue.platform!="Unknown"&&(j[u]=Ue.platform.replace(/chrome os/i,Ce).replace(/macos/i,No)),j},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Q},this.setUA=function(j){return Q=typeof j===c&&j.length>Y?Vr(j,Y):j,this},this.setUA(Q),this};T.VERSION=r,T.BROWSER=gr([u,f,d]),T.CPU=gr([y]),T.DEVICE=gr([l,p,m,v,A,N,b,k,J]),T.ENGINE=T.OS=gr([u,f]),typeof Br!==s?(typeof Lo!==s&&Lo.exports&&(Br=Lo.exports=T),Br.UAParser=T):i==="undefined"&&(void 0).amd?(void 0)(function(){return T}):typeof e!==s&&(e.UAParser=T);var L=typeof e!==s&&(e.jQuery||e.Zepto);if(L&&!L.ua){var _=new T;L.ua=_.getResult(),L.ua.get=function(){return _.getUA()},L.ua.set=function(V){_.setUA(V);var B=_.getResult();for(var D in B)L.ua[D]=B[D]}}})(typeof window=="object"?window:Br)});var ql=Ii((qO,Hl)=>{"use strict";var Ey=function(e){var t={};if(!e||typeof e!="string")return t;var r=e.trim().replace(/^[?#&]/,""),o=new URLSearchParams(r),n=o.keys();do{var i=n.next(),s=i.value;if(s){var a=o.getAll(s);a.length===1?t[s]=a[0]:t[s]=a}}while(i.done===!1);return t},gy=function(e){var t="{{space}}",r=new URLSearchParams;return Object.keys(e).forEach(function(o){var n=e[o];typeof e[o]=="string"?n=n.replace(/ /g,t):["object","undefined"].includes(typeof n)&&!Array.isArray(n)&&(n=""),Array.isArray(n)?n.forEach(function(i){r.append(o,i)}):r.append(o,n)}),r.toString().replace(new RegExp(encodeURIComponent(t),"g"),"%20")};Hl.exports={parse:function(e){return Ey(e)},stringify:function(e){return gy(e)}}});var gt=Si(Ba());var ag={isLoggingEnabled:!0},ko=()=>{"use strict";let e;return typeof window.AWS=="object"&&typeof window.AWS.PageSettings=="object"&&(e=window.AWS.PageSettings),{...ag,...e}};var Fa=e=>{document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()})};var $a=e=>{document.addEventListener("pagehide",()=>{e()})};function Ha(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");let o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return o===null?"":decodeURIComponent(o[1].replace(/\+/g," "))}var qa=e=>{let t=Ha("debug_"+e,window.location.search);return t===""?null:t};var Et;(function(e){e.DEBUG="debug",e.INFO="info",e.LOG="log",e.WARN="warn",e.ERROR="error",e.ALL="all"})(Et||(Et={}));var Ga=e=>{let{namespace:t,logLevel:r}=e,o=qa(t)?.toLowerCase();o&&(o===r||o===Et.ALL)&&console.log(`[${r}] ${t}; ${JSON.stringify(e)}`)};var Wa=e=>{let t={};return Object.keys(e).forEach(r=>{typeof e[r]=="string"?t[r]=e[r]:t[r]=JSON.stringify(e[r])}),t};var H;(function(e){e.AWSM_GF="awsm_gf",e.AWSM_CARE="awsm_care",e.AWSM_CX="awsm_care",e.AWSM_SCAR="awsm_scar",e.AWSM_CA="awsm_ca",e.AWSM_PRC="awsm_prc"})(H||(H={}));var cg={AjaxForm:H.AWSM_GF,PricingTable:H.AWSM_GF,CookieConsent:H.AWSM_GF,PageAlert:H.AWSM_GF,DirectoriesTable:H.AWSM_GF,LibraRequire:H.AWSM_GF,LazyLoad:H.AWSM_GF,EventHub:H.AWSM_GF,v3SuspectedThirdPartyScriptError:H.AWSM_GF,v3CookieConsent:H.AWSM_GF},lg={Blog:H.AWSM_CARE},dg={PageError:H.AWSM_CX,ScriptError:H.AWSM_CX,SuspectedThirdPartyScriptError:H.AWSM_CX,Performance:H.AWSM_CX,CoreWebVitals:H.AWSM_CX,Directories:H.AWSM_CX,Cards:H.AWSM_CX,MapPin:H.AWSM_CX,NewsTicker:H.AWSM_CX,LibraCarousel:H.AWSM_CX,LibraVideo:H.AWSM_CX,NavMobileV3:H.AWSM_CX,NavDesktopV3:H.AWSM_CX,Typeahead:H.AWSM_CX,v3CoreWebVitals:H.AWSM_CX,v3Performance:H.AWSM_CX,v3PageError:H.AWSM_CX,v3PScriptError:H.AWSM_CX},ug={SiteSearch:H.AWSM_SCAR,ExperienceOrchestratorClient:H.AWSM_SCAR},mg={TargetMediator:H.AWSM_CA,AjaxForm:H.AWSM_CA},pg={PricingLayerCake:H.AWSM_PRC},Ya={...lg,...dg,...ug,...mg,...pg,...cg};var fg="LogMissingOrgId",za=e=>{let{orgId:t,namespace:r}=e,o=t||Ya[r];return o?{customData:e,orgId:o}:{customData:{...e,namespaceMissingMapping:r,namespace:fg,orgId:H.AWSM_GF},orgId:H.AWSM_GF}};var Eg=200,vi=class{constructor(){this.maxBatchSize=10,this.logQueue=[],this.flushQueue=()=>{this.logQueue.length&&this.sendBatchRequest(!0)};let{currentStage:t,logDataSet:r,isBJS:o}=ko();this.stage=t||r?.split(":")[1]||"";let n=new gt.AWSMarketingClientSideDataServiceClientConfig(this.stage.toLowerCase(),o);this.batchClient=new gt.AWSMarketingClientSideDataServiceClient(n),Fa(this.flushQueue),$a(this.flushQueue)}createLog(t){Ga(t);let r=Wa(t);if(this.createLogEvent(r),this.logQueue.length===this.maxBatchSize)return this.sendBatchRequest();if(this.batchTimer!==void 0)return this.refreshBatchTimer();this.batchTimer=this.createBatchTimer()}createLogEvent(t){let r=window.location.toString();this.logQueue.push(new gt.D2CEvent(r,gt.D2CEventType.LOGEVENT,new Date().getTime(),{baseURL:r.split("?")[0],browserViewPortHeight:window.innerHeight,browserViewPortWidth:window.innerWidth,...za(t)}))}createBatchTimer(){return setTimeout(()=>{this.sendBatchRequest()},Eg)}refreshBatchTimer(){clearTimeout(this.batchTimer),this.batchTimer=this.createBatchTimer()}createBatchRequest(){return new gt.D2CBatchEventRequest("LibraLogger","1.0",this.logQueue)}sendBatchRequest(t=!1){this.batchClient.logD2CBatchEventV1(this.createBatchRequest(),{keepalive:t}),this.logQueue=[],clearTimeout(this.batchTimer)}},gg=new vi,hr=gg;var hg=["Acrolinx-bot","AdsBot","ahrefs.com/robot","AmazonAutoTester","amazon-kendra","Arquivo-web-crawler","Baiduspider","Bytespider","BingBot","BingPreview","bitdiscovery","BrightEdge","botify","burbox bot","Caliperbot","CloudWatchSynthetics","cocolyze.com/bot","google.com/bot","Googlebot","GoogleImageProxy","HeadlessChrome","Mediapartners-Google","msnbot","Cypress","pagepeeker.com/robots","PetalBot","PTST","DatadogSynthetics","RuxitSynthetic","SECSSOBrowser","Pingdom","Chrome-Lighthouse","ThousandEyes","moatbot","HubSpot Crawler","SeekportBot","Slackbot","DareBoost","SiteScoreBot","CensysInspect","woorankreview","ev-crawler","proximic","DingTalkBot","seoclarity.net/bot","SiteAuditBot","Sogou web spider","openai.com/gptbot","yandex.com/bots","xforce-security.com/crawler","Canary","amazon-QBusiness","Yeti","Applebot","amazon-Quick"],yg=new RegExp(hg.join("|"),"i"),Ka=()=>yg.test(window.navigator.userAgent);var Ig="marketplace",Sg="console-",Ai=[{hostname:"console.aws.amazon.com",service:"console"},{hostname:"aws.amazon.com",service:"awsm"},{hostname:"amazonaws-china.com",service:"awsm"},{hostname:"www.amazonaws.cn",service:"cn"}],Tg=/console\.(aws\.amazon\.com|amazonaws\.cn)\/([a-z0-9]+)\//,Xa=e=>{if(typeof window.location.pathname<"u"){if(e)return Ig;let t=(window.location.hostname+window.location.pathname).match(Tg);if(t&&t.length===3)return Sg+t[2]}for(let t=0,r=Ai.length;t<r;t++){let o=Ai[t].hostname,n=new RegExp(o+"\\/");if(n.test(window.location.hostname+"/")||n.test(window.location.pathname)||n.test(window.location.hash))return Ai[t].service}return"NA"};var jr={CMS:"CMS",DEFAULT:"DEFAULT"},vg={awsm:jr.CMS,cn:jr.CMS,console:jr.DEFAULT,marketplace:jr.CMS},Ja=(e,t)=>vg[e]!==jr.CMS||window.location.pathname.indexOf(".html")!==window.location.pathname.length-5?"LIVE":t||"NA";var Qa=()=>new RegExp(/iPhone|iPod|iPad|Android|(?=.*\bAndroid\b)(?=.*\bMobile\b)|IEMobile|(?=.*\bWindows\b)(?=.*\bTouch\b)|Windows Phone|Opera Mini|(?=.*\bFirefox\b)(?=.*\bMobile\b)|BlackBerry|Nexus 7|BNTV250|Kindle Fire|Silk|webOS|GT-P1000/i).test(window.navigator.userAgent);var Ag=["console.aws.amazon.com","console.amazonaws.cn"],bg={"aws.amazon.com":1,"amazonaws-china.com":1,"www.amazonaws.cn":1},Za=()=>{let e=window.location.hostname;if(Object.prototype.hasOwnProperty.call(bg,e))return e;let t=Ag.find(r=>e.includes(r));return t||"NA"};var ec=()=>{let e=window.document.documentElement.getAttribute("lang");return typeof e=="string"&&e.length?e.replace("-","_"):"NA"};var Mo=()=>window.navigator.userAgent?.substring(0,200)||"";var tc=e=>{let t="unknown";return"framework"in e&&e.framework&&(t=e.framework),t};var nc=Si(rc());var xt;(function(e){e.SUPPORTED="SUPPORTED",e.PARTIAL="PARTIAL",e.UNSUPPORTED="UNSUPPORTED"})(xt||(xt={}));var Rt;(function(e){e.DESKTOP="DESKTOP",e.TABLET="TABLET",e.PHONE="PHONE",e.OTHER="OTHER",e.UNKNOWN="UNKNOWN"})(Rt||(Rt={}));var oc={Chrome:{supported:113,partial:109},Safari:{supported:16.5,partial:16.3},Edge:{supported:112,partial:97},Firefox:{supported:113,partial:111},"Samsung Browser":{supported:21,partial:20},"Android Browser":{partial:4},Opera:{partial:95},Silk:{partial:108},UCBrowser:{partial:13.4},Yandex:{partial:23.11}};var Cg=768,wg=(e,t)=>{if(!e||!t)return xt.UNSUPPORTED;let r=oc[e];return r?r.supported&&t>=r.supported?xt.SUPPORTED:r.partial&&t>=r.partial?xt.PARTIAL:xt.UNSUPPORTED:xt.UNSUPPORTED},_g=()=>window?.screen?.width>=Cg,Og=e=>{switch(e){case"mobile":return Rt.PHONE;case"tablet":return Rt.TABLET;case"smarttv":case"wearable":case"embedded":return Rt.OTHER;default:return _g()?Rt.DESKTOP:Rt.UNKNOWN}},ic=()=>{let e=new nc.default(Mo()),t=e.getBrowser(),r=t?.name||"",o=parseFloat(t?.version||"0"),n=Og(e.getDevice()?.type);return{browserName:r,browserVersion:o,browserFormFactor:n,browserSupportLevel:wg(r,o)}};var xg={CookieConsent:"NA"},sc=e=>{let t=ko(),r=Xa(t.isMarketplace);return{namespace:e,service:r,isBot:Ka(),instance:Ja(r,t.logInstance),isMobile:Qa(),host:Za(),locale:xg[e]||ec(),userAgent:Mo(),framework:tc(t),...ic()}};var ac=()=>"performance"in window&&"timing"in window.performance?new Date().getTime()-window.performance.timing.responseEnd:-1;var Vo=class{constructor(t,r={}){this.baseMetaData=sc(t),this.context=r}getRuntimeMetaData(){return{pageTime:ac()}}getFullMetaData(){return{...this.baseMetaData,...this.getRuntimeMetaData(),...this.context}}aggregateData(t,r){return{...this.getFullMetaData(),...t,logLevel:r}}debug(t){hr.createLog(this.aggregateData(t,Et.DEBUG))}info(t){hr.createLog(this.aggregateData(t,Et.INFO))}log(t){hr.createLog(this.aggregateData(t,Et.LOG))}warn(t){hr.createLog(this.aggregateData(t,Et.WARN))}error(t){hr.createLog(this.aggregateData(t,Et.ERROR))}};var Rg={orgId:"awsm_analytics_and_personalization"},He="AWSMAnalyticsClientSide",Jt;function Ng(e){return Jt||(Jt=new Vo(e,Rg)),{logMetricCount:i=>{Jt.info({metricCount:1,metricName:i,namespace:He})},logMetricCountWithMessage:(i,s)=>{Jt.info({metricCount:1,metricName:i,namespace:He,metricMessage:s})},logMetricErrorCount:(i,s)=>{Jt.error({metricCount:1,metricName:i,errorMessage:s,namespace:He})},logPerformanceMetric:i=>{let s=new Date().getTime(),a=`${i}-${s}`,c=performance.mark(`start-${a}`);return{send:()=>{let d=performance.mark(`end-${a}`),l=performance.measure(a,c?.name||`start-${a}`,d?.name||`end-${a}`);Jt.info({metricName:i,duration:l.duration,namespace:He})}}},logger:Jt}}var Nt=Ng;var yr=["kndctr_7742037254C95E840A4C98A6_AdobeOrg_consent","AMCV_7742037254C95E840A4C98A6@AdobeOrg","kndctr_7742037254C95E840A4C98A6_AdobeOrg_cluster","kndctr_7742037254C95E840A4C98A6_AdobeOrg_identity"];var Uo=["ad-id"],$={SET_CONSENT:"SetConsent",SEND_EVENT:"SendEvent",GET_IDENTITY:"GetIdentity",AUTHENTICATED_STATE:"AuthenticatedState",ALLOY_CLIENT_INIT:"AlloyClientInit",D2C_VISITOR_ID_CLIENT_INIT:"D2CVisitorIdClientInit",D2C_AD_ID_CLIENT_INIT:"D2CAdIdClientInit",SEND_DECISION_EVENT:"SendDecisionEvent",SEND_PROPOSITION_DISPLAY_EVENT:"SendPropositionDisplayEvent",SEND_SCROLL_DETECTION_EVENT:"SendScrollDetectionEvent",SLOT_META_PARSE_ERROR:"SlotMetaParseError",MISSING_SLOT_ID:"MissingSlotId",MEDIA_EVENT:"MediaEvent",SEARCH_EVENT:"SearchEvent",UNKNOWN_ERROR:"UnknownError"},K={SUCCESS:"Success",FAILURE:"Failures",LATENCY:"Latency",ERROR:"Error"};var cc="data-eb-ce",Dt="data-eb-slot",lc="data-eb-item-id",dc="[data-eb-slot]",uc="BODY";var jo;(function(e){e.PAGE_VIEW="web.webpagedetails.pageViews"})(jo||(jo={}));var we;(function(e){e.FORM_OPERATION="web.awsm.formOperation",e.AURA_ANALYTICS="web.awsm.auraAnalytics",e.PAGE_INTERACTION="web.awsm.pageInteraction",e.SITE_OPTIMIZATION_CLICK="web.awsm.so.click",e.SITE_OPTIMIZATION_IMPRESSION="web.awsm.so.impression",e.MEDIA_EVENT="web.awsm.media",e.SEARCH_EVENT="web.awsm.search"})(we||(we={}));var mc;(function(e){e.ONE_DAM_DOWNLOAD_ASSET="web.onedam.downloadAsset",e.ONE_DAM_FILTER_ASSETS="web.onedam.filterAssets",e.ONE_DAM_LOAD_MORE="web.onedam.loadMore",e.ONE_DAM_SEARCH="web.onedam.search",e.ONE_DAM_ADD_TO_CART="web.onedam.addToCart",e.ONE_DAM_REMOVE_FROM_CART="web.onedam.removeFromCart",e.ONE_DAM_DETAIL_PAGE_VIEW="web.onedam.detailPageView",e.ONE_DAM_DOWNLOAD_CART="web.onedam.downloadCart"})(mc||(mc={}));var pc;(function(e){e.ECID="ECID",e.AWS_VISITOR_ID="visitorID",e.AWS_ACCOUNT_ID="awsAccountID"})(pc||(pc={}));var fc;(function(e){e.ABANDONED="abandoned",e.COMPLETED="completed"})(fc||(fc={}));var Ec;(function(e){e.SITE_OPTIMIZATION="so",e.HOUSE_ADS="ha"})(Ec||(Ec={}));var gc;(function(e){e.VIEWPORT="viewport",e.CTA="cta"})(gc||(gc={}));var hc;(function(e){e.MONITORING="monitoring",e.AB_TEST="abtest",e.HEADER="header"})(hc||(hc={}));var yc;(function(e){e.AUTHENTICATED="authenticated",e.AMBIGUOUS="ambiguous",e.LOGGED_OUT="loggedOut"})(yc||(yc={}));function Zt(e){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(e)}function qo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ic(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Go(e,t,r){return t&&Ic(e.prototype,t),r&&Ic(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dg={expires:31536e3,path:"/",secure:!0,domain:window.location.hostname,samesite:"Lax"},Pg="No params were passed",kg=/^(?:expires|max-age|path|domain|secure)$/i,Mg="Name cannot contain reserved cookie property names";function je(e,t,r){if(!e)throw new Error(Pg);var o=Object.assign({},Dg,r);return t||t===""?Lg(e,t,o):Vg(e)}function Lg(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(kg.test(e))throw new Error(Mg);var o="";if(r.expires){var n=new Date;n.setTime(n.getTime()+r.expires*1e3),o=";expires="+n.toUTCString()}document.cookie="".concat(e,"=").concat(t).concat(o,";domain=").concat(r.domain,";path=").concat(r.path,";samesite:").concat(r.samesite,";").concat(r.secure?";secure":"")}function Vg(e){var t=/[.*+?^${}()|[\]\\]/g,r=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.replace(t,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;return r}var qe;(function(e){e.ALPHA="ALPHA",e.BETA="BETA",e.GAMMA="GAMMA",e.PROD="PROD",e.DEV="DEV",e.INT_TEST="INT_TEST"})(qe||(qe={}));var Fr;(function(e){e.VISITOR="VISITOR",e.ADVERTISEMENT="ADVERTISEMENT"})(Fr||(Fr={}));var Ug={ALPHA:"https://vs-alpha.aws.amazon.com/token",BETA:"https://vs-beta.aws.amazon.com/token",GAMMA:"https://vs-gamma.aws.amazon.com/token",PROD:"https://vs.aws.amazon.com/token",DEV:"https://vs-alpha.aws.amazon.com/token",INT_TEST:"https://vs-beta.aws.amazon.com/token"},jg={ALPHA:"https://vs-alpha.aws.amazon.com/vs/ad-token",BETA:"https://vs-beta.aws.amazon.com/vs/ad-token",GAMMA:"https://vs-gamma.aws.amazon.com/vs/ad-token",PROD:"https://vs.aws.amazon.com/vs/ad-token",DEV:"https://vs-alpha.aws.amazon.com/vs/ad-token",INT_TEST:"https://vs-beta.aws.amazon.com/vs/ad-token"},Bg={ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn/vs/token",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn/vs/token",PROD:"https://d2c.amazonaws.cn/vs/token",DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn/vs/token"},Sc={"aws-cn":Bg,aws:Ug};function Fg(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.domain||window.location.hostname,r=e.env||qe.DEV;switch(e.tokenType){case Fr.ADVERTISEMENT:return jg[r];default:return t!=null&&t.endsWith(".cn")?Sc["aws-cn"][r]:Sc.aws[r]}}function wc(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.api||Fg(e),r={};e.token&&(r.token=e.token);var o=performance.now();return t?fetch(t,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),credentials:"include"}).then(function(n){var i,s=performance.now(),a=s-o;(i=e.logger)===null||i===void 0||i.info({timeTakenToFetchVID:String(a)});var c=n;if(!c.ok){var d=new Error("VisitorID service responses with the error status.");throw d.name=c.status.toString(),d}return n.json()}).then(function(n){return n}):Promise.reject(new Error("URL is undefined"))}var _c=["ai.awsplayer.com","aicallcenter.awsplayer.com","aipackagetracker.awsplayer.com","aistylist.awsplayer.com","allthingsdistributed.com","amazon.care","amazonaws.com","amazongames.com","amazonevents.com","apn-portal.com","atlas.aws","aws-experience.com","aws-floor11.es","aws-partner-directory.com","aws-portal.amazon.com","aws-startup-lofts.com","aws-startuploft-emea.com","aws.amazon.com","aws.training","awscloud.com","awseducate.com","awsevents.com","awslivestream.com","awsmediamagazine.com","awspartner.com","awssummit.kr","awsthinkbox.com","buildon.aws","calculator.aws","chime.aws","cloudendure.com","codecatalyst.aws","community.aws","constructs.dev","dohy8sp8i3s5p.cloudfront.net","elasticbeanstalk.com","freertos.org","gamedev.amazon.com","iotatlas.io","iotatlas.net","jam.aws.com","java.awsblog.com","learnsecurity.amazon.com","mobile.awsblog.com","newworld.com","opendistro.github.io","partnercentral.awspartner.com","phonetool.amazon.com","protectconnect.com","quicksight.aws","repost.aws","ruby.awsblog.com","sagemaker.readthedocs.io","sagemaker-examples.readthedocs.io","sagemaker-jumpstart-industry-pack.readthedocs.io","sesblog.amazon.com","skillbuilder.aws","smithy.io","startups.aws","thinkboxsoftware.com","amazonaws.cn","amazoncloud.cn","awsevents.cn","webchat-aws.clink.cn"],bi="awsd2c-token-c",Ci="aws-token-a-c",Bo=["aws.amazon.com"],Tc="awsd2c-token",vc="aws-token-a",$g="AMCV_7742037254C95E840A4C98A6%40AdobeOrg",Fo=100,Hg=100,Oc="awsccc",$o="It does not seem your site has onboarded to Shortbread. Onboarding to Shortbread is required for using Visitor ID Service.",xc="awsme_scode";function $r(e){var t=qg()||"";return!t||!e||e<=0?!1:parseInt(t,36)%100<e}function qg(){var e=je($g);if(e==null)return"";var t=decodeURIComponent(e).split("|");if(t.length<2)return"";for(var r=0;r<t.length-1;r++)if(t[r]==="MCMID")return t[r+1];return""}var Gg=function(){function e(){qo(this,e),ge(this,"cookieValue",void 0),ge(this,"payload",void 0),ge(this,"tokenExpiry",void 0),ge(this,"vid",void 0),Bo.includes(window.location.hostname)&&$r(Fo)?this.cookieValue=je(Tc)||"":this.cookieValue=je(bi)||"",this.payload=this.getPayload(),this.vid=this.payload.vid||"",this.tokenExpiry=this.payload.exp||0}return Go(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"getPayload",value:function(){return this.cookieValue?Yg(this.cookieValue):{}}},{key:"hasValidValue",value:function(){return this.vid.length>0&&!zg(this.tokenExpiry)}},{key:"set",value:function(r,o){var n={domain:o||Wg(window.location.hostname),expires:31536e3};Bo.includes(window.location.hostname)&&$r(Fo)?this.cookieValue=je(Tc)||"":(je(bi,r,n),this.cookieValue=je(bi)||""),this.payload=this.getPayload(),this.vid=this.payload.vid||this.vid,this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]),e}();function Wg(e){var t=e.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0],r=_c.filter(function(o){if(t===o)return!0;var n=new RegExp("(\\.?\\W|^)\\b".concat(o,"\\b$"),"gi");return n.test(t)});return r.length>0?r[0]:t}function Yg(e){var t=e.split(".");if(t.length<3)return{};var r=e.split(".")[1];try{return JSON.parse(atob(r))}catch{return{}}}function zg(e){if(!e)return!0;var t=e*1e3;return Date.now()>=t}var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0});function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,o)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ac(Object(r),!0).forEach(function(o){Xg(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function Hr(){Hr=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(x,C,O){x[C]=O.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function d(x,C,O){return Object.defineProperty(x,C,{value:O,enumerable:!0,configurable:!0,writable:!0}),x[C]}try{d({},"")}catch{d=function(O,M,U){return O[M]=U}}function l(x,C,O,M){var U=C&&C.prototype instanceof A?C:A,P=Object.create(U.prototype),re=new Oe(M||[]);return n(P,"_invoke",{value:ie(x,O,re)}),P}function u(x,C,O){try{return{type:"normal",arg:x.call(C,O)}}catch(M){return{type:"throw",arg:M}}}t.wrap=l;var m="suspendedStart",p="suspendedYield",f="executing",y="completed",v={};function A(){}function b(){}function N(){}var k={};d(k,s,function(){return this});var J=Object.getPrototypeOf,Y=J&&J(J(ve([])));Y&&Y!==r&&o.call(Y,s)&&(k=Y);var F=N.prototype=A.prototype=Object.create(k);function te(x){["next","throw","return"].forEach(function(C){d(x,C,function(O){return this._invoke(C,O)})})}function de(x,C){function O(U,P,re,se){var me=u(x[U],x,P);if(me.type!=="throw"){var Le=me.arg,Ve=Le.value;return Ve&&Zt(Ve)=="object"&&o.call(Ve,"__await")?C.resolve(Ve.__await).then(function(Ce){O("next",Ce,re,se)},function(Ce){O("throw",Ce,re,se)}):C.resolve(Ve).then(function(Ce){Le.value=Ce,re(Le)},function(Ce){return O("throw",Ce,re,se)})}se(me.arg)}var M;n(this,"_invoke",{value:function(P,re){function se(){return new C(function(me,Le){O(P,re,me,Le)})}return M=M?M.then(se,se):se()}})}function ie(x,C,O){var M=m;return function(U,P){if(M===f)throw Error("Generator is already running");if(M===y){if(U==="throw")throw P;return{value:e,done:!0}}for(O.method=U,O.arg=P;;){var re=O.delegate;if(re){var se=ke(re,O);if(se){if(se===v)continue;return se}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(M===m)throw M=y,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);M=f;var me=u(x,C,O);if(me.type==="normal"){if(M=O.done?y:p,me.arg===v)continue;return{value:me.arg,done:O.done}}me.type==="throw"&&(M=y,O.method="throw",O.arg=me.arg)}}}function ke(x,C){var O=C.method,M=x.iterator[O];if(M===e)return C.delegate=null,O==="throw"&&x.iterator.return&&(C.method="return",C.arg=e,ke(x,C),C.method==="throw")||O!=="return"&&(C.method="throw",C.arg=new TypeError("The iterator does not provide a '"+O+"' method")),v;var U=u(M,x.iterator,C.arg);if(U.type==="throw")return C.method="throw",C.arg=U.arg,C.delegate=null,v;var P=U.arg;return P?P.done?(C[x.resultName]=P.value,C.next=x.nextLoc,C.method!=="return"&&(C.method="next",C.arg=e),C.delegate=null,v):P:(C.method="throw",C.arg=new TypeError("iterator result is not an object"),C.delegate=null,v)}function Me(x){var C={tryLoc:x[0]};1 in x&&(C.catchLoc=x[1]),2 in x&&(C.finallyLoc=x[2],C.afterLoc=x[3]),this.tryEntries.push(C)}function be(x){var C=x.completion||{};C.type="normal",delete C.arg,x.completion=C}function Oe(x){this.tryEntries=[{tryLoc:"root"}],x.forEach(Me,this),this.reset(!0)}function ve(x){if(x||x===""){var C=x[s];if(C)return C.call(x);if(typeof x.next=="function")return x;if(!isNaN(x.length)){var O=-1,M=function U(){for(;++O<x.length;)if(o.call(x,O))return U.value=x[O],U.done=!1,U;return U.value=e,U.done=!0,U};return M.next=M}}throw new TypeError(Zt(x)+" is not iterable")}return b.prototype=N,n(F,"constructor",{value:N,configurable:!0}),n(N,"constructor",{value:b,configurable:!0}),b.displayName=d(N,c,"GeneratorFunction"),t.isGeneratorFunction=function(x){var C=typeof x=="function"&&x.constructor;return!!C&&(C===b||(C.displayName||C.name)==="GeneratorFunction")},t.mark=function(x){return Object.setPrototypeOf?Object.setPrototypeOf(x,N):(x.__proto__=N,d(x,c,"GeneratorFunction")),x.prototype=Object.create(F),x},t.awrap=function(x){return{__await:x}},te(de.prototype),d(de.prototype,a,function(){return this}),t.AsyncIterator=de,t.async=function(x,C,O,M,U){U===void 0&&(U=Promise);var P=new de(l(x,C,O,M),U);return t.isGeneratorFunction(C)?P:P.next().then(function(re){return re.done?re.value:P.next()})},te(F),d(F,c,"Generator"),d(F,s,function(){return this}),d(F,"toString",function(){return"[object Generator]"}),t.keys=function(x){var C=Object(x),O=[];for(var M in C)O.push(M);return O.reverse(),function U(){for(;O.length;){var P=O.pop();if(P in C)return U.value=P,U.done=!1,U}return U.done=!0,U}},t.values=ve,Oe.prototype={constructor:Oe,reset:function(C){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(be),!C)for(var O in this)O.charAt(0)==="t"&&o.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=e)},stop:function(){this.done=!0;var C=this.tryEntries[0].completion;if(C.type==="throw")throw C.arg;return this.rval},dispatchException:function(C){if(this.done)throw C;var O=this;function M(Le,Ve){return re.type="throw",re.arg=C,O.next=Le,Ve&&(O.method="next",O.arg=e),!!Ve}for(var U=this.tryEntries.length-1;U>=0;--U){var P=this.tryEntries[U],re=P.completion;if(P.tryLoc==="root")return M("end");if(P.tryLoc<=this.prev){var se=o.call(P,"catchLoc"),me=o.call(P,"finallyLoc");if(se&&me){if(this.prev<P.catchLoc)return M(P.catchLoc,!0);if(this.prev<P.finallyLoc)return M(P.finallyLoc)}else if(se){if(this.prev<P.catchLoc)return M(P.catchLoc,!0)}else{if(!me)throw Error("try statement without catch or finally");if(this.prev<P.finallyLoc)return M(P.finallyLoc)}}}},abrupt:function(C,O){for(var M=this.tryEntries.length-1;M>=0;--M){var U=this.tryEntries[M];if(U.tryLoc<=this.prev&&o.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var P=U;break}}P&&(C==="break"||C==="continue")&&P.tryLoc<=O&&O<=P.finallyLoc&&(P=null);var re=P?P.completion:{};return re.type=C,re.arg=O,P?(this.method="next",this.next=P.finallyLoc,v):this.complete(re)},complete:function(C,O){if(C.type==="throw")throw C.arg;return C.type==="break"||C.type==="continue"?this.next=C.arg:C.type==="return"?(this.rval=this.arg=C.arg,this.method="return",this.next="end"):C.type==="normal"&&O&&(this.next=O),v},finish:function(C){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.finallyLoc===C)return this.complete(M.completion,M.afterLoc),be(M),v}},catch:function(C){for(var O=this.tryEntries.length-1;O>=0;--O){var M=this.tryEntries[O];if(M.tryLoc===C){var U=M.completion;if(U.type==="throw"){var P=U.arg;be(M)}return P}}throw Error("illegal catch attempt")},delegateYield:function(C,O,M){return this.delegate={iterator:ve(C),resultName:O,nextLoc:M},this.method==="next"&&(this.arg=e),v}},t}function Kg(e,t){if(Zt(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(Zt(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nc(e){var t=Kg(e,"string");return Zt(t)=="symbol"?t:t+""}function bc(e,t,r,o,n,i,s){try{var a=e[i](s),c=a.value}catch(d){r(d);return}a.done?t(c):Promise.resolve(c).then(o,n)}function Dc(e){return function(){var t=this,r=arguments;return new Promise(function(o,n){var i=e.apply(t,r);function s(c){bc(i,o,n,s,a,"next",c)}function a(c){bc(i,o,n,s,a,"throw",c)}s(void 0)})}}function Wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cc(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Nc(o.key),o)}}function Yo(e,t,r){return t&&Cc(e.prototype,t),r&&Cc(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xg(e,t,r){return t=Nc(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jg="/csds/collector/v1/events/batch",Qg="1.0.0",Zg="D2CLogger",Ho;(function(e){e.INFO="info",e.ERROR="error"})(Ho||(Ho={}));var eh="logEvent",th={DEV:"https://alpha.d2c.marketing.aws.dev",ALPHA:"https://alpha.d2c.marketing.aws.dev",BETA:"https://beta.d2c.marketing.aws.dev",GAMMA:"https://gamma.d2c.marketing.aws.dev",PROD:"https://d2c.aws.amazon.com",INT_TEST:"https://d2c.aws.amazon.com"},rh={DEV:"https://alpha.d2c.marketing.aws.a2z.org.cn",ALPHA:"https://alpha.d2c.marketing.aws.a2z.org.cn",BETA:"https://beta.d2c.marketing.aws.a2z.org.cn",GAMMA:"https://gamma.d2c.marketing.aws.a2z.org.cn",PROD:"https://d2c.amazonaws.cn",INT_TEST:"https://alpha.d2c.marketing.aws.a2z.org.cn"};function oh(e){return window.location.hostname.endsWith(".cn")?rh[e]:th[e]}var nh=Yo(function e(t,r,o){Wo(this,e),this.batchId=t,this.schemaVersion=r,this.batchEvents=o}),ih=Yo(function e(t,r,o,n,i){Wo(this,e),this.pageURL=t,this.eventType=r,this.eventTimestamp=o,this.customData=n,this.orgId=i});function sh(e,t){return fetch("".concat(e).concat(Jg),Qt({method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"}},t)).catch(function(r){console.log(r)})}function ah(e,t){return wi.apply(this,arguments)}function wi(){return wi=Dc(Hr().mark(function e(t,r){var o;return Hr().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=JSON.stringify(r.batchEventRequest),i.next=3,sh(t,Qt(Qt({},r),{},{body:o}));case 3:return i.abrupt("return",i.sent);case 4:case"end":return i.stop()}},e)})),wi.apply(this,arguments)}var ch=200,lh=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},dh=function(){function e(t,r){var o=this;Wo(this,e),this.logQueue=[],this.flushQueue=function(){o.logQueue.length&&o.sendBatchRequest(!0)},this.maxBatchSize=10,this.baseUrl=oh(t.toUpperCase()),this.orgId=r,lh(this.flushQueue)}return Yo(e,[{key:"createLog",value:function(r){if(Object.keys(r).length>0){var o=new ih(window.location.toString(),eh,new Date().getTime(),r,this.orgId);if(this.logQueue.push(o),this.logQueue.length===this.maxBatchSize)return this.sendBatchRequest();if(this.batchTimer!==void 0)return this.refreshBatchTimer();this.batchTimer=this.createBatchTimer()}}},{key:"createBatchRequest",value:function(){return new nh(Zg,Qg,this.logQueue)}},{key:"sendBatchRequest",value:function(){var t=Dc(Hr().mark(function o(){var n,i,s=arguments;return Hr().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return n=s.length>0&&s[0]!==void 0?s[0]:!1,i=this.createBatchRequest(),c.next=4,ah(this.baseUrl,{batchEventRequest:i,keepalive:n});case 4:this.logQueue=[],clearTimeout(this.batchTimer);case 6:case"end":return c.stop()}},o,this)}));function r(){return t.apply(this,arguments)}return r}()},{key:"createBatchTimer",value:function(){var r=this;return setTimeout(function(){r.sendBatchRequest()},ch)}},{key:"refreshBatchTimer",value:function(){clearTimeout(this.batchTimer),this.batchTimer=this.createBatchTimer()}}])}(),uh=function(){function e(t,r){Wo(this,e),this.batchManager=new dh(t,r)}return Yo(e,[{key:"error",value:function(r){r=Qt(Qt({},r),{},{logLevel:Ho.ERROR}),this.batchManager.createLog(r)}},{key:"info",value:function(r){r=Qt(Qt({},r),{},{logLevel:Ho.INFO}),this.batchManager.createLog(r)}}])}(),Pc=Rc.AWSD2CLogger=uh;window.AWSMA=window.AWSMA||{};var _i=[],Oi=[],Pt;AWSMA.visitorIdReady=function(e){Pt&&Pt.hasValidValue()?e(Pt.getPayload().vid||""):_i.push(e)};AWSMA.tokenReady=function(e){Pt&&Pt.hasValidValue()&&Pt.getValue()?e(Pt.getValue()||""):Oi.push(e)};var kc=function(){function e(t){var r;if(qo(this,e),ge(this,"vidCookie",void 0),ge(this,"visitorId",void 0),ge(this,"visitorToken",void 0),ge(this,"options",void 0),ge(this,"logger",void 0),je(Oc)===null)throw console.error($o),new Error($o);if(this.options=t,this.vidCookie=new Gg,Pt=this.vidCookie,this.visitorId="",this.visitorToken={},!t.cookieAllowed){this.invokeVisitorIdReady(),this.invokeTokenReady();return}this.setVisitorId();var o=qe[(r=t.env)!==null&&r!==void 0?r:"INT_TEST"];this.logger=new Pc(o,xc)}return Go(e,[{key:"getVisitorId",value:function(r){var o=this;this.getVisitorToken({domain:r.domain,onError:r.onError,onSuccess:function(i){i.vid&&typeof r.onSuccess=="function"&&(r.onSuccess(i.vid),o.invokeVisitorIdReady())}})}},{key:"getVisitorToken",value:function(r){var o=this;if(this.vidCookie.getValue()&&this.hasValidVisitorId()){typeof r.onSuccess=="function"&&r.onSuccess(this.visitorToken);return}wc({token:this.vidCookie.getValue(),tokenType:Fr.VISITOR,env:this.options.env,domain:r.domain,logger:this.logger}).then(function(n){n.token&&(o.vidCookie.set(n.token,r.domain),o.setVisitorId(),o.invokeVisitorIdReady(),o.invokeTokenReady()),typeof r.onSuccess=="function"&&r.onSuccess(o.visitorToken)}).catch(function(n){o.invokeVisitorIdReady(),o.invokeTokenReady(),typeof r.onError=="function"&&r.onError(n)})}},{key:"setVisitorId",value:function(){var r=this.vidCookie.getPayload();this.visitorToken=r||{},this.visitorId=r.vid||""}},{key:"hasValidVisitorId",value:function(){return this.vidCookie.hasValidValue()}},{key:"getExistingVisitorId",value:function(){return this.visitorId}},{key:"getExistingVisitorToken",value:function(){return this.visitorToken}},{key:"getExistingToken",value:function(){return this.vidCookie.getValue()}},{key:"invokeVisitorIdReady",value:function(){for(;_i.length>0;){var r=_i.shift();typeof r=="function"&&r(this.visitorId)}}},{key:"invokeTokenReady",value:function(){for(;Oi.length>0;){var r=Oi.shift();typeof r=="function"&&r(this.vidCookie.getValue())}}}]),e}(),mh=function(){function e(){qo(this,e),ge(this,"cookieValue",void 0),ge(this,"payload",void 0),ge(this,"tokenExpiry",void 0),ge(this,"advertisementId",void 0),Bo.includes(window.location.hostname)&&$r(Fo)?this.cookieValue=je(vc)||"":this.cookieValue=je(Ci)||"",this.payload=this.getPayload(),this.advertisementId=this.payload.aid||"",this.tokenExpiry=this.payload.exp||0}return Go(e,[{key:"getValue",value:function(){return this.cookieValue}},{key:"getPayload",value:function(){return this.cookieValue?fh(this.cookieValue):{}}},{key:"hasValidValue",value:function(){return this.advertisementId.length>0&&!Eh(this.tokenExpiry)}},{key:"set",value:function(r,o){var n={domain:o||ph(window.location.hostname),expires:31536e3};Bo.includes(window.location.hostname)&&$r(Fo)?this.cookieValue=je(vc)||"":(je(Ci,r,n),this.cookieValue=je(Ci)||""),this.payload=this.getPayload(),this.advertisementId=this.payload.aid||this.advertisementId,this.tokenExpiry=this.payload.exp||this.tokenExpiry}}]),e}();function ph(e){var t=e.replace(/(^\w+:|^)\/\//,"").split(/[/?#]/)[0],r=_c.filter(function(o){if(t===o)return!0;var n=new RegExp("(\\.?\\W|^)\\b".concat(o,"\\b$"),"gi");return n.test(t)});return r.length>0?r[0]:t}function fh(e){var t=e.split(".");if(t.length<3)return{};var r=e.split(".")[1];try{return JSON.parse(atob(r))}catch{return{}}}function Eh(e){if(!e)return!0;var t=e*1e3;return Date.now()>=t}window.AWSMA=window.AWSMA||{};var xi=[],Ri=[],kt;AWSMA.advertisementIdReady=function(e){kt&&kt.hasValidValue()?e(kt.getPayload().aid||""):xi.push(e)};AWSMA.tokenReady=function(e){kt&&kt.hasValidValue()&&kt.getValue()?e(kt.getValue()||""):Ri.push(e)};var Mc=function(){function e(t){var r;if(qo(this,e),ge(this,"adIdCookie",void 0),ge(this,"advertisementId",void 0),ge(this,"advertisementToken",void 0),ge(this,"options",void 0),ge(this,"logger",void 0),je(Oc)===null)throw console.error($o),new Error($o);if(this.options=t,this.adIdCookie=new mh,kt=this.adIdCookie,this.advertisementId="",this.advertisementToken={},!t.cookieAllowed){this.invokeAdvertisementIdReady(),this.invokeTokenReady();return}this.setAdvertisementId();var o=qe[(r=t.env)!==null&&r!==void 0?r:"INT_TEST"];this.logger=new Pc(o,xc)}return Go(e,[{key:"getAdvertisementId",value:function(r){var o=this;this.getAdvertisementToken({domain:r.domain,onError:r.onError,onSuccess:function(i){i.aid&&typeof r.onSuccess=="function"&&(r.onSuccess(i.aid),o.invokeAdvertisementIdReady())}})}},{key:"getAdvertisementToken",value:function(r){var o=this;if($r(Hg)){if(this.adIdCookie.getValue()&&this.hasValidAdvertisementId()){typeof r.onSuccess=="function"&&r.onSuccess(this.advertisementToken);return}wc({token:this.adIdCookie.getValue(),tokenType:Fr.ADVERTISEMENT,env:this.options.env,domain:r.domain,logger:this.logger}).then(function(n){n.token&&(o.adIdCookie.set(n.token,r.domain),o.setAdvertisementId(),o.invokeAdvertisementIdReady(),o.invokeTokenReady()),typeof r.onSuccess=="function"&&r.onSuccess(o.advertisementToken)}).catch(function(n){o.invokeAdvertisementIdReady(),o.invokeTokenReady(),typeof r.onError=="function"&&r.onError(n)})}}},{key:"setAdvertisementId",value:function(){var r=this.adIdCookie.getPayload();this.advertisementToken=r||{},this.advertisementId=r.aid||""}},{key:"hasValidAdvertisementId",value:function(){return this.adIdCookie.hasValidValue()}},{key:"getExistingAdvertisementId",value:function(){return this.advertisementId}},{key:"getExistingAdvertisementToken",value:function(){return this.advertisementToken}},{key:"getExistingToken",value:function(){return this.adIdCookie.getValue()}},{key:"invokeAdvertisementIdReady",value:function(){for(;xi.length>0;){var r=xi.shift();typeof r=="function"&&r(this.advertisementId)}}},{key:"invokeTokenReady",value:function(){for(;Ri.length>0;){var r=Ri.shift();typeof r=="function"&&r(this.adIdCookie.getValue())}}}]),e}();var gh="7742037254C95E840A4C98A6@AdobeOrg",hh="awsm-csa",yh="alloy",Ih="ee",Sh="edge.adobedc.net",Lc=new Set(["aws.amazon.com","aws.com"]),Uc={Live:"391977e8-1cda-4370-9374-2ce9b691cf05",Staging:"4567b0b8-708f-4650-b494-709415c819d4"},jc={Live:"71916843-ed73-4910-abf5-98eb25264adb",Staging:"590cda6f-5bbe-4a1c-80e1-5d717ebe14e3"},Ib={Live:"6d080c1c-38f7-4205-af59-aef890484e0f",Staging:"511c3b4c-5310-4af6-900c-09f1aed3c73d"},Th=e=>{let t=e.querySelector(`#${hh}`),r={env:{stage:"dev"}};if(t===null||!t.dataset.awsmCsaMeta)return r;try{r=JSON.parse(t.dataset.awsmCsaMeta)}catch(o){console.error(o)}return r},Vc=(e,t,r)=>{let{env:o}=t;return vh(o.stage,e,r)},vh=(e,t,r)=>(r?.size&&r.forEach(o=>Lc.add(o)),e==="prod"&&Lc.has(t)),Bc=({hostname:e,document:t,dataStreamMap:r,defaultConsent:o,overwriteDataStreamMap:n,liveDomains:i})=>{let s=Th(t),a=Vc(e,s,i)?r.Live:r.Staging,c;return n&&(c=Vc(e,s,i)?n.Live:n.Staging),{name:yh,dataStreamId:a,overwriteDataStreamId:c,organizationId:gh,defaultConsent:o,edgeBasePath:Ih,edgeDomain:Sh,stage:s?.env.stage??"dev",impressionSelector:s?.impressionSelector??"[data-eb-slot]"}},Ni=e=>{switch(e){case"dev":return qe.DEV;case"alpha":return qe.ALPHA;case"beta":return qe.BETA;case"gamma":return qe.GAMMA;case"prod":return qe.PROD;default:return qe.DEV}};var St="data-co-mbox",Di="data-co-mbox-visited",Pi="true",Fc="custom_csr-orchestrator_new-content";function Ah(){let e=`[${St}]:not([${Di}="${Pi}"])`,t=new Set,r=document.querySelectorAll(e);return Array.from(r).forEach(n=>{let i=n.getAttribute(St);i&&(t.add(i),n.setAttribute(Di,Pi))}),[...t]}var $c=Ah;function Hc(e){let t=new CustomEvent(e);document.dispatchEvent(t)}function qc(e){for(let t of e){let{format:r,content:o}=t.data,n=r==="text/html",i=r==="application/json",s=n||i,a=o!==null&&o!=="";if(i&&a&&(a=Object.keys(o).length>0),s&&a)return!0}return!1}function Gc(e){for(let t of e)if(t.schema==="https://ns.adobe.com/personalization/default-content-item")return!0;return!1}var Wc;(function(e){e.AWS_TV_VIDEO="awsTvVideo",e.GEN_AI_SUMMARY="genAiSummary",e.SLOT="slot",e.TEST="test",e.THUMBS_UP_DOWN="thumbsUpDown",e.VIDEO="video"})(Wc||(Wc={}));var Yc;(function(e){e.AR_SA="ar-SA",e.DE_DE="de-DE",e.EN_US="en-US",e.ES_ES="es-ES",e.FR_FR="fr-FR",e.ID_ID="id-ID",e.IT_IT="it-IT",e.JA_JP="ja-JP",e.KO_KR="ko-KR",e.PT_BR="pt-BR",e.RU_RU="ru-RU",e.TH_TH="th-TH",e.TR_TR="tr-TR",e.VI_VN="vi-VN",e.ZH_CN="zh-CN",e.ZH_TW="zh-TW"})(Yc||(Yc={}));var zc;(function(e){e.AR="ar",e.CN="cn",e.DE="de",e.EN="",e.ES="es",e.FR="fr",e.ID="id",e.IT="it",e.JP="jp",e.KO="ko",e.PT="pt",e.RU="ru",e.TH="th",e.TR="tr",e.TW="tw",e.VI="vi"})(zc||(zc={}));var Kc;(function(e){e.CSR="csr"})(Kc||(Kc={}));var Xc;(function(e){e.GLOBAL="Global",e.CN="CN",e.BLOG="Blog",e.DCA="DCA",e.LCK="LCK",e.TOPAZ="Topaz"})(Xc||(Xc={}));var Jc;(function(e){e.DEV="dev",e.ALPHA="alpha",e.BETA="beta",e.GAMMA="gamma",e.PROD="prod",e.UNKNOWN="unknown"})(Jc||(Jc={}));var Qc;(function(e){e.LIVE="Live",e.STAGING="Staging",e.LOCALIZATION="Localization",e.SANDBOX="Sandbox"})(Qc||(Qc={}));var Zc;(function(e){e.US_WEST_2="us-west-2",e.US_EAST_1="us-east-1",e.CN_NORTH_1="cn-north-1",e.CN_NORTHWEST_1="cn-northwest-1",e.UNKNOWN="unknown"})(Zc||(Zc={}));var el;(function(e){e.EXPERIENCE_FRAGMENT="xf",e.OFFER="offer",e.PAGE="page"})(el||(el={}));var tl;(function(e){e.PROCESSED="processed",e.UNPROCESSED="unprocessed"})(tl||(tl={}));var rl;(function(e){e.NO_WRAPPERS="noWrappers",e.WITH_WRAPPERS="withWrappers",e.TEMPLATE_MARKUP_ONLY="templateMarkupOnly"})(rl||(rl={}));var ol;(function(e){e.LTR="ltr",e.RTL="rtl"})(ol||(ol={}));var nl="custom_csr-orchestrator_slot-render-status",zo="data-eb-slot-render-id";var il;(function(e){e.INFO="info",e.DEBUG="debug",e.WARN="warn",e.ERROR="error"})(il||(il={}));var sl;(function(e){e.NONE="None",e.SECONDS="Seconds",e.MILLISECONDS="Milliseconds",e.BYTES="Bytes",e.COUNT="Count",e.PERCENT="Percent",e.BYTES_PER_SECOND="Bytes/Second",e.COUNT_PER_SECOND="Count/Second"})(sl||(sl={}));var al;(function(e){e.INVALID_EXPERIENCE_CONFIG_ERROR="InvalidExperienceConfigError",e.RECON_REQUEST_ERROR="ReConRequestError",e.RECON_REQUEST_SUCCESS="ReConRequestSuccess",e.RECON_REQUEST_COMPLETE="ReConRequestComplete",e.EXPERIENCE_NOT_FOUND_ERROR="ExperienceNotFoundError",e.INVALID_SLOT_ERROR="InvalidSlotError",e.RENDER_ERROR="RenderError",e.SLOT_RENDER_SUCCESS="SlotRenderSuccess",e.SLOT_RENDER_COMPLETE="SlotRenderComplete",e.PAGE_RENDER_COMPLETE="PageRenderComplete",e.INVALID_CONTENT_DATA_ERROR="InvalidContentDataError",e.CONTENT_DATA_PARSE_ERROR="ContentDataParseError",e.EXPERIENCE_HYDRATION_ERROR="ExperienceHydrationError",e.EXPERIENCE_HYDRATION_SUCCESS="ExperienceHydrationSuccess",e.EXPERIENCE_HYDRATION_TIME="ExperienceHydrationTime",e.PAGE_HYDRATION_TIME="PageHydrationTime",e.CDN_TEMPLATE_REQUEST_TIME="CDNTemplateRequestTime",e.CDN_TEMPLATE_REQUEST_ERROR="CDNTemplateRequestError",e.CDN_TEMPLATE_REQUEST_SUCCESS="CDNTemplateRequestSuccess"})(al||(al={}));var cl;(function(e){e.RAW="RAW",e.AI="AI",e.LOCAL="LOCAL"})(cl||(cl={}));var ll;(function(e){e.CLICK="click",e.IMPRESSION="impression",e.DISMISS="dismiss",e.TEST="test"})(ll||(ll={}));function dl(e,t){let{id:r,scope:o,scopeDetails:n}=t,i,s=document.querySelector(`[${St}="${o}"]`);document.addEventListener(nl,a=>{let c=a,{renderResult:d,slotRenderNotificationId:l}=c.detail;if(i=i||s.querySelector(":scope > .container")?.querySelectorAll(`[${Dt}]`).length||0,l===o){if(i===-1)return;if(d===!0){if(i--,i===0){let u=s.querySelector(":scope > .cmp-container");u&&s.removeChild(u),s.style.visibility="visible",e.sendMetricEvent({xdm:{eventType:"decisioning.propositionDisplay",_experience:{decisioning:{propositions:[{id:r,scope:o,scopeDetails:n}]}},identityMap:{}}})}}else if(i>0){i=-1;let u=s.querySelector(":scope > .container");u&&s.removeChild(u),s.style.visibility="visible"}}})}import Ko from"sanitize-html";var _h=Ko.defaults.allowedTags.concat(["img","style","script"]),Oh=Object.assign({},Ko.defaults.allowedAttributes,{"*":["class","id","data-eb-*","data-rg-*","data-rigel-*","data-react*","style","lang","dir","data-testid","data-scroll-sentinel","data-style-*","data-custom-params*","data-trk-params*"],a:["href","name","target","rel"],img:["src","alt","title","width","height"],script:["type"]}),xh={background:[/^#(0x)?[0-9a-f]+$/i,/^url\(['"]?.+\.(?:png|jpg|jpeg)['"]?\)$/i],"background-image":[/^url\(['"]?.+\.(?:png|jpg|jpeg)['"]?\)$/i],"^--[a-zA-z-_]+$":[/^var\(--[a-zA-z0-9-_]+\)$/]};function Rh(e){return e.split(";").filter(r=>{let[o,n]=r.split(":").map(i=>i.trim());for(let[i,s]of Object.entries(xh))if(new RegExp(i).test(o))return s.some(a=>a.test(n));return!1}).join(";")}function ul(e){return Ko(e,{allowedTags:_h,allowedAttributes:Oh,nonBooleanAttributes:Ko.defaults.nonBooleanAttributes,disallowedTagsMode:"discard",nonTextTags:["title"],transformTags:{"*":(t,r)=>{let o=r.style;return o?{tagName:t,attribs:{...r,style:Rh(o)}}:{tagName:t,attribs:r}},a:(t,r)=>r.target&&r.target.match(/^_blank$/i)?(r.rel="noopener noreferrer",{tagName:t,attribs:r}):{tagName:t,attribs:r},script:(t,r)=>r.type&&r.type.match(/^application\/(ld\+)?json$/)?{tagName:t,attribs:r}:{tagName:"",attribs:{},text:""}},parser:{lowerCaseTags:!0},allowVulnerableTags:!1})}function ml(e){let t=o=>typeof o=="string"?ul(o):typeof o=="object"&&!Array.isArray(o)?ml(o):Array.isArray(o)?o.map(n=>t(n)):o,r={};for(let o in e)if(Object.prototype.hasOwnProperty.call(e,o)){let n=e[o];r[o]=t(n)}return r}function pl(e){return ul(e)}function fl(e){return ml(e)}function Nh(e,t,r){let o=pl(e),n=document.createElement("div");n.innerHTML=o;let i=n?.querySelectorAll("[data-eb-slot]")||[];Array.from(i).forEach(s=>{s.setAttribute(zo,t)}),n.firstElementChild&&r.appendChild(n.firstElementChild)}var El=Nh;function ki(){return crypto.randomUUID()}function Dh(e,t,r){let{experienceId:o,data:n}=e,i=n?.items.length,s=Ph(t,o,n,i);r.appendChild(s)}function Ph(e,t,r,o){let n=ki(),i={version:"1.0",slotId:`awsm-co-${n}`,experienceId:t,allowBlank:!0,hasAltExp:!1,isRTR:!1,filters:{limit:o}},s=document.createElement("div");s.setAttribute("data-eb-slot",`awsm-co-${n}`),s.setAttribute("data-eb-slot-meta",JSON.stringify(i)),s.setAttribute("data-eb-slot-csr","true"),s.setAttribute("data-eb-slot-co-mbox","true"),s.setAttribute(zo,e);let a=document.createElement("script");a.setAttribute("type","application/json");let c=fl({data:r});a.textContent=JSON.stringify(c),s.appendChild(a);let d=document.createElement("div");return d.classList.add("container"),d.append(s),d}var gl=Dh;function hl(e,t=3e3){let r=!1;return function(...o){r||(e(...o),r=!0,setTimeout(()=>{r=!1},t))}}function kh(e,t){(t?.firstElementChild||t.textContent!==null)&&(t.style.visibility="visible")}var Xo=kh;var qr=class{constructor({format:t,content:r,id:o,scope:n,scopeDetails:i,alloyClient:s,schema:a}){this.format=t||"",this.content=r||"",this.id=o,this.scope=n,this.scopeDetails=i,this.alloyClient=s,this.schema=a||""}process(){let t=document.querySelector(`[${St}="${this.scope}"]`);if(t){switch(this.format){case"text/html":El(this.content,this.scope,t),this.registerClickEvent(t);return;case"application/json":gl(this.content,this.scope,t),this.registerClickEvent(t);return;default:break}switch(this.schema){case"https://ns.adobe.com/personalization/default-content-item":Xo(this.scope,t),this.registerClickEvent(t),this.triggerDisplayEvent();return}}}registerClickEvent(t){t.addEventListener("click",hl(()=>this.alloyClient.sendMetricEvent({xdm:{eventType:"decisioning.propositionInteract",_experience:{decisioning:{propositions:[{id:this.id,scope:this.scope,scopeDetails:this.scopeDetails}]}},identityMap:{}}})))}triggerDisplayEvent(){this.alloyClient.sendMetricEvent({xdm:{eventType:"decisioning.propositionDisplay",_experience:{decisioning:{propositions:[{id:this.id,scope:this.scope,scopeDetails:this.scopeDetails}]}},identityMap:{}}})}};function yl(e,t,r){if(Mh(e,r),!e||e.length===0)return null;let o=[];for(let n of e){let{items:i,scope:s,scopeDetails:a}=n;if(!(!i||i.length===0)){if(Gc(i)){for(let c of i){let{id:d,schema:l}=c,u=new qr({id:d,scope:s,scopeDetails:a,alloyClient:t,schema:l});u.process(),o.push(u)}continue}if(qc(i)){dl(t,n);for(let c of i){let{data:d}=c,{format:l,content:u,id:m}=d||{},p=new qr({format:l,content:u,id:m,scope:s,scopeDetails:a,alloyClient:t});try{p.process(),o.push(p)}catch(f){console.error(f)}}}}}return o.length>0&&Hc(Fc),o}function Mh(e,t){let r=!e||e.length===0?new Set:e.reduce((n,i)=>n.add(i.scope),new Set);t.filter(n=>!r.has(n)).forEach(n=>{let i=document.querySelector(`[${St}="${n}"]`);Xo(n,i)})}var Gr="custom-awsm-acs-event-listener";var Ge="Not possible to determine error message",Mt=e=>`Error message: ${e.message}; Stacktrace: ${e.stack}`,Ir=class extends Error{constructor(t){super(t)}};function Il(e){let t=Nt(He),r={},o=e.closest(`[${Dt}]`);if(!o)return r;let n=o.dataset;if(r.slotId=n.ebSlot,!r.slotId){let u=`${$.MISSING_SLOT_ID}${K.ERROR}`;t.logMetricErrorCount(u,`Missing slotId for slot element: "${n}`)}if(n.ebSlotMeta)try{r.expId=JSON.parse(n.ebSlotMeta.replace(/'/g,'"')).experienceId}catch(u){let m=`${$.SLOT_META_PARSE_ERROR}${K.ERROR}`;t.logMetricErrorCount(m,`Failed to parse ebSlotMeta: "${n.ebSlotMeta}" - ${u instanceof Error?u.message:Ge}`)}let i=o.querySelector(`[${cc}]`);if(!i)return r;let{ebTplN:s,ebTplV:a,ebTplNs:c,ebDScope:d,ebLocale:l}=i.dataset;return s&&(r.tplName=s),a&&(r.tplVersion=a),c&&(r.tplMetricNs=c),d&&(r.expDataScope=d),l&&(r.expLocale=l),r}function Sl(e){let t=e.closest(`[${Dt}]`);if(!t)return{};let r=null;try{let i=t.querySelector('script[type="application/json"]')?.innerHTML||"";r=JSON.parse(i)}catch{return{}}let n=e.closest(`[${lc}]`)?.dataset.ebItemId;if(n){let i=r?.data?.items?.find(s=>s.fields.id===n);if(i?.metadata?.testAttributes)return i.metadata.testAttributes}return r?.metadata?.testAttributes||{}}var Jo=new Set,Lh=/^(HEADER|MAIN|FOOTER|NAV)$/i,Tl=e=>e?e.trim():"",vl=e=>e.getAttribute("aria-label")||"",Al=e=>e?.nodeName&&Lh.test(e.nodeName)?e.nodeName:void 0,Vh=e=>{let t=Tl(e.id||vl(e)||Al(e));if(t)return t;let r=e.parentElement;for(;r;){let o=Tl(r.id||vl(r)||Al(r));if(o)return o;r=r.parentElement}return uc},Uh=(e,t)=>{let r=e.id||e.getAttribute(Dt)||"",o=Vh(e),n=e,[i,s]=[Il(n),Sl(n)];t.sendSingleEvent({eventType:we.PAGE_INTERACTION,xdm:{_aws:{pageInteraction:{name:"impression",id:r,region:o,...i,...s}}}})},bl=(e=dc,t)=>{if(typeof window>"u"||!window.IntersectionObserver){console.warn("IntersectionObserver not supported in this browser");return}let r=new IntersectionObserver(o=>{o.forEach(({target:n,isIntersecting:i})=>{i&&!Jo.has(n)?(Uh(n,t),Jo.add(n)):!i&&Jo.has(n)&&Jo.delete(n)})},{threshold:.5});return document.querySelectorAll(e).forEach(o=>{r.observe(o)}),r};function Cl(e,t=200){let r;return function(...o){clearTimeout(r),r=setTimeout(()=>{e(...o)},t)}}function _l(e,t,r){if(!("scrollY"in e))return;let o=Nt(He);try{let n=e.scrollY,i=n,s=n;t.readyState==="complete"?n=wl(e):t.addEventListener("DOMContentLoaded",()=>{n=wl(e)}),t.addEventListener("scroll",()=>{Cl(()=>{s=e.scrollY,i=Math.max(i,s)},200)()}),e.addEventListener("beforeunload",()=>{try{let a=Bh(t),c=jh(n,i,s,a);c?r.sendSingleEvent({eventType:we.PAGE_INTERACTION,xdm:{_aws:{pageInteraction:{name:"scroll",scrollDepths:c}}},useBeacon:!0}):o.logMetricCount("nullScrollDepthsError")}catch(a){let c=`${$.SEND_SCROLL_DETECTION_EVENT}${K.ERROR}`;a instanceof Error?o.logMetricErrorCount(c,Mt(a)):o.logMetricErrorCount(c,Ge)}})}catch(n){let i=`${$.SEND_SCROLL_DETECTION_EVENT}${K.ERROR}`;n instanceof Error?o.logMetricErrorCount(i,Mt(n)):o.logMetricErrorCount(i,Ge)}}function wl(e){return e.scrollY}function jh(e,t,r,o){return o<=0?null:{initial:Li(e,o),max:Li(t,o),latest:Li(r,o)}}function Li(e,t){return Math.round(e/(t-window.innerHeight)*100)}function Bh(e){let t=e.body,r=e.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,r.clientHeight,r.scrollHeight,r.offsetHeight,0)}var xe=e=>e==null;var ee=e=>!xe(e)&&!Array.isArray(e)&&typeof e=="object";var Vi=(...e)=>e.length<2?Object.assign(...e):e.reduce((t,r)=>(ee(r)&&Object.keys(r).forEach(o=>{Array.isArray(r[o])?Array.isArray(t[o])?t[o].push(...r[o]):t[o]=[...r[o]]:t[o]=r[o]}),t));var Wr=e=>{let t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=atob(r);return Uint8Array.from(o,n=>n.codePointAt(0))},Qo=(e,t={})=>{let{urlSafe:r=!1}=t||{},o=btoa(String.fromCharCode(...e));return r?o.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""):o};/*! js-cookie v3.0.5 | MIT */function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)e[o]=r[o]}return e}var Fh={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Ui(e,t){function r(n,i,s){if(!(typeof document>"u")){s=Zo({},t,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in s)s[c]&&(a+="; "+c,s[c]!==!0&&(a+="="+s[c].split(";")[0]));return document.cookie=n+"="+e.write(i,n)+a}}function o(n){if(!(typeof document>"u"||arguments.length&&!n)){for(var i=document.cookie?document.cookie.split("; "):[],s={},a=0;a<i.length;a++){var c=i[a].split("="),d=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(s[l]=e.read(d,l),n===l)break}catch{}}return n?s[n]:s}}return Object.create({set:r,get:o,remove:function(n,i){r(n,"",Zo({},i,{expires:-1}))},withAttributes:function(n){return Ui(this.converter,Zo({},this.attributes,n))},withConverter:function(n){return Ui(Zo({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Tt=Ui(Fh,{path:"/"});var _e={get:Tt.get.bind(Tt),set:Tt.set.bind(Tt),remove:Tt.remove.bind(Tt),withConverter:Tt.withConverter.bind(Tt)};var Ol=(e,t)=>{Object.keys(t).forEach(r=>{if(ee(e[r])&&ee(t[r])){Ol(e[r],t[r]);return}e[r]=t[r]})},oe=(e,...t)=>{if(xe(e))throw new TypeError('deepAssign "target" cannot be null or undefined');let r=Object(e);return t.forEach(o=>Ol(r,Object(o))),r};var Yr=(e,t)=>r=>{let n=t.split(".").reduce((i,s)=>(i[s]=i[s]||{},i[s]),e);oe(n,r)};var tt=()=>{let e=[];return{add(t){e.push(t)},call(...t){return Promise.all(e.map(r=>r(...t)))}}};var vt=({logger:e,cookieJar:t})=>({...t,set(r,o,n){return e.info("Setting cookie",{name:r,value:o,...n}),t.set(r,o,n)}});var ji=()=>{let e=0,t=Promise.resolve();return{addTask(r){e+=1;let o=()=>r().finally(()=>{e-=1});return t=t.then(o,o),t},get length(){return e}}};var At=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e};var $h=(e,t)=>e===t,Hh=(e,t,r)=>{for(let o=0;o<e.length;o+=1)if(r(e[o],t))return o;return-1},Bi=(e,t=$h)=>e.filter((r,o)=>Hh(e,r,t)===o);var Re=(e,t)=>e.appendChild(t);var qh=(e,t)=>{Object.keys(t).forEach(r=>{if(r==="style"&&ee(t[r])){let o=t[r];Object.keys(o).forEach(n=>{e.style[n]=o[n]})}else e[r]=t[r]})},ue=(e,t={},r={},o=[],n=document)=>{let i=n.createElement(e);return Object.keys(t).forEach(s=>{i.setAttribute(s,t[s])}),qh(i,r),o.forEach(s=>Re(i,s)),i};var xl="BODY",Rl="IFRAME",Sr="IMG",Nl="DIV",Tr="STYLE",vr="SCRIPT",Dl="HEAD";var Fi=({src:e,currentDocument:t=document})=>new Promise((r,o)=>{ue(Sr,{src:e},{onload:r,onerror:o,onabort:o},[],t)});var Ne=e=>typeof e=="function";var q=e=>Array.isArray(e)&&e.length>0;var Lt=e=>Array.isArray(e)?e:e==null?[]:[].slice.call(e);var Gh=/^\s*>/,Ar=(e,t)=>Gh.test(t)?Lt(e.querySelectorAll(`:scope ${t}`)):Lt(e.querySelectorAll(t));var en=":shadow";var Wh=e=>e.split(en),Yh=(e,t)=>{let r=t;return r.startsWith(">")?`${e instanceof Element||e instanceof Document?":scope":":host"} ${r}`:r},$i=(e,t)=>{let r=Wh(t);if(r.length<2)return Ar(e,t);let o=e;for(let n=0;n<r.length;n+=1){let i=r[n].trim();if(i===""&&o.shadowRoot){o=o.shadowRoot;continue}let s=Yh(o,i),a=Ar(o,s);if(a.length===0||!a[0]||!a[0].shadowRoot)return a;o=a[0].shadowRoot}};var Pl=e=>e.indexOf(en)!==-1;var Ie=(e,t=document)=>Pl(e)?$i(t,e):Ar(t,e);var kl="MutationObserver",zh="requestAnimationFrame",Kh={childList:!0,subtree:!0},Xh="visibilityState",Jh="visible",Qh=100,Zh=5e3,Hi=e=>new Error(`Could not find: ${e}`),qi=e=>new Promise(e),ey=e=>Ne(e[kl]),ty=(e,t,r,o,n)=>qi((i,s)=>{let a,c=new e[kl](()=>{let d=n(r);q(d)&&(c.disconnect(),a&&clearTimeout(a),i(d))});a=setTimeout(()=>{c.disconnect(),s(Hi(r))},o),c.observe(t,Kh)}),ry=e=>e[Xh]===Jh,oy=(e,t,r,o)=>qi((n,i)=>{let s=()=>{let a=o(t);if(q(a)){n(a);return}e[zh](s)};s(),setTimeout(()=>{i(Hi(t))},r)}),ny=(e,t,r)=>qi((o,n)=>{let i=()=>{let s=r(e);if(q(s)){o(s);return}setTimeout(i,Qh)};i(),setTimeout(()=>{n(Hi(e))},t)}),zr=(e,t=Ie,r=Zh,o=window,n=document)=>{let i=t(e);return q(i)?Promise.resolve(i):ey(o)?ty(o,n,e,r,t):ry(n)?oy(o,e,r,t):ny(e,r,t)};var Gi,Ml=(e=document)=>{if(Gi===void 0){let t=e.querySelector("[nonce]");Gi=t&&(t.nonce||t.getAttribute("nonce"))}return Gi},iy=(e,t={})=>document.querySelector(`script[src="${e}"]`)?(t.onLoad&&t.onLoad(),Promise.resolve()):new Promise((r,o)=>{let{attributes:n={},onLoad:i,onError:s}=t,a=ue("script",{type:"text/javascript",src:e,async:!0,...Ml()&&{nonce:Ml()},...n},{onload:()=>{i&&i(),r()},onerror:()=>{let d=new Error(`Failed to load script: ${e}`);s&&s(d),o(d)}}),c=()=>{let d=document.head||document.body;if(d)Re(d,a);else{let l=new Error("Neither <head> nor <body> available for script insertion.");s&&s(l),o(l)}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()}),Kr=iy;var Wi=(e,t)=>t.matches?t.matches(e):t.msMatchesSelector(e);var We=e=>{let t=e.parentNode;return t?t.removeChild(e):null};var sy={name:"Adobe Alloy"},ay={style:{display:"none",width:0,height:0}},Yi=({appendNode:e=Re,awaitSelector:t=zr,createNode:r=ue,fireImage:o=Fi}={})=>{let n=o,i,s=()=>t(xl).then(([c])=>i||(i=r(Rl,sy,ay),e(c,i))),a=({src:c})=>s().then(d=>{let l=d.contentWindow.document;return o({src:c,currentDocument:l})});return c=>{let{hideReferrer:d,url:l}=c;return d?a({src:l}):n({src:l})}};var pe=e=>ee(e)&&Object.keys(e).length===0;var Ll=(e,t)=>xe(e)||!ee(e)?e:Object.keys(e).reduce((r,o)=>{let n=e[o];if(ee(n)){let i=Ll(n,t);return pe(i)?r:{...r,[o]:i}}return t(n)?{...r,[o]:n}:r},{}),zi=Ll;var cy=e=>{let t=2166136261,r=16777619,n=new TextEncoder().encode(e);for(let i=0;i<n.length;i+=1)t^=n[i],t=Math.imul(t,r);return t>>>0},ly=e=>cy(e).toString(16).padStart(8,"0"),Xr=ly;var tn="com.adobe.alloy.";var Ki=(e,t)=>e.slice(-t);var rn=`${tn}getTld`,Xi=(e,t)=>{let r="",o=e.location.hostname.toLowerCase().split("."),n=1;for(;n<o.length&&!t.get(rn);)n+=1,r=Ki(o,n).join("."),t.set(rn,rn,{domain:r});return t.remove(rn,{domain:r}),r};var on="kndctr";var rt=e=>e.replace("@","_");var ot=(e,t)=>`${on}_${rt(e)}_${t}`;var er=(e,t)=>{let r={};return e.forEach(o=>{let n=t(o);r[n]||(r[n]=[]),r[n].push(o)}),r};var br="Chrome",nn="Edge",sn="EdgeChromium",Vl="Firefox",an="IE",Ul="Safari",cn="Unknown";var ln=e=>{let t=!1,r;return()=>(t||(t=!0,r=e()),r)};var dy=[br,nn,sn,an,cn],Jr=({getBrowser:e})=>ln(()=>dy.includes(e()));var jl="identity",Bl="consent",Fl="cluster";var Qr=({orgId:e})=>{let t=ot(e,jl);return()=>!!_e.get(t)};var Ji=(e,t,r)=>new Promise((o,n)=>{let i=indexedDB.open(e,t);i.onerror=()=>n(i.error),i.onsuccess=()=>o(i.result),i.onupgradeneeded=s=>{let a=s.target.result;r&&r(a)}}),Qi=(e,t,r)=>new Promise((o,n)=>{let a=e.transaction([t],"readonly").objectStore(t).get(r);a.onerror=()=>n(a.error),a.onsuccess=()=>o(a.result)}),Zi=(e,t,r)=>new Promise((o,n)=>{let a=e.transaction([t],"readwrite").objectStore(t).put(r);a.onerror=()=>n(a.error),a.onsuccess=()=>o(a.result)});var uy=(e,t)=>{let r=Object.keys(e);for(let o=0;o<r.length;o+=1){let n=r[o];if(e[n].test(t))return n}return cn},es=({userAgent:e})=>ln(()=>uy({[nn]:/Edge\/([0-9\._]+)/,[sn]:/Edg\/([0-9\.]+)/,[br]:/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,[Vl]:/Firefox\/([0-9\.]+)(?:\s|$)/,[an]:/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/,[Ul]:/Version\/([0-9\._]+).*Safari/},e));var $l=(e,t,r)=>({getItem(o){try{return e[t].getItem(r+o)}catch{return null}},setItem(o,n){try{return e[t].setItem(r+o,n),!0}catch{return!1}},clear(){try{return Object.keys(e[t]).forEach(o=>{o.startsWith(r)&&e[t].removeItem(o)}),!0}catch{return!1}}}),tr=e=>t=>{let r=tn+t;return{session:$l(e,"sessionStorage",r),persistent:$l(e,"localStorage",r)}};var ts=(e,t)=>e.filter(r=>t.includes(r));var Zr=e=>typeof e=="boolean";var nt=e=>typeof e=="number"&&!Number.isNaN(e);var eo=e=>{let t=parseInt(e,10);return nt(t)&&e===t};var rs=(e,t)=>t.indexOf(`${on}_${rt(e)}_`)===0;var Be=e=>typeof e=="string";var he=e=>Be(e)&&e.length>0;var z=()=>{};var my=e=>{let t={},r=e.split(".");switch(r.length){case 1:t.subdomain="",t.domain=e,t.topLevelDomain="";break;case 2:t.subdomain="",t.domain=e,t.topLevelDomain=r[1];break;case 3:t.subdomain=r[0]==="www"?"":r[0],t.domain=e,t.topLevelDomain=r[2];break;case 4:t.subdomain=r[0]==="www"?"":r[0],t.domain=e,t.topLevelDomain=`${r[2]}.${r[3]}`;break;default:break}return t},py=e=>{try{let t=new URL(e),r=t.pathname;return!e.endsWith("/")&&r==="/"&&(r=""),{host:t.hostname,path:r,query:t.search.replace(/^\?/,""),anchor:t.hash.replace(/^#/,"")}}catch{return{host:"",path:"",query:"",anchor:""}}},fy=(e,t=my)=>{Be(e)||(e="");let r=py(e),{host:o,path:n,query:i,anchor:s}=r;return{path:n,query:i,fragment:s,...t(o)}},dn=fy;var os=e=>{if(xe(e)||typeof e!="object")return null;let t=zi(e,r=>xe(r)?!1:!!(Zr(r)||nt(r)||he(r)||q(r)));return pe(t)?null:t};var Gl=Si(ql(),1),Ye=Gl.default;var ns=e=>Array.isArray(e)?e.map(t=>ns(t)):typeof e=="object"&&e!==null?Object.keys(e).sort().reduce((t,r)=>(t[r]=ns(e[r]),t),{}):e,to=e=>ns(e);var ro=e=>e instanceof Error?e:new Error(e);var oo=({error:e,message:t})=>{try{e.message=t}catch{}};var Vt=({error:e,message:t})=>{let r=ro(e),o=`${t}
Caused by: ${r.message}`;return oo({error:r,message:o}),r};var is=e=>Be(e)&&e.toLowerCase()==="true";var Fe=(e,t)=>{if(nt(e)||Be(e)){let r=Math.round(Number(e));if(!Number.isNaN(r))return r}return t};var Ut=(e,t,r)=>`${e}`.padStart(t,r),ss=e=>{let t=e.getFullYear(),r=Ut(e.getMonth()+1,2,"0"),o=Ut(e.getDate(),2,"0"),n=Ut(e.getHours(),2,"0"),i=Ut(e.getMinutes(),2,"0"),s=Ut(e.getSeconds(),2,"0"),a=Ut(e.getMilliseconds(),3,"0"),c=Fe(e.getTimezoneOffset(),0),d=c>0?"-":"+",l=Ut(Math.floor(Math.abs(c)/60),2,"0"),u=Ut(Math.abs(c)%60,2,"0");return`${t}-${r}-${o}T${n}:${i}:${s}.${a}${d}${l}:${u}`};var Se=[];for(let e=0;e<256;++e)Se.push((e+256).toString(16).slice(1));function Wl(e,t=0){return(Se[e[t+0]]+Se[e[t+1]]+Se[e[t+2]]+Se[e[t+3]]+"-"+Se[e[t+4]]+Se[e[t+5]]+"-"+Se[e[t+6]]+Se[e[t+7]]+"-"+Se[e[t+8]]+Se[e[t+9]]+"-"+Se[e[t+10]]+Se[e[t+11]]+Se[e[t+12]]+Se[e[t+13]]+Se[e[t+14]]+Se[e[t+15]]).toLowerCase()}var as,hy=new Uint8Array(16);function cs(){if(!as){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");as=crypto.getRandomValues.bind(crypto)}return as(hy)}var yy=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ls={randomUUID:yy};function Iy(e,t,r){if(ls.randomUUID&&!t&&!e)return ls.randomUUID();e=e||{};let o=e.random??e.rng?.()??cs();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let n=0;n<16;++n)t[r+n]=o[n];return t}return Wl(o)}var ds=Iy;var bt=ds;var Yl=e=>function(r,o){return r==null?r:e.call(this,r,o)},zl=(e,t)=>function(o,n){return t.call(this,e.call(this,o,n),n)},Sy=(e,t)=>function(o,n){let i=[],s=[e,t].reduce((a,c)=>{try{return c.call(this,a,n)}catch(d){return i.push(d),a}},o);if(i.length)throw new Error(i.join(`
`));return s},no=(e,t,r)=>Object.assign(zl(e,t),e,r),ae=(e,t,r)=>Object.assign(zl(e,Yl(t)),e,r),Kl=(e,t,r)=>Object.assign(Sy(Yl(t),e),e,r),G=(e,t,r,o)=>{if(!e)throw new Error(`'${r}': Expected ${o}, but got ${JSON.stringify(t)}.`)};var Xl=(e,t)=>(G(Zr(e),e,t,"true or false"),e);var Jl=(e,t)=>(G(Ne(e),e,t,"a function"),e);var Ql=(e,t)=>function(o,n){let i,s=e.find(a=>{try{return i=a.call(this,o,n),!0}catch{return!1}});return G(s,o,n,t),i};var Zl=e=>function(r,o){G(Array.isArray(r),r,o,"an array");let n=[],i=r.map((s,a)=>{try{return e.call(this,s,`${o}[${a}]`,r)}catch(c){n.push(c.message);return}});if(n.length)throw new Error(n.join(`
`));return i};var ed=e=>t=>t??e;var td=(e="This field has been deprecated")=>function(r,o){let n=e;return r!==void 0&&(o&&(n=`'${o}': ${n}`),this&&this.logger&&this.logger.warn(n)),r};var rd=e=>(t,r)=>(G(t===e,t,r,`${e}`),t);var od=e=>function(r,o){G(ee(r),r,o,"an object");let n=[],i={};if(Object.keys(r).forEach(s=>{let a=r[s],c=o?`${o}.${s}`:s;try{let d=e.call(this,a,c);d!==void 0&&(i[s]=d)}catch(d){n.push(d.message)}}),n.length)throw new Error(n.join(`
`));return i};var us=(e,t)=>(r,o)=>(G(r>=t,r,o,`${e} greater than or equal to ${t}`),r);var nd=(e,t)=>(r,o)=>(G(r<=t,r,o,`${e} less than or equal to ${t}`),r);var id=e=>(t,r)=>{let o=[];if(Object.keys(t).forEach(n=>{if(!e[n]){let i=r?`${r}.${n}`:n;o.push(`'${i}': Unknown field.`)}}),o.length)throw new Error(o.join(`
`));return t};var un=e=>(t,r)=>(ee(t)?G(!pe(t),t,r,e):G(t.length>0,t,r,e),t);var sd=e=>function(r,o){G(ee(r),r,o,"an object");let n=[],i={};if(Object.keys(e).forEach(s=>{let a=r[s],c=e[s],d=o?`${o}.${s}`:s;try{let l=c.call(this,a,d);l!==void 0&&(i[s]=l)}catch(l){n.push(l.message)}}),Object.keys(r).forEach(s=>{Object.prototype.hasOwnProperty.call(i,s)||(i[s]=r[s])}),n.length)throw new Error(n.join(`
`));return i};var ad=(e,t,r)=>function(n,i){G(ee(n),n,i,"an object");let{[e]:s,[r]:a,...c}=n,d=t(s,i);if(d!==void 0){let l=`The field '${e}' is deprecated. Use '${r}' instead.`;if(i&&(l=`'${i}': ${l}`),a!==void 0&&a!==d)throw new Error(l);this&&this.logger&&this.logger.warn(l)}return{[r]:a||d,...c}};var cd=()=>{let e=[];return(t,r)=>(G(e.indexOf(t)===-1,t,r,"a unique value across instances"),e.push(t),t)};var ld=e=>{let t=Object.create(null);for(let r=0;r<e.length;r+=1){let o=e[r];if(o in t)return!1;t[o]=!0}return!0};var dd=()=>(e,t)=>(G(ld(e),e,t,"array values to be unique"),e);var Ty=/^[a-z0-9.-]{1,}$/i,ud=(e,t)=>(G(Ty.test(e),e,t,"a valid domain"),e);var md=(e,t)=>(G(eo(e),e,t,"an integer"),e);var pd=(e,t)=>(G(nt(e),e,t,"a number"),e);var fd=e=>{try{return RegExp(e)!==null}catch{return!1}};var Ed=(e,t)=>(G(fd(e),e,t,"a regular expression"),e);var gd=(e,t)=>{if(e==null)throw new Error(`'${t}' is a required option`);return e};var hd=(e,t)=>(G(Be(e),e,t,"a string"),e);var yd=e=>(t,r)=>(G(e.test(t),t,r,`does not match the ${e.toString()}`),t);var $e=e=>e;$e.default=function(t){return no(this,ed(t))};$e.required=function(){return no(this,gd)};$e.deprecated=function(t){return no(this,td(t))};var vy=function(){return ae(this,ud)},Ay=function(t){return ae(this,us("an integer",t))},by=function(t){return ae(this,us("a number",t))},Cy=function(t){return ae(this,nd("a number",t))},wy=function(){return ae(this,md,{minimum:Ay})},_y=function(){return ae(this,un("a non-empty string"))},Oy=function(){return ae(this,un("a non-empty array"))},Id=function(){return ae(this,un("a non-empty object"))},xy=function(){return ae(this,Ed)},Ry=function(t){return ae(this,yd(t))},Sd=function(){return ae(this,cd())},Ny=function(){return ae(this,dd())},Dy=function(t,r){return no(this,Ql(t,r))},Py=function(){return this},ky=function(t){return ae(this,Zl(t),{nonEmpty:Oy,uniqueItems:Ny})},My=function(){return ae(this,Xl)},Ly=function(){return ae(this,Jl)},Vy=function(t){return ae(this,rd(t))},Uy=function(){return ae(this,pd,{minimum:by,maximum:Cy,integer:wy,unique:Sd})},jy=function(t){return ae(this,od(t),{nonEmpty:Id})},Td=e=>({noUnknownFields:function(){return ae(this,id(e))},nonEmpty:Id,concat:function(r){let o={...e,...r.schema};return ae(this,r,Td(o))},renamed:function(r,o,n){return Kl(this,ad(r,o,n))},schema:e}),By=function(t){return ae(this,sd(t),Td(t))},Fy=function(){return ae(this,hd,{regexp:xy,domain:vy,nonEmpty:_y,unique:Sd,matches:Ry})},jt=Dy.bind($e),ze=Py.bind($e),ne=ky.bind($e),X=My.bind($e),it=Ly.bind($e),ms=Vy.bind($e),Ee=Uy.bind($e),mn=jy.bind($e),w=By.bind($e),R=Fy.bind($e),st=function(...t){return jt(t.map(ms),`one of these values: ${JSON.stringify(t)}`)};var vd="ambiguous",Ad="authenticated",bd="loggedOut";var io=mn(ne(w({authenticatedState:st(vd,Ad,bd),id:R(),namespace:w({code:R()}).noUnknownFields(),primary:X(),xid:R()}).noUnknownFields()).required());var De=w({});var ps="alloy_debug";var fs=({console:e,locationSearch:t,createLogger:r,instanceName:o,createNamespacedStorage:n,getMonitors:i})=>{let s=Ye.parse(t),a=n(`instance.${o}.`),c=a.session.getItem("debug"),d=c==="true",l=c===null,u=()=>d,m=(p,{fromConfig:f})=>{(!f||l)&&(d=p),f||(a.session.setItem("debug",p.toString()),l=!1)};return s[ps]!==void 0&&m(is(s[ps]),{fromConfig:!1}),{setDebugEnabled:m,logger:r({getDebugEnabled:u,context:{instanceName:o},getMonitors:i,console:e}),createComponentLogger(p){return r({getDebugEnabled:u,context:{instanceName:o,componentName:p},getMonitors:i,console:e})}}};var $y=["onComponentsRegistered","onBeforeEvent","onBeforeRequest","onResponse","onRequestFailure","onClick","onDecision"],Hy=(e,t)=>(...r)=>Promise.all(e.getLifecycleCallbacks(t).map(o=>new Promise(n=>{n(o(...r))}))),qy=e=>(...t)=>Promise.resolve().then(()=>e(...t)),Cd=e=>$y.reduce((t,r)=>(t[r]=qy(Hy(e,r)),t),{});var wd=(e,t)=>(...r)=>{let o;try{o=e(...r)}catch(n){throw Vt({error:n,message:t})}return o instanceof Promise&&(o=o.catch(n=>{throw Vt({error:n,message:t})})),o},_d=()=>{let e={},t={},r={},o=(i,s={})=>{let a=ts(Object.keys(t),Object.keys(s));if(a.length)throw new Error(`[ComponentRegistry] Could not register ${i} because it has existing command(s): ${a.join(",")}`);Object.keys(s).forEach(c=>{let d=s[c];d.commandName=c,d.run=wd(d.run,`[${i}] An error occurred while executing the ${c} command.`),t[c]=d})},n=(i,s={})=>{Object.keys(s).forEach(a=>{r[a]=r[a]||[],r[a].push(wd(s[a],`[${i}] An error occurred while executing the ${a} lifecycle hook.`))})};return{register(i,s){let{commands:a,lifecycle:c}=s;o(i,a),n(i,c),e[i]=s},getCommand(i){return t[i]},getCommandNames(){return Object.keys(t)},getLifecycleCallbacks(i){return r[i]||[]},getComponentNames(){return Object.keys(e)}}};var Od=({logger:e,sendFetchRequest:t,sendBeaconRequest:r,isRequestRetryable:o,getRequestRetryDelay:n})=>({requestId:i,url:s,payload:a,useSendBeacon:c})=>{let d=JSON.stringify(a),l=JSON.parse(d);e.logOnBeforeNetworkRequest({url:s,requestId:i,payload:l});let u=(m=0)=>(c?r:t)(s,d).then(f=>{if(o({response:f,retriesAttempted:m})){let A=n({response:f,retriesAttempted:m});return new Promise(b=>{setTimeout(()=>{b(u(m+1))},A)})}let v;try{v=JSON.parse(f.body)}catch{}return e.logOnNetworkResponse({requestId:i,url:s,payload:l,...f,parsedBody:v,retriesAttempted:m}),{statusCode:f.statusCode,body:f.body,parsedBody:v,getHeader:f.getHeader}});return u().catch(m=>{throw e.logOnNetworkError({requestId:i,url:s,payload:l,error:m}),Vt({error:m,message:"Network request failed."})})};var xd=({logger:e})=>t=>{if(t){let r=t.split(";");if(r.length>=2&&r[1].length>0)try{let o=parseInt(r[1],10);if(!Number.isNaN(o))return{regionId:o}}catch{}e.warn(`Invalid adobe edge: "${t}"`)}return{}};var Gy=1,pn=(e,t)=>{let r=0,o=0,n;do{if(t<0||t+o>=e.length)throw new Error("Invalid varint: buffer ended unexpectedly");if(n=e[t+o],r|=(n&127)<<7*o,o+=1,o>10)throw new Error("Invalid varint: too long")}while(n&128);return{value:r,length:o}},rr=Object.freeze({VARINT:0,I64:1,LEN:2,SGROUP:3,EGROUP:4,I32:5}),Wy=e=>{let t=0,r=null;for(;t<e.length&&!r;){let{value:o,length:n}=pn(e,t);t+=n;let i=o&7;if(o>>3===Gy){if(i===rr.LEN){let a=pn(e,t);return t+=a.length,r=new TextDecoder().decode(e.slice(t,t+a.value)),t+=a.value,r}}else switch(i){case rr.VARINT:t+=pn(e,t).length;break;case rr.I64:t+=8;break;case rr.LEN:{let a=pn(e,t);t+=a.length+a.value;break}case rr.SGROUP:break;case rr.EGROUP:break;case rr.I32:t+=4;break;default:throw new Error(`Malformed kndctr cookie. Unknown wire type: ${i}`)}}throw new Error("No ECID found in cookie.")},Rd=({orgId:e,cookieJar:t,logger:r})=>{let o=ot(e,"identity");return()=>{let n=t.get(o);if(!n)return null;try{let i=decodeURIComponent(n).replace(/_/g,"/").replace(/-/g,"+"),s=Wr(i);return Wy(s)}catch(i){return r.warn(`Unable to decode ECID from ${o} cookie`,i),null}}};var Nd=({logger:e,loggingCookieJar:t,config:r})=>{let o=null,n=new Promise(s=>{o=s}),i=Rd({orgId:r.orgId,cookieJar:t,logger:e});return{initialize(){i()&&this.setIdentityAcquired()},setIdentityAcquired(){o()},awaitIdentity(){return n},getEcidFromCookie:()=>i()}};var so="in",Cr="out",fn="pending",Es="disabled",ao="wait",En="auto";var Bt="general";var hs="declinedConsent",co="default",gn="initial",hn="new",gs=e=>{let t=new Error(e);return t.code=hs,t.message=e,t},Dd=({logger:e})=>{let t=[],r=()=>{for(;t.length;)t.shift().resolve()},o=()=>{for(;t.length;)t.shift().reject(gs("The user declined consent."))},n=()=>Promise.resolve(),i=()=>Promise.resolve(),s=()=>Promise.resolve(),a=()=>Promise.reject(gs("No consent preferences have been set.")),c=()=>Promise.reject(gs("The user declined consent.")),d=l=>{if(l)return Promise.reject(new Error("Consent is pending."));let u=At();return t.push(u),u.promise};return{in(l){l===co?this.awaitConsent=i:(l===gn?e.info("Loaded user consent preferences. The user previously consented."):l===hn&&this.awaitConsent!==s&&e.info("User consented."),r(),this.awaitConsent=s)},out(l){l===co?(e.warn("User consent preferences not found. Default consent of out will be used."),this.awaitConsent=a):(l===gn?e.warn("Loaded user consent preferences. The user previously declined consent."):l===hn&&this.awaitConsent!==c&&e.warn("User declined consent."),o(),this.awaitConsent=c)},pending(l){l===co&&e.info("User consent preferences not found. Default consent of pending will be used. Some commands may be delayed."),this.awaitConsent=d},awaitConsent:n,withConsent(){return this.awaitConsent(!0)},current(){switch(this.awaitConsent){case i:return{state:"in",wasSet:!1};case s:return{state:"in",wasSet:!0};case a:return{state:"out",wasSet:!1};case c:return{state:"out",wasSet:!0};case d:return{state:"pending",wasSet:!1};default:return{state:"in",wasSet:!1}}}}};var Pd=({generalConsentState:e,logger:t})=>{let r=(o,n)=>{switch(o[Bt]){case so:e.in(n);break;case Cr:e.out(n);break;case fn:e.pending(n);break;default:t.warn(`Unknown consent value: ${o[Bt]}`);break}};return{initializeConsent(o,n){n[Bt]?r(n,gn):r(o,co)},setConsent(o){r(o,hn)},suspend(){e.pending()},awaitConsent(){return e.awaitConsent()},withConsent(){return e.withConsent()},current(){return e.current()}}};var kd=e=>e&&e._experience&&e._experience.decisioning&&q(e._experience.decisioning.propositions)?e._experience.decisioning.propositions:[],Md=()=>{let e={},t,r,o=!1,n=!1,i=!0,s=c=>{if(n)throw new Error(`${c} cannot be called after event is finalized.`)},a={hasQuery(){return Object.prototype.hasOwnProperty.call(this.getContent(),"query")},getContent(){let c=JSON.parse(JSON.stringify(e));return t&&oe(c,{xdm:t}),r&&oe(c,{data:r}),c},setUserXdm(c){s("setUserXdm"),t=c},setUserData(c){s("setUserData"),r=c},mergeXdm(c){s("mergeXdm"),c&&oe(e,{xdm:c})},mergeData(c){s("mergeData"),c&&oe(e,{data:c})},mergeMeta(c){s("mergeMeta"),c&&oe(e,{meta:c})},mergeQuery(c){s("mergeQuery"),c&&oe(e,{query:c})},documentMayUnload(){o=!0},finalize(c){if(n)return;let d=Bi([...kd(t),...kd(e.xdm)],(l,u)=>l===u||l.id&&u.id&&l.id===u.id&&l.scope&&u.scope&&l.scope===u.scope);if(t&&this.mergeXdm(t),d.length>0&&(e.xdm._experience.decisioning.propositions=d),r&&a.mergeData(r),n=!0,c){i=!1;let l={xdm:e.xdm||{},data:e.data||{}};i=c(l)!==!1,e.xdm=l.xdm||{},e.data=l.data||{},pe(e.xdm)&&delete e.xdm,pe(e.data)&&delete e.data}},getDocumentMayUnload(){return o},isEmpty(){return pe(e)&&(!t||pe(t))&&(!r||pe(r))},shouldSend(){return i},getViewName(){if(!(!t||!t.web||!t.web.webPageDetails))return t.web.webPageDetails.viewName},toJSON(){if(!n)throw new Error("toJSON called before finalize");return e}};return a};var Ld="Retry-After",Vd="x-adobe-edge";var Ud=({extractEdgeInfo:e})=>({content:t={},getHeader:r})=>{let{handle:o=[],errors:n=[],warnings:i=[]}=t;return{getPayloadsByType(s){return o.filter(a=>a.type===s).flatMap(a=>a.payload)},getErrors(){return n},getWarnings(){return i},getEdge(){return e(r(Vd))},toJSON(){return t}}};var lo="configure",wr="setDebug";var jd=({logger:e,configureCommand:t,setDebugCommand:r,handleError:o,validateCommandOptions:n})=>{let i,s=(a,c)=>{let d;if(a===lo){if(i)throw new Error("The library has already been configured and may only be configured once.");d=()=>(i=t(c),i.then(()=>{}))}else{if(!i)throw new Error("The library must be configured first. Please do so by executing the configure command.");a===wr?d=()=>{let l=w({enabled:X().required()}).noUnknownFields(),u=n({command:{commandName:wr,optionsValidator:l},options:c});r(u)}:d=()=>i.then(l=>{let u=l.getCommand(a);if(!u||!Ne(u.run)){let p=[lo,wr].concat(l.getCommandNames()).join(", ");throw new Error(`The ${a} command does not exist. List of available commands: ${p}.`)}let m=n({command:u,options:c});return u.run(m)},()=>(e.warn(`An error during configuration is preventing the ${a} command from executing.`),new Promise(()=>{})))}return d};return(a,c={})=>new Promise(d=>{let l=s(a,c);e.logOnBeforeCommand({commandName:a,options:c}),d(l())}).catch(d=>o(d,`${a} command`)).catch(d=>{throw e.logOnCommandRejected({commandName:a,options:c,error:d}),d}).then(d=>{let l=ee(d)?d:{};return e.logOnCommandResolved({commandName:a,options:c,result:l}),l})};var Yy="https://adobe.ly/3sHgQHb",Bd=({command:e,options:t})=>{let{commandName:r,documentationUri:o=Yy,optionsValidator:n}=e,i=t;if(n)try{i=n(t)}catch(s){let a=`Invalid ${r} command options:
	 - ${s} For command documentation see: ${o}`;throw new Error(a)}return i};var zy="https://adobe.ly/3sHh553",Ky=({combinedConfigValidator:e,options:t,logger:r})=>{try{return e.noUnknownFields().required().call({logger:r},t)}catch(o){throw new Error(`Resolve these configuration problems:
	 - ${o.message.split(`
`).join(`
	 - `)}
For configuration documentation see: ${zy}`)}},Xy=(e,t,r)=>r.reduce((o,{buildOnInstanceConfiguredExtraParams:n})=>(n&&(o={...o,...n({config:e,logger:t})}),o),{}),Jy=e=>{let t=[],r={get enabled(){return e.enabled},flush(){t.forEach(({method:o,args:n})=>e[o](...n))}};return Object.keys(e).filter(o=>typeof e[o]=="function").forEach(o=>{r[o]=(...n)=>{t.push({method:o,args:n})}}),r},Fd=({options:e,componentCreators:t,coreConfigValidators:r,createConfig:o,logger:n,setDebugEnabled:i})=>{let s=Jy(n),a=t.map(({configValidators:l})=>l).filter(l=>l).reduce((l,u)=>l.concat(u),r),c=o(Ky({combinedConfigValidator:a,options:e,logger:s}));i(c.debugEnabled,{fromConfig:!0}),s.flush();let d=Xy(c,n,t);return n.logOnInstanceConfigured({...d,config:c}),c};var $d=({componentCreators:e,lifecycle:t,componentRegistry:r,getImmediatelyAvailableTools:o})=>(e.forEach(n=>{let{namespace:i}=n,s=o(i),a;try{a=n(s)}catch(c){throw Vt({error:c,message:`[${i}] An error occurred during component creation.`})}r.register(i,a)}),t.onComponentsRegistered({lifecycle:t}).then(()=>r));var Qy=e=>({...e}),Hd=Qy;var qd="edge.adobedc.net",Gd="adobedc.demdex.net";var Wd="ee";var Yd=()=>w({debugEnabled:X().default(!1),datastreamId:R().unique().required(),edgeDomain:R().domain().default(qd),edgeBasePath:R().nonEmpty().default(Wd),orgId:R().unique().required(),onBeforeEventSend:it().default(z),edgeConfigOverrides:De}).renamed("edgeConfigId",R().unique(),"datastreamId");var ys=({errorPrefix:e,logger:t})=>(r,o)=>{let n=ro(r);if(n.code===hs)return t.warn(`The ${o} could not fully complete. ${n.message}`),{};throw oo({error:n,message:`${e} ${n.message}`}),n};var zd=({fetch:e})=>(t,r)=>e(t,{method:"POST",cache:"no-cache",credentials:"include",headers:{"Content-Type":"text/plain; charset=UTF-8"},referrerPolicy:"no-referrer-when-downgrade",body:r}).then(o=>o.text().then(n=>({statusCode:o.status,getHeader(i){return o.headers.get(i)},body:n})));var Kd=({sendBeacon:e,sendFetchRequest:t,logger:r})=>(o,n)=>{let i=new Blob([n],{type:"text/plain; charset=UTF-8"});return e(o,i)?Promise.resolve({statusCode:204,getHeader(){return null},body:""}):(r.info("Unable to use `sendBeacon`; falling back to `fetch`."),t(o,n))};var Is=({getDebugEnabled:e,console:t,getMonitors:r,context:o})=>{let n=`[${o.instanceName}]`;o.componentName&&(n+=` [${o.componentName}]`);let i=(a,c)=>{let d=r();if(d.length>0){let l={...o,...c};d.forEach(u=>{u[a]&&u[a](l)})}},s=(a,...c)=>{i("onBeforeLog",{level:a,arguments:c}),e()&&t[a](n,...c)};return{get enabled(){return r().length>0||e()},logOnInstanceCreated(a){i("onInstanceCreated",a),s("info","Instance initialized.")},logOnInstanceConfigured(a){i("onInstanceConfigured",a),s("info","Instance configured. Computed configuration:",a.config)},logOnBeforeCommand(a){i("onBeforeCommand",a),s("info",`Executing ${a.commandName} command. Options:`,a.options)},logOnCommandResolved(a){i("onCommandResolved",a),s("info",`${a.commandName} command resolved. Result:`,a.result)},logOnCommandRejected(a){i("onCommandRejected",a),s("error",`${a.commandName} command was rejected. Error:`,a.error)},logOnBeforeNetworkRequest(a){i("onBeforeNetworkRequest",a),s("info",`Request ${a.requestId}: Sending request.`,a.payload)},logOnNetworkResponse(a){i("onNetworkResponse",a);let c=a.parsedBody||a.body?"response body:":"no response body.";s("info",`Request ${a.requestId}: Received response with status code ${a.statusCode} and ${c}`,a.parsedBody||a.body)},logOnNetworkError(a){i("onNetworkError",a),s("error",`Request ${a.requestId}: Network request failed.`,a.error)},logOnContentHiding(a){i("onContentHiding",{status:a.status}),s(a.logLevel,a.message)},logOnContentRendering(a){i("onContentRendering",{status:a.status,payload:a.detail}),s(a.logLevel,a.message)},info:s.bind(null,"info"),warn:s.bind(null,"warn"),error:s.bind(null,"error")}};var Ke="__view__";var uo=e=>(t,r)=>{e.xdm=e.xdm||{},e.xdm.identityMap=e.xdm.identityMap||{},e.xdm.identityMap[t]=e.xdm.identityMap[t]||[],e.xdm.identityMap[t].push(r)};var at=e=>{let{payload:t,getAction:r,getUseSendBeacon:o,datastreamIdOverride:n,edgeSubPath:i}=e,s=bt(),a=!1,c=!1;return{getId(){return s},getPayload(){return t},getAction(){return r({isIdentityEstablished:c})},getDatastreamIdOverride(){return n},getUseSendBeacon(){return o({isIdentityEstablished:c})},getEdgeSubPath(){return i||""},getUseIdThirdPartyDomain(){return a},setUseIdThirdPartyDomain(){a=!0},setIsIdentityEstablished(){c=!0}}};var mo=({payload:e,datastreamIdOverride:t})=>{let r=({isIdentityEstablished:o})=>e.getDocumentMayUnload()&&o;return at({payload:e,getAction({isIdentityEstablished:o}){return r({isIdentityEstablished:o})?"collect":"interact"},getUseSendBeacon:r,datastreamIdOverride:t})};var Zy=(e,t)=>r=>{let n=t.split(".").reduce((i,s)=>(i[s]=i[s]||{},i[s]),e);Object.assign(n,r)},or=e=>{let{content:t,addIdentity:r,hasIdentity:o}=e,n=Zy(t,"meta.configOverrides");return{mergeMeta:Yr(t,"meta"),mergeState:Yr(t,"meta.state"),mergeQuery:Yr(t,"query"),mergeConfigOverride:i=>n(os(i)),addIdentity:r,hasIdentity:o,toJSON(){return t}}};var po=e=>t=>(e.xdm&&e.xdm.identityMap&&e.xdm.identityMap[t])!==void 0;var Ct=()=>{let e={};return{...or({content:e,addIdentity:uo(e),hasIdentity:po(e)}),addEvent:r=>{e.events=e.events||[],e.events.push(r)},getDocumentMayUnload:()=>(e.events||[]).some(r=>r.getDocumentMayUnload())}};var nr=({localConfigOverrides:e,globalConfigOverrides:t,payload:r})=>{let o={payload:r},{datastreamId:n,...i}=e||{};return n&&(o.datastreamIdOverride=n),t&&!pe(t)&&r.mergeConfigOverride(t),i&&!pe(i)&&r.mergeConfigOverride(i),o};var eI="adb_validation_sessionid",tI="validation.",Xd="clientId",rI=e=>{let t=e.persistent.getItem(Xd);return t||(t=bt(),e.persistent.setItem(Xd,t)),t},Ss=({window:e,createNamespacedStorage:t})=>{let r=t(tI);return()=>{let n=Ye.parse(e.location.search)[eI];if(!n)return"";let i=rI(r),s=`${n}|${i}`;return`&${Ye.stringify({adobeAepValidationToken:s})}`}};var Jd="Event was canceled because the onBeforeEventSend callback returned false.",Qd=({config:e,logger:t,lifecycle:r,consent:o,createEvent:n,createDataCollectionRequestPayload:i,createDataCollectionRequest:s,sendEdgeNetworkRequest:a,applyResponse:c})=>{let{onBeforeEventSend:d,edgeConfigOverrides:l}=e;return{createEvent:n,sendEvent(u,m={}){let{edgeConfigOverrides:p,...f}=m,y=nr({payload:i(),localConfigOverrides:p,globalConfigOverrides:l}),v=s(y),A=tt(),b=tt();return r.onBeforeEvent({...f,event:u,onResponse:A.add,onRequestFailure:b.add}).then(()=>(y.payload.addEvent(u),o.awaitConsent())).then(()=>{try{u.finalize(d)}catch(N){let k=()=>{throw N};return b.add(r.onRequestFailure),b.call({error:N}).then(k,k)}if(!u.shouldSend()){b.add(r.onRequestFailure),t.info(Jd);let N=new Error(Jd);return b.call({error:N}).then(()=>{})}return a({request:v,runOnResponseCallbacks:A.call,runOnRequestFailureCallbacks:b.call})})},applyResponse(u,m={}){let{renderDecisions:p=!1,decisionContext:f={},responseHeaders:y={},responseBody:v={handle:[]},personalization:A}=m,b=i(),N=s({payload:b}),k=tt();return r.onBeforeEvent({event:u,renderDecisions:p,decisionContext:f,decisionScopes:[Ke],personalization:A,onResponse:k.add,onRequestFailure:z}).then(()=>(b.addEvent(u),c({request:N,responseHeaders:y,responseBody:v,runOnResponseCallbacks:k.call})))}}};var oI="state:store",Zd=({cookieJar:e,shouldTransferCookie:t,apexDomain:r,dateProvider:o})=>({cookiesToPayload(n,i){let s=r!==""&&i.endsWith(r),a={domain:r,cookiesEnabled:!0};if(!s){let c=e.get(),d=Object.keys(c).filter(t).map(l=>({key:l,value:c[l]}));d.length&&(a.entries=d)}n.mergeState(a)},responseToCookies(n){n.getPayloadsByType(oI).forEach(i=>{let s={domain:r},a=i.attrs&&i.attrs.SameSite&&i.attrs.SameSite.toLowerCase();i.maxAge!==void 0&&(s.expires=new Date(o().getTime()+i.maxAge*1e3)),a!==void 0&&(s.sameSite=a),a==="none"&&(s.secure=!0),e.set(i.key,i.value,s)})}});var eu="mboxEdgeCluster",tu="at_qa_mode",ru="mbox";var ou=({orgId:e,targetMigrationEnabled:t})=>r=>rs(e,r)||r===tu||t&&r===ru;var nu="v1";var nI="TypeError",iI="NetworkError",iu=e=>e.name===nI||e.name===iI||e.status===0;var yn=e=>{let t=e.shift()||[],r=e.shift()||[],o=e;return Vi({},...t,...r,...o)};var In=e=>t=>{let r=()=>{throw t};return e.call({error:t}).then(r,r)};var sI=(e,t)=>t.getUseIdThirdPartyDomain()&&iu(e),su=({config:e,lifecycle:t,cookieTransfer:r,sendNetworkRequest:o,createResponse:n,processWarningsAndErrors:i,getLocationHint:s,getAssuranceValidationTokenParams:a})=>{let{edgeDomain:c,edgeBasePath:d,datastreamId:l}=e,u=!1,m=(p,f)=>{let y=s(),v=y?`${d}/${y}${f.getEdgeSubPath()}`:`${d}${f.getEdgeSubPath()}`,A=f.getDatastreamIdOverride()||l;return A!==l&&f.getPayload().mergeMeta({sdkConfig:{datastream:{original:l}}}),`https://${p}/${v}/${nu}/${f.getAction()}?configId=${A}&requestId=${f.getId()}${a()}`};return({request:p,runOnResponseCallbacks:f=z,runOnRequestFailureCallbacks:y=z})=>{let v=tt();v.add(t.onResponse),v.add(f);let A=tt();return A.add(t.onRequestFailure),A.add(y),t.onBeforeRequest({request:p,onResponse:v.add,onRequestFailure:A.add}).then(()=>{let b=u||!p.getUseIdThirdPartyDomain()?c:Gd,N=m(b,p),k=p.getPayload();return r.cookiesToPayload(k,b),o({requestId:p.getId(),url:N,payload:k,useSendBeacon:p.getUseSendBeacon()})}).then(b=>(i(b),b)).catch(b=>{if(sI(b,p)){u=!0,p.setUseIdThirdPartyDomain(!1);let N=m(c,p),k=p.getPayload();return r.cookiesToPayload(k,c),o({requestId:p.getId(),url:N,payload:k,useSendBeacon:p.getUseSendBeacon()})}return In(A)(b)}).then(({parsedBody:b,getHeader:N})=>{let k=n({content:b,getHeader:N});return r.responseToCookies(k),v.call({response:k}).then(yn)})}};var Ts="The server responded with a",au=({logger:e})=>t=>{let{statusCode:r,body:o,parsedBody:n}=t;if(r<200||r>=300||!n&&r!==204||n&&!Array.isArray(n.handle)){let i=n?JSON.stringify(n,null,2):o,s=i?`response body:
${i}`:"no response body.";throw new Error(`${Ts} status code ${r} and ${s}`)}if(n){let{warnings:i=[],errors:s=[]}=n;i.forEach(a=>{e.warn(`${Ts} warning:`,a)}),s.forEach(a=>{e.error(`${Ts} non-fatal error:`,a)})}};var cu=({orgId:e,cookieJar:t})=>{let r=ot(e,Fl),o=()=>t.get(r),n=()=>{let i=t.get(eu);if(i)return`t${i}`};return()=>o()||n()};var mI=3,pI=[429,503,502,504],lu=({response:e,retriesAttempted:t})=>t<mI&&pI.includes(e.statusCode);var fI=1e3,EI=1e3,gI=.3,hI=e=>{let t=fI+e*EI,r=t*gI,o=t-r,n=t+r;return Math.round(o+Math.random()*(n-o))},yI=e=>{let t=e.getHeader(Ld),r;if(t){let o=parseInt(t,10);eo(o)?r=o*1e3:r=Math.max(0,new Date(t).getTime()-new Date().getTime())}return r},du=({response:e,retriesAttempted:t})=>{let r=yI(e);return r===void 0&&(r=hI(t)),r};var II=200,uu=({cookieTransfer:e,lifecycle:t,createResponse:r,processWarningsAndErrors:o})=>({request:n,responseHeaders:i,responseBody:s,runOnResponseCallbacks:a=z,runOnRequestFailureCallbacks:c=z})=>{let d=tt();d.add(t.onResponse),d.add(a);let l=tt();l.add(t.onRequestFailure),l.add(c);let u=m=>i[m];return t.onBeforeRequest({request:n,onResponse:d.add,onRequestFailure:l.add}).then(()=>o({statusCode:II,getHeader:u,body:JSON.stringify(s),parsedBody:s})).catch(In(l)).then(()=>{let m=r({content:s,getHeader:u});return e.responseToCookies(m),d.call({response:m}).then(yn)})};var vs=e=>{let t=window.__alloyMonitors||[];return e&&(t=t.concat(e)),t};var ws={};ja(ws,{context:()=>Tu,dataCollector:()=>Cu,identity:()=>Xu,libraryInfo:()=>Qu});var mu=e=>t=>{let r={webPageDetails:{URL:e.location.href||e.location},webReferrer:{URL:e.document.referrer}};oe(t,{web:r})};var SI=e=>{let{screen:{orientation:t}}=e;if(t==null||t.type==null)return null;let r=t.type.split("-");return r.length===0||r[0]!=="portrait"&&r[0]!=="landscape"?null:r[0]},TI=e=>{if(Ne(e.matchMedia)){if(e.matchMedia("(orientation: portrait)").matches)return"portrait";if(e.matchMedia("(orientation: landscape)").matches)return"landscape"}return null},pu=e=>t=>{let{screen:{width:r,height:o}}=e,n={},i=Fe(o);i>=0&&(n.screenHeight=i);let s=Fe(r);s>=0&&(n.screenWidth=s);let a=SI(e)||TI(e);a&&(n.screenOrientation=a),Object.keys(n).length>0&&oe(t,{device:n})};var fu=e=>t=>{let{document:{documentElement:{clientWidth:r,clientHeight:o}={}}}=e,n={type:"browser"},i=Fe(r);i>=0&&(n.browserDetails={viewportWidth:i});let s=Fe(o);s>=0&&(n.browserDetails=n.browserDetails||{},n.browserDetails.viewportHeight=s),oe(t,{environment:n})};var Eu=e=>t=>{let r=e(),o={},n=Fe(r.getTimezoneOffset());n!==void 0&&(o.localTimezoneOffset=n),(n===void 0||Math.abs(n)<6e3)&&(o.localTime=ss(r)),oe(t,{placeContext:o})};var _r=e=>t=>{let r=e().toISOString();oe(t,{timestamp:r})};var gu="https://ns.adobe.com/experience/alloy";var Or="2.30.0";var hu=e=>{oe(e,{implementationDetails:{name:gu,version:Or,environment:"browser"}})};var yu=(e,t,r,o)=>{let i=e.context.flatMap((s,a)=>r[s]?[r[s]]:(t.warn(`Invalid context[${a}]: '${s}' is not available.`),[])).concat(o);return{namespace:"Context",lifecycle:{onBeforeEvent({event:s}){let a={};return Promise.all(i.map(c=>Promise.resolve(c(a,t)))).then(()=>s.mergeXdm(a))}}}};var As=[["architecture","string"],["bitness","string"],["model","string"],["platformVersion","string"],["wow64","boolean"]];var vI=e=>"userAgentData"in e,Iu=e=>vI(e)?(t,r)=>{try{return e.userAgentData.getHighEntropyValues(As.map(o=>o[0])).then(o=>{let n={};As.forEach(([i,s])=>{Object.prototype.hasOwnProperty.call(o,i)&&typeof o[i]===s&&(n[i]=o[i])}),oe(t,{environment:{browserDetails:{userAgentClientHints:n}}})})}catch(o){return r.warn(`Unable to collect user-agent client hints. ${o.message}`),z}}:z;var AI=mu(window),bI=pu(window),CI=fu(window),wI=Eu(()=>new Date),_I=_r(()=>new Date),OI=Iu(navigator),Su={web:AI,device:bI,environment:CI,placeContext:wI},xI={highEntropyUserAgentHints:OI},RI={...Su,...xI},NI=[_I,hu],bs=({config:e,logger:t})=>yu(e,t,RI,NI);bs.namespace="Context";bs.configValidators=w({context:ne(R()).default(Object.keys(Su))});var Tu=bs;var vu=({options:e})=>w({type:R(),xdm:w({eventType:R(),identityMap:io}),data:w({}),documentUnloading:X(),renderDecisions:X(),decisionScopes:ne(R()).uniqueItems(),personalization:w({decisionScopes:ne(R()).uniqueItems(),surfaces:ne(R()).uniqueItems(),sendDisplayEvent:X().default(!0),includeRenderedPropositions:X().default(!1),defaultPersonalizationEnabled:X(),decisionContext:w({})}).default({sendDisplayEvent:!0}),datasetId:R(),mergeId:R(),edgeConfigOverrides:De,advertising:w({handleAdvertisingData:st(Es,ao,En).default(Es)})}).required().noUnknownFields()(e);var Au=({options:e})=>w({renderDecisions:X(),responseHeaders:mn(R().required()),responseBody:w({handle:ne(w({type:R().required(),payload:ze().required()})).required()}).required(),personalization:w({sendDisplayEvent:X().default(!0),decisionContext:w({})}).default({sendDisplayEvent:!0})}).noUnknownFields()(e);var bu=({eventManager:e,logger:t})=>({commands:{sendEvent:{documentationUri:"https://adobe.ly/3GQ3Q7t",optionsValidator:r=>vu({options:r}),run:r=>{let{xdm:o,data:n,documentUnloading:i,type:s,mergeId:a,datasetId:c,edgeConfigOverrides:d,...l}=r,u=e.createEvent();return i&&u.documentMayUnload(),u.setUserXdm(o),u.setUserData(n),s&&u.mergeXdm({eventType:s}),a&&u.mergeXdm({eventMergeId:a}),d&&(l.edgeConfigOverrides=d),c&&(t.warn("The 'datasetId' option has been deprecated. Please use 'edgeConfigOverrides.com_adobe_experience_platform.datasets.event.datasetId' instead."),l.edgeConfigOverrides=d||{},oe(l.edgeConfigOverrides,{com_adobe_experience_platform:{datasets:{event:{datasetId:c}}}})),e.sendEvent(u,l)}},applyResponse:{documentationUri:"",optionsValidator:r=>Au({options:r}),run:r=>{let{renderDecisions:o=!1,decisionContext:n={},responseHeaders:i={},responseBody:s={handle:[]},personalization:a}=r,c=e.createEvent();return e.applyResponse(c,{renderDecisions:o,decisionContext:n,responseHeaders:i,responseBody:s,personalization:a})}}}});bu.namespace="DataCollector";var Cu=bu;var wu=(e,t)=>`ID sync ${t?"succeeded":"failed"}: ${e.spec.url}`,_u=({fireReferrerHideableImage:e,logger:t})=>r=>{let o=r.filter(n=>n.type==="url");return o.length?Promise.all(o.map(n=>e(n.spec).then(()=>{t.info(wu(n,!0))}).catch(()=>{t.error(wu(n,!1))}))).then(z):Promise.resolve()};var DI=w({thirdPartyCookiesEnabled:X().default(!0),idMigrationEnabled:X().default(!0)}),Ou=DI;var xu=w({url:R().required().nonEmpty(),edgeConfigOverrides:De}).required().noUnknownFields();var fe="ECID";var Ru=({addEcidQueryToPayload:e,addQueryStringIdentityToPayload:t,ensureSingleIdentity:r,setLegacyEcid:o,handleResponseForIdSyncs:n,getNamespacesFromResponse:i,getIdentity:s,consent:a,appendIdentityToUrl:c,logger:d,identity:l,getIdentityOptionsValidator:u})=>{let m,p={};return{lifecycle:{onBeforeRequest({request:f,onResponse:y,onRequestFailure:v}){return e(f.getPayload()),t(f.getPayload()),r({request:f,onResponse:y,onRequestFailure:v})},onResponse({response:f}){let y=i(f);return(!m||!m[fe])&&y&&y[fe]&&o(y[fe]),y&&Object.keys(y).length>0&&(m={...m,...y}),p={...p,...f.getEdge()},l.setIdentityAcquired(),n(f)}},commands:{getIdentity:{optionsValidator:u,run:f=>{let{namespaces:y}=f;return a.awaitConsent().then(()=>{if(m)return;let v=l.getEcidFromCookie();if(!(v&&y.includes(fe)&&(m||(m={}),m[fe]=v,y.length===1)))return s(f)}).then(()=>({identity:y.reduce((v,A)=>(v[A]=m[A]||null,v),{}),edge:p}))}},appendIdentityToUrl:{optionsValidator:xu,run:f=>a.withConsent().then(()=>{if(m)return;let y=l.getEcidFromCookie();if(y){m||(m={}),m[fe]=y;return}return s(f)}).then(()=>({url:c(m[fe],f.url)})).catch(y=>(d.warn(`Unable to append identity to url. ${y.message}`),f))}}}};var Nu=({config:e,getEcidFromVisitor:t,apexDomain:r,isPageSsl:o,cookieJar:n})=>{let{idMigrationEnabled:i,orgId:s}=e,a=`AMCV_${s}`,c=()=>{let d=null,u=n.get("s_ecid")||n.get(a);if(u){let m=/(^|\|)MCMID\|(\d+)($|\|)/,p=u.match(m);p&&(d=p[2])}return d};return{getEcid(){if(i){let d=c();return d?Promise.resolve(d):t()}return Promise.resolve()},setEcid(d){if(i&&c()!==d){let l=o?{sameSite:"none",secure:!0}:{};n.set(a,`MCMID|${d}`,{domain:r,expires:390,...l})}}}};var Du=({logger:e})=>new Promise((t,r)=>{if(ee(window.adobe)&&ee(window.adobe.optIn)){let o=window.adobe.optIn;e.info("Delaying request while waiting for legacy opt-in to let Visitor retrieve ECID from server."),o.fetchPermissions(()=>{o.isApproved([o.Categories.ECID])?(e.info("Received legacy opt-in approval to let Visitor retrieve ECID from server."),t()):r(new Error("Legacy opt-in was declined."))},!0)}else t()});var Pu=e=>{let t=e.Visitor;return Ne(t)&&Ne(t.getInstance)&&t};var ku=({logger:e,orgId:t,awaitVisitorOptIn:r})=>()=>{let o=Pu(window);return o?r({logger:e}).then(()=>(e.info("Delaying request while using Visitor to retrieve ECID from server."),new Promise(n=>{o.getInstance(t,{}).getMarketingCloudVisitorID(s=>{e.info("Resuming previously delayed request that was waiting for ECID from Visitor."),n(s)},!0)}))).catch(n=>{n?e.info(`${n.message}, retrieving ECID from experience edge`):e.info("An error occurred while obtaining the ECID from Visitor.")}):Promise.resolve()};var Mu=({processIdSyncs:e})=>t=>e(t.getPayloadsByType("identity:exchange"));var Lu=({doesIdentityCookieExist:e,setDomainForInitialIdentityPayload:t,addLegacyEcidToPayload:r,awaitIdentityCookie:o,logger:n})=>{let i,s=a=>(t(a),r(a.getPayload()));return({request:a,onResponse:c,onRequestFailure:d})=>{if(e())return a.setIsIdentityEstablished(),Promise.resolve();if(i){n.info("Delaying request while retrieving ECID from server.");let l=i;return i=l.catch(()=>o({onResponse:c,onRequestFailure:d})),i.catch(()=>{}),l.then(()=>{n.info("Resuming previously delayed request."),a.setIsIdentityEstablished()}).catch(()=>s(a))}return i=o({onResponse:c,onRequestFailure:d}),i.catch(()=>{}),s(a)}};var xr="CORE";var Vu=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>{let r={identity:{fetch:[fe]}};return e&&t()&&r.identity.fetch.push(xr),o=>{o.mergeQuery(r)}};var Uu=({thirdPartyCookiesEnabled:e,areThirdPartyCookiesSupportedByDefault:t})=>r=>{e&&t()&&r.setUseIdThirdPartyDomain()};var ju=({getLegacyEcid:e,addEcidToPayload:t})=>r=>r.hasIdentity(fe)?Promise.resolve():e().then(o=>{o&&t(r,o)});var Bu="adobe_mc";var fo=e=>{try{return decodeURIComponent(e)}catch{return""}};var PI=300,Fu=({locationSearch:e,dateProvider:t,orgId:r,logger:o})=>n=>{if(n.hasIdentity(fe))return;let s=Ye.parse(e)[Bu];if(s===void 0)return;Array.isArray(s)&&(o.warn("Found multiple adobe_mc query string paramters, only using the last one."),s=s[s.length-1]);let a=s.split("|").reduce((u,m)=>{let[p,f]=m.split("=");return u[p]=fo(f),u[p]=u[p].replace(/[^a-zA-Z0-9@.]/g,""),u},{}),c=parseInt(a.TS,10),d=a.MCMID,l=fo(a.MCORGID);t().getTime()/1e3<=c+PI&&l===r&&d?(o.info(`Found valid ECID identity ${d} from the adobe_mc query string parameter.`),n.addIdentity(fe,{id:d})):o.info("Detected invalid or expired adobe_mc query string parameter.")};var $u=(e,t)=>{e.addIdentity(fe,{id:t})};var Hu=({doesIdentityCookieExist:e,orgId:t,logger:r})=>({onResponse:o,onRequestFailure:n})=>new Promise((i,s)=>{o(()=>{e()?i():(r.warn(`Identity cookie not found. This could be caused by any of the following issues:
	* The org ID ${t} configured in Alloy doesn't match the org ID specified in the edge configuration.
	* Experience edge was not able to set the identity cookie due to domain or cookie restrictions.
	* The request was canceled by the browser and not fully processed.`),s(new Error("Identity cookie not found.")))}),n(()=>{e()?i():s(new Error("Identity cookie not found."))})});var qu=e=>e.getPayloadsByType("identity:result").reduce((r,o)=>(o.namespace&&o.namespace.code&&(r[o.namespace.code]=o.id),r),{});var Gu=({sendEdgeNetworkRequest:e,createIdentityRequestPayload:t,createIdentityRequest:r,globalConfigOverrides:o})=>({namespaces:n,edgeConfigOverrides:i}={})=>{let s=nr({payload:t(n),globalConfigOverrides:o,localConfigOverrides:i}),a=r(s);return e({request:a})};var Wu=({payload:e,datastreamIdOverride:t})=>at({payload:e,datastreamIdOverride:t,getAction(){return"identity/acquire"},getUseSendBeacon(){return!1}});var Yu=e=>{let t={query:{identity:{fetch:e}}};return or({content:t,addIdentity:uo(t),hasIdentity:po(t)})};var kI=/^([^?#]*)(\??[^#]*)(#?.*)$/,MI=e=>e===""?"?":e==="?"?"":"&",zu=({dateProvider:e,orgId:t})=>(r,o)=>{let n=Math.round(e().getTime()/1e3),i=encodeURIComponent(`TS=${n}|MCMID=${r}|MCORGID=${encodeURIComponent(t)}`),[,s,a,c]=o.match(kI),d=MI(a);return`${s}${a}${d}adobe_mc=${i}${c}`};var LI=w({namespaces:ne(st(fe,xr)).nonEmpty().uniqueItems().default([fe]),edgeConfigOverrides:De}).noUnknownFields().default({namespaces:[fe]}),Ku=({thirdPartyCookiesEnabled:e})=>t=>{let r=LI(t);if(!e&&r.namespaces.includes(xr))throw new Error(`namespaces: The ${xr} namespace cannot be requested when third-party cookies are disabled.`);return r};var Cs=({config:e,logger:t,consent:r,fireReferrerHideableImage:o,sendEdgeNetworkRequest:n,apexDomain:i,getBrowser:s,identity:a})=>{let{orgId:c,thirdPartyCookiesEnabled:d,edgeConfigOverrides:l}=e,u=ku({logger:t,orgId:c,awaitVisitorOptIn:Du}),m=vt({logger:t,cookieJar:_e}),p=Nu({config:e,getEcidFromVisitor:u,apexDomain:i,cookieJar:m,isPageSsl:window.location.protocol==="https:"}),f=Qr({orgId:c}),y=Gu({sendEdgeNetworkRequest:n,createIdentityRequestPayload:Yu,createIdentityRequest:Wu,globalConfigOverrides:l}),v=Jr({getBrowser:s}),A=Uu({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:v}),b=ju({getLegacyEcid:p.getEcid,addEcidToPayload:$u}),N=Fu({locationSearch:window.document.location.search,dateProvider:()=>new Date,orgId:c,logger:t}),k=Hu({doesIdentityCookieExist:f,orgId:c,logger:t}),J=Lu({doesIdentityCookieExist:f,setDomainForInitialIdentityPayload:A,addLegacyEcidToPayload:b,awaitIdentityCookie:k,logger:t}),Y=_u({fireReferrerHideableImage:o,logger:t}),F=Mu({processIdSyncs:Y}),te=zu({dateProvider:()=>new Date,orgId:c,globalConfigOverrides:l}),de=Ku({thirdPartyCookiesEnabled:d}),ie=Vu({thirdPartyCookiesEnabled:d,areThirdPartyCookiesSupportedByDefault:v});return Ru({addEcidQueryToPayload:ie,addQueryStringIdentityToPayload:N,ensureSingleIdentity:J,setLegacyEcid:p.setEcid,handleResponseForIdSyncs:F,getNamespacesFromResponse:qu,getIdentity:y,consent:r,identity:a,appendIdentityToUrl:te,logger:t,config:e,getIdentityOptionsValidator:de})};Cs.namespace="Identity";Cs.configValidators=Ou;var Xu=Cs;var VI=({config:e,componentRegistry:t})=>{let r=[...t.getCommandNames(),lo,wr].sort(),o={...e};Object.keys(e).forEach(i=>{let s=e[i];typeof s=="function"&&(o[i]=s.toString())});let n=t.getComponentNames();return{version:Or,configs:o,commands:r,components:n}},Ju=({config:e,componentRegistry:t})=>({commands:{getLibraryInfo:{run:()=>({libraryInfo:VI({config:e,componentRegistry:t})})}}});Ju.namespace="LibraryInfo";var Qu=Ju;var em=tr(window),{console:KL,fetch:UI,navigator:_s}=window,jI=Yd(),Zu=Xi(window,_e),Os=zd({fetch:UI}),BI=Yi(),FI=Ss({window,createNamespacedStorage:em}),$I=es({userAgent:window.navigator.userAgent}),tm=({instanceName:e,logController:{setDebugEnabled:t,logger:r,createComponentLogger:o},components:n})=>{let i=_d(),s=Cd(i),a=n.concat(Object.values(ws)),c=p=>{t(p.enabled,{fromConfig:!1})},d=vt({logger:r,cookieJar:_e}),l=p=>{let f=Fd({options:p,componentCreators:a,coreConfigValidators:jI,createConfig:Hd,logger:r,setDebugEnabled:t}),{orgId:y,targetMigrationEnabled:v}=f,A=ou({orgId:y,targetMigrationEnabled:v}),b=Zd({cookieJar:d,shouldTransferCookie:A,apexDomain:Zu,dateProvider:()=>new Date}),N=Ne(_s.sendBeacon)?Kd({sendBeacon:_s.sendBeacon.bind(_s),sendFetchRequest:Os,logger:r}):Os,k=Od({logger:r,sendFetchRequest:Os,sendBeaconRequest:N,isRequestRetryable:lu,getRequestRetryDelay:du}),J=au({logger:r}),Y=xd({logger:r}),F=Ud({extractEdgeInfo:Y}),te=cu({orgId:y,cookieJar:_e}),de=su({config:f,lifecycle:s,cookieTransfer:b,sendNetworkRequest:k,createResponse:F,processWarningsAndErrors:J,getLocationHint:te,getAssuranceValidationTokenParams:FI}),ie=uu({lifecycle:s,cookieTransfer:b,createResponse:F,processWarningsAndErrors:J}),ke=Dd({logger:r}),Me=Pd({generalConsentState:ke,logger:r}),be=Nd({config:f,logger:r,loggingCookieJar:d});be.initialize();let Oe=Qd({config:f,logger:r,lifecycle:s,consent:Me,createEvent:Md,createDataCollectionRequestPayload:Ct,createDataCollectionRequest:mo,sendEdgeNetworkRequest:de,applyResponse:ie});return $d({componentCreators:a,lifecycle:s,componentRegistry:i,getImmediatelyAvailableTools(ve){let x=o(ve);return{config:f,componentRegistry:i,consent:Me,identity:be,eventManager:Oe,fireReferrerHideableImage:BI,logger:x,lifecycle:s,sendEdgeNetworkRequest:de,handleError:ys({errorPrefix:`[${e}] [${ve}]`,logger:x}),createNamespacedStorage:em,apexDomain:Zu,getBrowser:$I}}})},u=ys({errorPrefix:`[${e}]`,logger:r});return jd({logger:r,configureCommand:l,setDebugCommand:c,handleError:u,validateCommandOptions:Bd})};var ka={};ja(ka,{activityCollector:()=>xm,advertising:()=>OE,audiences:()=>Pm,consent:()=>qm,eventMerge:()=>zm,mediaAnalyticsBridge:()=>ap,personalization:()=>Sf,pushNotifications:()=>VE,rulesEngine:()=>Qf,streamingMedia:()=>oE});var HI=({eventManager:e,lifecycle:t,handleError:r})=>o=>{if(o.s_fe)return Promise.resolve();let n="composedPath"in o&&o.composedPath().length>0?o.composedPath()[0]:o.target,i=e.createEvent();return i.documentMayUnload(),t.onClick({event:i,clickedElement:n}).then(()=>i.isEmpty()?Promise.resolve():e.sendEvent(i)).then(z).catch(s=>{r(s,"click collection")})},rm=({eventManager:e,lifecycle:t,handleError:r})=>{let o=HI({eventManager:e,lifecycle:t,handleError:r});document.addEventListener("click",o,!0)};var xs="\\.(exe|zip|wav|mp3|mov|mpg|avi|wmv|pdf|doc|docx|xls|xlsx|ppt|pptx)$",qI=R().regexp().default(xs),GI=w({clickCollectionEnabled:X().default(!0),clickCollection:w({internalLinkEnabled:X().default(!0),externalLinkEnabled:X().default(!0),downloadLinkEnabled:X().default(!0),sessionStorageEnabled:X().default(!1),eventGroupingEnabled:X().default(!1),filterClickProperties:it()}).default({internalLinkEnabled:!0,externalLinkEnabled:!0,downloadLinkEnabled:!0,sessionStorageEnabled:!1,eventGroupingEnabled:!1}),downloadLinkQualifier:qI,onBeforeLinkClickSend:it().deprecated('The field "onBeforeLinkClickSend" has been deprecated. Use "clickCollection.filterClickDetails" instead.')});var om=GI;var WI="cppXYctnr",Sn=(e=document)=>e.getElementById(WI)!==null;var Rs=e=>{let t=e;return/^https?:\/\//i.test(t)||(t=`${window.location.protocol}//${e}`),new URL(t).hostname};var nm=(e,t)=>{let r=Rs(e),o=Rs(t);return r!==o};var YI=(e,t)=>t&&(t==="download"&&!e.downloadLinkEnabled||t==="exit"&&!e.externalLinkEnabled||t==="other"&&!e.internalLinkEnabled),im=({config:e,logger:t,getClickedElementProperties:r,clickActivityStorage:o})=>{let{clickCollectionEnabled:n,clickCollection:i}=e;return n?({event:s,clickedElement:a})=>{let c=r({clickActivityStorage:o,clickedElement:a,config:e,logger:t}),d=c.linkType;Sn()||(c.isValidLink()&&YI(i,d)?t.info(`Cancelling link click event due to clickCollection.${d}LinkEnabled = false.`):c.isInternalLink()&&i.eventGroupingEnabled&&(!e.onBeforeLinkClickSend||i.filterClickDetails)&&!nm(window.location.hostname,c.linkUrl)?o.save(c.properties):c.isValidLink()?(s.mergeXdm(c.xdm),s.mergeData(c.data),o.save({pageName:c.pageName,pageIDType:c.pageIDType})):c.isValidActivityMapData()&&o.save(c.properties))}:()=>{}};var zI=e=>({eventType:"web.webinteraction.linkClicks",web:{webInteraction:{name:e.linkName,region:e.linkRegion,type:e.linkType,URL:e.linkUrl,linkClicks:{value:1}}}}),KI=e=>({__adobe:{analytics:{contextData:{a:{activitymap:{page:e.pageName,link:e.linkName,region:e.linkRegion,pageIDType:e.pageIDType}}}}}}),XI=(e,t)=>{let{xdm:r,data:o,clickedElement:n}=e;if(t.clickedElement=n,r&&r.web&&r.web.webInteraction){let{name:i,region:s,type:a,URL:c}=r.web.webInteraction;t.linkName=i,t.linkRegion=s,t.linkType=a,t.linkUrl=c}if(o&&o.__adobe&&o.__adobe.analytics){let{contextData:i}=o.__adobe.analytics;if(i&&i.a&&i.a.activitymap){let{page:s,link:a,region:c,pageIDType:d}=i.a.activitymap;t.pageName=s||t.pageName,t.linkName=a||t.linkName,t.linkRegion=c||t.linkRegion,d!==void 0&&(t.pageIDType=d)}}},Tn=({properties:e,logger:t}={})=>{let r=e||{};return{get pageName(){return r.pageName},set pageName(n){r.pageName=n},get linkName(){return r.linkName},set linkName(n){r.linkName=n},get linkRegion(){return r.linkRegion},set linkRegion(n){r.linkRegion=n},get linkType(){return r.linkType},set linkType(n){r.linkType=n},get linkUrl(){return r.linkUrl},set linkUrl(n){r.linkUrl=n},get pageIDType(){return r.pageIDType},set pageIDType(n){r.pageIDType=n},get clickedElement(){return r.clickedElement},set clickedElement(n){r.clickedElement=n},get properties(){return{pageName:r.pageName,linkName:r.linkName,linkRegion:r.linkRegion,linkType:r.linkType,linkUrl:r.linkUrl,pageIDType:r.pageIDType}},isValidLink(){return!!r.linkUrl&&!!r.linkType&&!!r.linkName&&!!r.linkRegion},isInternalLink(){return this.isValidLink()&&r.linkType==="other"},isValidActivityMapData(){return!!r.pageName&&!!r.linkName&&!!r.linkRegion&&r.pageIDType!==void 0},get xdm(){return r.filteredXdm?r.filteredXdm:zI(this)},get data(){return r.filteredData?r.filteredData:KI(this)},applyPropertyFilter(n){n&&n(r)===!1&&(t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),r={})},applyOptionsFilter(n){let i=this.options;if(i&&i.clickedElement&&(i.xdm||i.data)){if(n&&n(i)===!1){t&&t.info(`Clicked element properties were rejected by filter function: ${JSON.stringify(this.properties,null,2)}`),this.options=void 0;return}this.options=i,r.filteredXdm=i.xdm,r.filteredData=i.data}},get options(){let n={};if(this.isValidLink()&&(n.xdm=this.xdm),this.isValidActivityMapData()&&(n.data=this.data),this.clickedElement&&(n.clickedElement=this.clickedElement),!(!n.xdm&&!n.data))return n},set options(n){r={},n&&XI(n,r)}}};var sm=({clickActivityStorage:e})=>t=>{if(Sn())return;let r=e.load(),o=Tn({properties:r});if(o.isValidLink()||o.isValidActivityMapData()){if(o.isValidLink()){let n=o.xdm;delete n.eventType,t.mergeXdm(n)}o.isValidActivityMapData()&&t.mergeData(o.data),e.save({pageName:o.pageName,pageIDType:o.pageIDType})}};var am=({window:e,getLinkName:t,getLinkRegion:r,getAbsoluteUrlFromAnchorElement:o,findClickableElement:n,determineLinkType:i})=>({clickedElement:s,config:a,logger:c,clickActivityStorage:d})=>{let{onBeforeLinkClickSend:l,clickCollection:u}=a,{filterClickDetails:m}=u,p=Tn({logger:c});if(s){let f=n(s);if(f){p.clickedElement=s,p.linkUrl=o(e,f),p.linkType=i(e,a,p.linkUrl,f),p.linkRegion=r(f),p.linkName=t(f),p.pageIDType=0,p.pageName=e.location.href;let y=d.load();y&&y.pageName&&(p.pageName=y.pageName,p.pageIDType=1),m?p.applyPropertyFilter(m):l&&p.applyOptionsFilter(l)}}return p};var vn="clickData";var cm=({storage:e})=>({save:t=>{let r=JSON.stringify(t);e.setItem(vn,r)},load:()=>{let t=null,r=e.getItem(vn);return r&&(t=JSON.parse(r)),t},remove:()=>{e.removeItem(vn)}});var lm=({clickActivityStorage:e})=>t=>{e.save({pageName:t.getContent().xdm.web.webPageDetails.name,pageIDType:1})};var dm=(e,t)=>{let{clickCollectionEnabled:r,onBeforeLinkClickSend:o,downloadLinkQualifier:n}=e;r===!1&&(o&&t.warn("The 'onBeforeLinkClickSend' configuration was provided but will be ignored because clickCollectionEnabled is false."),n&&n!==xs&&t.warn("The 'downloadLinkQualifier' configuration was provided but will be ignored because clickCollectionEnabled is false."))};var wt=e=>e&&e.replace(/\s+/g," ").trim();var JI=/^(SCRIPT|STYLE|LINK|CANVAS|NOSCRIPT|#COMMENT)$/i,um=e=>!(e&&e.nodeName&&e.nodeName.match(JI));var pm=e=>{let t=[],r=!1;return um(e)?(t.push(e),e.childNodes&&Array.prototype.slice.call(e.childNodes).forEach(n=>{let i=pm(n);t=t.concat(i.supportedNodes),r=r||i.includesUnsupportedNodes})):r=!0,{supportedNodes:t,includesUnsupportedNodes:r}},mm=(e,t,r)=>{let o;return(!r||r===e.nodeName.toUpperCase())&&(o=e.getAttribute(t)),o},QI=e=>{let t={texts:[]};return e.supportedNodes.forEach(r=>{r.getAttribute&&(t.alt||(t.alt=wt(r.getAttribute("alt"))),t.title||(t.title=wt(r.getAttribute("title"))),t.inputValue||(t.inputValue=wt(mm(r,"value","INPUT"))),t.imgSrc||(t.imgSrc=wt(mm(r,"src","IMG")))),r.nodeValue&&t.texts.push(r.nodeValue)}),t},fm=e=>{let t=wt(e.innerText||e.textContent),r=pm(e);if(!t||r.includesUnsupportedNodes){let o=QI(r);t=wt(o.texts.join("")),t||(t=o.alt||o.title||o.inputValue||o.imgSrc)}return t||""};var ZI=/^(HEADER|MAIN|FOOTER|NAV)$/i,eS=e=>{let t;return e.role==="region"&&he(e["aria-label"])&&(t=e["aria-label"]),t},tS=e=>{let t;return e&&e.nodeName&&e.nodeName.match(ZI)&&(t=e.nodeName),t},Em=e=>{let t=e.parentNode,r;for(;t;){if(r=wt(t.id||eS(t)||tS(t)),r)return r;t=t.parentNode}return"BODY"};var gm=(e,t)=>{let r=e.location.href,o=t.href||"";typeof o!="string"&&(o="");try{return new URL(o,r).href}catch{return r}};var hm=e=>!!(e.href&&(e.tagName==="A"||e.tagName==="AREA")&&(!e.onclick||!e.protocol||e.protocol.toLowerCase().indexOf("javascript")<0));var ym=e=>e?!!e.onclick:!1;var Im=e=>{if(e.tagName==="INPUT"){let t=e.getAttribute("type");if(t==="submit"||t==="image"&&e.src)return!0}return!1};var Sm=e=>e.tagName==="BUTTON"&&e.type==="submit";var Tm=e=>{let t=e;for(;t&&!(t.nodeName&&t.nodeName==="BODY");){if(hm(t)||ym(t)||Im(t)||Sm(t))return t;t=t.parentNode}return null};var An=e=>{let t=e.indexOf("?"),r=e.indexOf("#");return t>=0&&(t<r||r<0)?e.substring(0,t):r>=0?e.substring(0,r):e};var vm=(e,t,r)=>{let o=!1;if(t){if(r&&r.download)o=!0;else if(e){let n=new RegExp(e),i=An(t).toLowerCase();o=n.test(i)}}return o};var Am=(e,t)=>{let r=!1;if(t&&e.location.hostname){let o=e.location.hostname.toLowerCase();r=An(t).toLowerCase().indexOf(o)<0}return r};var bm=(e,t,r,o)=>{let n="other";return he(r)&&(vm(t.downloadLinkQualifier,r,o)?n="download":Am(e,r)&&(n="exit")),n};var Cm=e=>{let t=e.getContent();return t.xdm!==void 0&&t.xdm.web!==void 0&&t.xdm.web.webPageDetails!==void 0&&t.xdm.web.webPageDetails.name!==void 0};var wm=()=>{let e={};return{getItem:t=>e[t],setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}};var _m=am({window,getLinkName:fm,getLinkRegion:Em,getAbsoluteUrlFromAnchorElement:gm,findClickableElement:Tm,determineLinkType:bm}),_t,Om=e=>{if(!_t){let r=tr(window)(e.orgId||""),o=wm(),n=e.clickCollection.sessionStorageEnabled?r.session:o;_t=cm({storage:n})}},bn=({config:e,eventManager:t,handleError:r,logger:o})=>{dm(e,o);let n=e.clickCollection;_t||Om(e);let i=im({config:e,logger:o,clickActivityStorage:_t,getClickedElementProperties:_m}),s=sm({clickActivityStorage:_t}),a=lm({clickActivityStorage:_t});return{lifecycle:{onComponentsRegistered(c){let{lifecycle:d}=c;rm({eventManager:t,lifecycle:d,handleError:r})},onClick({event:c,clickedElement:d}){i({event:c,clickedElement:d})},onBeforeEvent({event:c}){Cm(c)&&(n.eventGroupingEnabled&&s(c),a(c,o,_t))}}}};bn.namespace="ActivityCollector";bn.configValidators=om;bn.buildOnInstanceConfiguredExtraParams=({config:e,logger:t})=>(_t||Om(e),{getLinkDetails:r=>_m({clickActivityStorage:_t,clickedElement:r,config:e,logger:t}).properties});var xm=bn;var rS=(e,t)=>`URL destination ${t?"succeeded":"failed"}: ${e.spec.url}`,Rm=({fireReferrerHideableImage:e,logger:t,cookieJar:r,isPageSsl:o})=>{let n=o?{sameSite:"none",secure:!0}:{},i=a=>{a.filter(d=>d.type==="cookie").forEach(d=>{let{name:l,value:u,domain:m,ttlDays:p}=d.spec;r.set(l,u||"",{domain:m||"",expires:p||10,...n})})},s=a=>{let c=a.filter(d=>d.type==="url");return Promise.all(c.map(d=>e(d.spec).then(()=>{t.info(rS(d,!0))}).catch(()=>{}))).then(z)};return a=>(i(a),s(a))};var Nm=({processDestinations:e})=>{let t=({response:o})=>{let n=o.getPayloadsByType("activation:push");return e(n)},r=({response:o})=>({destinations:o.getPayloadsByType("activation:pull")});return({response:o})=>t({response:o}).then(()=>r({response:o}))};var Dm=({logger:e,fireReferrerHideableImage:t})=>{let r=_e.withConverter({write:s=>encodeURIComponent(s)}),o=vt({logger:e,cookieJar:r}),n=Rm({fireReferrerHideableImage:t,logger:e,cookieJar:o,isPageSsl:window.location.protocol==="https:"});return{lifecycle:{onResponse:Nm({processDestinations:n})},commands:{}}};Dm.namespace="Audiences";var Pm=Dm;var km=({storedConsent:e,taskQueue:t,defaultConsent:r,consent:o,sendSetConsentRequest:n,validateSetConsentOptions:i,consentHashStore:s,doesIdentityCookieExist:a})=>{let c={[Bt]:r},d=e.read(),l=a(),u=d[Bt]!==void 0;(!l||!u)&&s.clear(),l||(e.clear(),d={}),o.initializeConsent(c,d);let m=()=>{if(t.length===0){let p=e.read();p[Bt]!==void 0&&o.setConsent(p)}};return{commands:{setConsent:{optionsValidator:i,run:({consent:p,identityMap:f,edgeConfigOverrides:y})=>{o.suspend();let v=s.lookup(p);return t.addTask(()=>v.isNew()?n({consentOptions:p,identityMap:f,edgeConfigOverrides:y}):Promise.resolve()).then(()=>v.save()).finally(m)}}},lifecycle:{onResponse:m,onRequestFailure:m}}};var Mm=e=>Xr(JSON.stringify(to(e)));var Ns=({standard:e,version:t})=>`${e}.${t}`,Lm=({storage:e})=>({clear(){e.clear()},lookup(t){let r={},o=n=>{let i=Ns(n),{standard:s,version:a,...c}=n;return r[i]||(r[i]=Mm(c).toString()),r[i]};return{isNew(){return t.some(n=>{let i=Ns(n),s=e.getItem(i);return s===null||s!==o(n)})},save(){t.forEach(n=>{let i=Ns(n);e.setItem(i,o(n))})}}}});var Vm=()=>{let e={};return{...or({content:e,addIdentity:(o,n)=>{e.identityMap=e.identityMap||{},e.identityMap[o]=e.identityMap[o]||[],e.identityMap[o].push(n)},hasIdentity:o=>(e.identityMap&&e.identityMap[o])!==void 0}),setConsent:o=>{e.consent=o}}};var Um=({payload:e,datastreamIdOverride:t})=>at({payload:e,datastreamIdOverride:t,getAction(){return"privacy/set-consent"},getUseSendBeacon(){return!1}});var jm=({parseConsentCookie:e,orgId:t,cookieJar:r})=>{let o=ot(t,Bl);return{read(){let n=r.get(o);return n?e(n):{}},clear(){r.remove(o)}}};var Bm=({createConsentRequestPayload:e,createConsentRequest:t,sendEdgeNetworkRequest:r,edgeConfigOverrides:o})=>({consentOptions:n,identityMap:i,edgeConfigOverrides:s})=>{let a=nr({payload:e(),globalConfigOverrides:o,localConfigOverrides:s});a.payload.setConsent(n),ee(i)&&Object.keys(i).forEach(d=>{i[d].forEach(l=>{a.payload.addIdentity(d,l)})});let c=t(a);return r({request:c}).then(()=>{})};var Fm=e=>e.split(";").reduce((r,o)=>{let[n,i]=o.split("=");return r[n]=i,r},{});var $m=w({consent:ne(ze()).required().nonEmpty(),identityMap:io,edgeConfigOverrides:De}).noUnknownFields().required();var Hm=w({defaultConsent:st(so,Cr,fn).default(so)});var Ds=({config:e,consent:t,sendEdgeNetworkRequest:r,createNamespacedStorage:o})=>{let{orgId:n,defaultConsent:i}=e,s=jm({parseConsentCookie:Fm,orgId:n,cookieJar:_e}),a=ji(),c=Bm({createConsentRequestPayload:Vm,createConsentRequest:Um,sendEdgeNetworkRequest:r,edgeConfigOverrides:e.edgeConfigOverrides}),d=o(`${rt(n)}.consentHashes.`),l=Lm({storage:d.persistent}),u=Qr({orgId:n});return km({storedConsent:s,taskQueue:a,defaultConsent:i,consent:t,sendSetConsentRequest:c,validateSetConsentOptions:$m,consentHashStore:l,doesIdentityCookieExist:u})};Ds.namespace="Consent";Ds.configValidators=Hm;var qm=Ds;var Gm=()=>({eventMergeId:bt()});var Wm=({createEventMergeId:e})=>({commands:{createEventMergeId:{run:e}}});var Ym=()=>Wm({createEventMergeId:Gm});Ym.namespace="EventMerge";var zm=Ym;var ce={PAUSE:"media.pauseStart",PLAY:"media.play",BUFFER_START:"media.bufferStart",AD_START:"media.adStart",Ad_BREAK_START:"media.adBreakStart",SESSION_END:"media.sessionEnd",SESSION_START:"media.sessionStart",SESSION_COMPLETE:"media.sessionComplete",PING:"media.ping",AD_BREAK_COMPLETE:"media.adBreakComplete",AD_COMPLETE:"media.adComplete",AD_SKIP:"media.adSkip",BITRATE_CHANGE:"media.bitrateChange",CHAPTER_COMPLETE:"media.chapterComplete",CHAPTER_SKIP:"media.chapterSkip",CHAPTER_START:"media.chapterStart",ERROR:"media.error",STATES_UPDATE:"media.statesUpdate"};var Km=({mediaRequestPayload:e,action:t})=>at({payload:e,edgeSubPath:"/va",getAction(){return t},getUseSendBeacon(){return!1}});var Cn=({config:e,eventManager:t,consent:r,sendEdgeNetworkRequest:o,setTimestamp:n})=>({createMediaEvent({options:i}){let s=t.createEvent(),{xdm:a}=i;if(n(a),s.setUserXdm(a),a.eventType===ce.AD_START){let{advertisingDetails:c}=i.xdm.mediaCollection;s.mergeXdm({mediaCollection:{advertisingDetails:{playerName:c.playerName||e.streamingMedia.playerName}}})}return s},createMediaSession(i){let{playerName:s,channel:a,appVersion:c}=e.streamingMedia,d=t.createEvent(),{sessionDetails:l}=i.xdm.mediaCollection;return d.setUserXdm(i.xdm),d.mergeXdm({eventType:ce.SESSION_START,mediaCollection:{sessionDetails:{playerName:l.playerName||s,channel:l.channel||a,appVersion:l.appVersion||c}}}),d},augmentMediaEvent({event:i,playerId:s,getPlayerDetails:a,sessionID:c}){if(!s||!a)return i;let{playhead:d,qoeDataDetails:l}=a({playerId:s});return i.mergeXdm({mediaCollection:{playhead:Fe(d),qoeDataDetails:l,sessionID:c}}),i},trackMediaSession({event:i,mediaOptions:s,edgeConfigOverrides:a}){let c={mediaOptions:s,edgeConfigOverrides:a};return t.sendEvent(i,c)},trackMediaEvent({event:i,action:s}){let a=Ct(),c=Km({mediaRequestPayload:a,action:s});return a.addEvent(i),i.finalize(),r.awaitConsent().then(()=>o({request:c}).then(()=>({})))}});var Rr={MAIN:"main",AD:"ad",COMPLETED:"completed"};var wn=()=>{let e;return{getSession:i=>e[i]||{},storeSession:({playerId:i,sessionDetails:s})=>{e===void 0&&(e={}),e[i]=s},stopPing:({playerId:i})=>{let s=e[i];s&&(clearTimeout(s.pingId),s.pingId=null,s.playbackState=Rr.COMPLETED)},savePing:({playerId:i,pingId:s,playbackState:a})=>{e[i]&&(e[i].pingId&&clearTimeout(e[i].pingId),e[i].pingId=s,e[i].playbackState=a)}}};var oS=(e,t)=>e===ce.AD_START||e===ce.Ad_BREAK_START||e===ce.AD_SKIP||e===ce.AD_COMPLETE?"ad":e===ce.AD_BREAK_COMPLETE||e===ce.CHAPTER_COMPLETE||e===ce.CHAPTER_START||e===ce.CHAPTER_SKIP||e===ce.SESSION_START?"main":e===ce.SESSION_END||e===ce.SESSION_COMPLETE?"completed":t,_n=({mediaEventManager:e,mediaSessionCacheManager:t,config:r})=>{let o=n=>{let i=e.createMediaEvent({options:n}),{playerId:s,xdm:a}=n,{eventType:c}=a,d=c.split(".")[1],{getPlayerDetails:l,sessionPromise:u,playbackState:m}=t.getSession(s);return u.then(p=>p.sessionId?(e.augmentMediaEvent({event:i,eventType:c,playerId:s,getPlayerDetails:l,sessionID:p.sessionId}),e.trackMediaEvent({event:i,action:d}).then(()=>{if(s)if(c===ce.SESSION_COMPLETE||c===ce.SESSION_END)t.stopPing({playerId:s});else{let f=oS(c,m);if(f==="completed")return;let y=f==="ad"?r.streamingMedia.adPingInterval:r.streamingMedia.mainPingInterval,v=setTimeout(()=>{let A={playerId:s,xdm:{eventType:ce.PING}};o(A)},y*1e3);t.savePing({playerId:s,pingId:v,playbackState:f})}})):Promise.reject(new Error(`Failed to trigger media event: ${c}. Session ID is not available for playerId: ${s}.`)))};return n=>o(n)};var On=({config:e,mediaEventManager:t,mediaSessionCacheManager:r,legacy:o=!1})=>n=>{if(!e.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));let{playerId:i,getPlayerDetails:s,edgeConfigOverrides:a}=n,c=t.createMediaSession(n);t.augmentMediaEvent({event:c,playerId:i,getPlayerDetails:s});let d=t.trackMediaSession({event:c,mediaOptions:{playerId:i,getPlayerDetails:s,legacy:o},edgeConfigOverrides:a});return r.storeSession({playerId:i,sessionDetails:{sessionPromise:d,getPlayerDetails:s,playbackState:Rr.MAIN}}),d};var xn=e=>Be(e)?!e.trim():!0;var Rn=({mediaSessionCacheManager:e,config:t,trackMediaEvent:r})=>({response:o,playerId:n,getPlayerDetails:i})=>{let s=o.getPayloadsByType("media-analytics:new-session");if(q(s)){let{sessionId:a}=s[0];if(xn(a))return{};if(!n||!i)return{sessionId:a};let c=setTimeout(()=>{r({playerId:n,xdm:{eventType:ce.PING}})},t.streamingMedia.mainPingInterval*1e3);return e.savePing({playerId:n,pingId:c,playbackState:Rr.MAIN}),{sessionId:a}}return{}};var Xm={Video:"video",Audio:"audio"},Jm={VOD:"vod",Live:"live",Linear:"linear",Podcast:"podcast",Audiobook:"audiobook",AOD:"aod"},Qm={FullScreen:"fullScreen",ClosedCaption:"closedCaptioning",Mute:"mute",PictureInPicture:"pictureInPicture",InFocus:"inFocus"},ct={AdBreakStart:"adBreakStart",AdBreakComplete:"adBreakComplete",AdStart:"adStart",AdComplete:"adComplete",AdSkip:"adSkip",ChapterStart:"chapterStart",ChapterComplete:"chapterComplete",ChapterSkip:"chapterSkip",SeekStart:"seekStart",SeekComplete:"seekComplete",BufferStart:"bufferStart",BufferComplete:"bufferComplete",BitrateChange:"bitrateChange",StateStart:"stateStart",StateEnd:"stateEnd"},ht={SessionStart:"sessionStart",SessionEnd:"sessionEnd",SessionComplete:"sessionComplete",Play:"play",Pause:"pauseStart",Error:"error",StateUpdate:"statesUpdate"},Zm={MediaResumed:"media.resumed",GranularAdTracking:"media.granularadtracking"},ep={Show:"a.media.show",Season:"a.media.season",Episode:"a.media.episode",AssetId:"a.media.asset",Genre:"a.media.genre",FirstAirDate:"a.media.airDate",FirstDigitalDate:"a.media.digitalDate",Rating:"a.media.rating",Originator:"a.media.originator",Network:"a.media.network",ShowType:"a.media.type",AdLoad:"a.media.adLoad",MVPD:"a.media.pass.mvpd",Authorized:"a.media.pass.auth",DayPart:"a.media.dayPart",Feed:"a.media.feed",StreamFormat:"a.media.format"},tp={Artist:"a.media.artist",Album:"a.media.album",Label:"a.media.label",Author:"a.media.author",Station:"a.media.station",Publisher:"a.media.publisher"},rp={Advertiser:"a.media.ad.advertiser",CampaignId:"a.media.ad.campaign",CreativeId:"a.media.ad.creative",PlacementId:"a.media.ad.placement",SiteId:"a.media.ad.site",CreativeUrl:"a.media.ad.creativeURL"};var op=({trackMediaEvent:e,trackMediaSession:t,mediaResponseHandler:r,logger:o,createMediaHelper:n,createGetInstance:i,config:s})=>({lifecycle:{onBeforeEvent({mediaOptions:a,onResponse:c=z}){if(!a)return;let{legacy:d,playerId:l,getPlayerDetails:u}=a;d&&c(({response:m})=>r({playerId:l,getPlayerDetails:u,response:m}))}},commands:{getMediaAnalyticsTracker:{run:()=>{if(!s.streamingMedia)return Promise.reject(new Error("Streaming media is not configured."));o.info("Streaming media is configured in legacy mode.");let a=n({logger:o});return Promise.resolve({getInstance:()=>i({logger:o,trackMediaEvent:e,trackMediaSession:t,uuid:bt}),Event:ct,MediaType:Xm,PlayerState:Qm,StreamType:Jm,MediaObjectKey:Zm,VideoMetadataKeys:ep,AudioMetadataKeys:tp,AdMetadataKeys:rp,...a})}}}});var np=({logger:e})=>({createMediaObject:(a,c,d,l,u)=>{let m={friendlyName:a,name:c,length:d,streamType:u,contentType:l},p=w({friendlyName:R().nonEmpty(),name:R().nonEmpty(),length:Ee().required(),streamType:R().nonEmpty(),contentType:R().nonEmpty()});try{let f=p(m);return{sessionDetails:{name:f.name,friendlyName:f.friendlyName,length:Math.round(f.length),streamType:f.streamType,contentType:f.contentType}}}catch(f){return e.warn("An error occurred while creating the Media Object.",f),{}}},createAdBreakObject:(a,c,d)=>{let l={friendlyName:a,offset:c,index:d},u=w({friendlyName:R().nonEmpty(),offset:Ee(),index:Ee()});try{let m=u(l);return{advertisingPodDetails:{friendlyName:m.friendlyName,offset:m.offset,index:m.index}}}catch(m){return e.warn("An error occurred while creating the Ad Break Object.",m),{}}},createAdObject:(a,c,d,l)=>{let u={friendlyName:a,name:c,podPosition:d,length:l},m=w({friendlyName:R().nonEmpty(),name:R().nonEmpty(),podPosition:Ee(),length:Ee()});try{let p=m(u);return{advertisingDetails:{friendlyName:p.friendlyName,name:p.name,podPosition:p.podPosition,length:p.length}}}catch(p){return e.warn("An error occurred while creating the Advertising Object.",p),{}}},createChapterObject:(a,c,d,l)=>{let u={friendlyName:a,offset:c,length:d,index:l},m=w({friendlyName:R().nonEmpty(),offset:Ee(),length:Ee(),index:Ee()});try{let p=m(u);return{chapterDetails:{friendlyName:p.friendlyName,offset:p.offset,index:p.index,length:p.length}}}catch(p){return e.warn("An error occurred while creating the Chapter Object.",p),{}}},createStateObject:a=>{let c=/^[a-zA-Z0-9_]{1,64}$/,d=R().matches(c,"This is not a valid state name.");try{return{name:d(a)}}catch(l){return e.warn("An error occurred while creating the State Object.",l),{}}},createQoEObject:(a,c,d,l)=>{let u={bitrate:a,droppedFrames:c,fps:d,startupTime:l},m=w({bitrate:Ee(),droppedFrames:Ee(),fps:Ee(),startupTime:Ee()});try{let p=m(u);return{bitrate:p.bitrate,droppedFrames:p.droppedFrames,framesPerSecond:p.fps,timeToStart:p.startupTime}}catch(p){return e.warn("An error occurred while creating the QOE Object.",p),{}}}});var Ps={"a.media.show":"show","a.media.season":"season","a.media.episode":"episode","a.media.asset":"assetID","a.media.genre":"genre","a.media.airDate":"firstAirDate","a.media.digitalDate":"firstDigitalDate","a.media.rating":"rating","a.media.originator":"originator","a.media.network":"network","a.media.type":"showType","a.media.adLoad":"adLoad","a.media.pass.mvpd":"mvpd","a.media.pass.auth":"authorized","a.media.dayPart":"dayPart","a.media.feed":"feed","a.media.format":"streamFormat","a.media.artist":"artist","a.media.album":"album","a.media.label":"label","a.media.author":"author","a.media.station":"station","a.media.publisher":"publisher","media.resumed":"hasResume"},ks={"a.media.ad.advertiser":"advertiser","a.media.ad.campaign":"campaignID","a.media.ad.creative":"creativeID","a.media.ad.placement":"placementID","a.media.ad.site":"siteID","a.media.ad.creativeURL":"creativeURL"};var ip=({logger:e,trackMediaSession:t,trackMediaEvent:r,uuid:o})=>{let n=null,i=()=>{n={qoe:null,lastPlayhead:0,playerId:o()}},s=({eventType:c})=>c===ct.BufferComplete||c===ct.SeekComplete?ht.Play:c===ct.StateStart||c===ct.StateEnd?ht.StateUpdate:c===ct.SeekStart?ht.Pause:c,a=({eventType:c,mediaDetails:d={},contextData:l=[]})=>{let u=s({eventType:c});if(c===ct.StateStart)return{eventType:`media.${u}`,mediaCollection:{statesStart:[d]}};if(c===ct.StateEnd)return{eventType:`media.${u}`,mediaCollection:{statesEnd:[d]}};let m={eventType:`media.${u}`,mediaCollection:{...d}},p=[];return Object.keys(l).forEach(f=>{Ps[f]?m.mediaCollection.sessionDetails[Ps[f]]=l[f]:ks[f]?m.mediaCollection.advertisingDetails[ks[f]]=l[f]:p.push({name:f,value:l[f]})}),q(p)&&(m.mediaCollection.customMetadata=p),m};return{trackSessionStart:(c,d={})=>{if(xe(c)||pe(c))return e.warn("Invalid media object"),{};n===null&&(e.warn("The Media Session was completed. Restarting a new session."),i());let l=a({eventType:ht.SessionStart,mediaDetails:c,contextData:d});return t({playerId:n.playerId,getPlayerDetails:()=>({playhead:n.lastPlayhead,qoeDataDetails:n.qoe}),xdm:l})},trackPlay:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=a({eventType:ht.Play});return r({playerId:n.playerId,xdm:c})},trackPause:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=a({eventType:ht.Pause});return r({playerId:n.playerId,xdm:c})},trackSessionEnd:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=a({eventType:ht.SessionEnd});return r({playerId:n.playerId,xdm:c})},trackComplete:()=>{if(n===null)return e.warn("The Media Session was completed."),{};let c=a({eventType:ht.SessionComplete});return r({playerId:n.playerId,xdm:c})},trackError:c=>{if(e.warn(`trackError(${c})`),n===null)return e.warn("The Media Session was completed."),{};let d={name:c,source:"player"},l=a({eventType:ht.Error,mediaDetails:{errorDetails:d}});return r({playerId:n.playerId,xdm:l})},trackEvent:(c,d,l)=>{if(pe(d))return e.warn("Invalid media object."),{};if(n===null)return e.warn("The Media Session was completed."),{};if(!Object.values(ct).includes(c))return e.warn("Invalid event type"),{};let u=a({eventType:c,mediaDetails:d,contextData:l});return r({playerId:n.playerId,xdm:u})},updatePlayhead:c=>{if(n===null){e.warn("The Media Session was completed.");return}nt(c)&&(n.lastPlayhead=parseInt(c,10))},updateQoEObject:c=>{if(n===null){e.warn("The Media Session was completed.");return}c&&(n.qoe=c)},destroy:()=>{e.warn("Destroy called, destroying the tracker."),n=null}}};var sp=({eventManager:e,sendEdgeNetworkRequest:t,config:r,logger:o,consent:n})=>{let i=wn({config:r}),s=Cn({sendEdgeNetworkRequest:t,config:r,consent:n,eventManager:e,setTimestamp:_r(()=>new Date)}),a=_n({mediaSessionCacheManager:i,mediaEventManager:s,config:r}),c=On({config:r,mediaEventManager:s,mediaSessionCacheManager:i,legacy:!0}),d=Rn({mediaSessionCacheManager:i,config:r,trackMediaEvent:a});return op({mediaResponseHandler:d,trackMediaSession:c,trackMediaEvent:a,createMediaHelper:np,createGetInstance:ip,logger:o,config:r})};sp.namespace="Legacy Media Analytics";var ap=sp;var Nn="web",cp="webapp",Dn="://",Ms="#";var nS=/^(\w+):\/\/([^/#]+)(\/[^#]*)?(#.*)?$/,iS=/^(?:.*@)?(?:[a-z\d\u00a1-\uffff.-]+|\[[a-f\d:]+])(?::\d+)?$/,sS=/^\/(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})*$/,aS=/^#(?:[/\w\u00a1-\uffff-.~]|%[a-fA-F\d]{2})+$/,lp=(e="/")=>{let t=e.length;for(;t>0&&"/".indexOf(e.charAt(t-1))!==-1;)t-=1;return e.substring(0,t)||"/"},cS=e=>he(e)?e.toLowerCase():"",lS=e=>he(e)?e.toLowerCase():"",dS=e=>he(e)?lp(e):"/",uS=e=>{let t=e.match(nS);return t?{surfaceType:cS(t[1]),authority:lS(t[2]),path:dS(t[3]),fragment:t[4]}:null},mS=e=>`${e.surfaceType}${Dn}${e.authority}${e.path||""}${e.fragment||""}`,Ls=e=>{let t=e(),r=t.host.toLowerCase(),o=t.pathname;return Nn+Dn+r+lp(o)},pS=(e,t)=>e.startsWith(Ms)?Ls(t)+e:e,fS=(e,t,r)=>{let o=s=>(r.warn(s),null);if(!he(e))return o(`Invalid surface: ${e}`);let n=pS(e,t),i=uS(n);return i===null?o(`Invalid surface: ${e}`):[Nn,cp].includes(i.surfaceType)?!i.authority||!iS.test(i.authority)?o(`Invalid authority ${i.authority} in surface: ${e}`):i.path&&!sS.test(i.path)?o(`Invalid path ${i.path} in surface: ${e}`):i.fragment&&!aS.test(i.fragment)?o(`Invalid fragment ${i.fragment} in surface: ${e}`):i:o(`Unsupported surface type ${i.surfaceType} in surface: ${e}`)},dp=e=>!!e&&e.indexOf(Nn+Dn)===0&&e.indexOf(Ms)===-1,up=(e=[],t,r)=>e.map(o=>fS(o,t,r)).filter(o=>!xe(o)).map(mS);var Ft="https://ns.adobe.com/personalization/default-content-item",ir="https://ns.adobe.com/personalization/dom-action",sr="https://ns.adobe.com/personalization/html-content-item",ar="https://ns.adobe.com/personalization/json-content-item",Eo="https://ns.adobe.com/personalization/ruleset-item",Pn="https://ns.adobe.com/personalization/redirect-item",yt="https://ns.adobe.com/personalization/message/in-app",mp="https://ns.adobe.com/personalization/message/content-card";var pp="https://ns.adobe.com/personalization/eventHistoryOperation";var gS=e=>{e.includes(Ke)||e.push(Ke)},hS=(e,t)=>{let r=Ls(t);e.includes(r)||e.push(r)},fp=e=>e.filter((t,r)=>e.indexOf(t)===r),Ep=({getPageLocation:e,renderDecisions:t,decisionScopes:r,personalization:o,event:n,isCacheInitialized:i,logger:s})=>{let a=n.getViewName();return{isRenderDecisions(){return t},isSendDisplayEvent(){return!!o.sendDisplayEvent},shouldIncludeRenderedPropositions(){return!!o.includeRenderedPropositions},getViewName(){return a},hasScopes(){return r.length>0||q(o.decisionScopes)},hasSurfaces(){return q(o.surfaces)},hasViewName(){return he(a)},createQueryDetails(){let c=[...r];q(o.decisionScopes)&&c.push(...o.decisionScopes);let d=up(o.surfaces,e,s);this.shouldRequestDefaultPersonalization()&&(gS(c),hS(d,e));let l=[Ft,sr,ar,Pn,Eo,yt,mp];return c.includes(Ke)&&l.push(ir),{schemas:l,decisionScopes:fp(c),surfaces:fp(d)}},isCacheInitialized(){return i},shouldFetchData(){return this.hasScopes()||this.hasSurfaces()||this.shouldRequestDefaultPersonalization()},shouldUseCachedData(){return this.hasViewName()&&!this.shouldFetchData()},shouldRequestDefaultPersonalization(){return o.defaultPersonalizationEnabled||!this.isCacheInitialized()&&o.defaultPersonalizationEnabled!==!1}}};var gp="Rendering is disabled for authoring mode.";var cr="decisioning.propositionDisplay",lr="decisioning.propositionInteract",Vs="decisioning.propositionTrigger",Us="decisioning.propositionDismiss",go="decisioning.propositionSuppressDisplay";var le={DISPLAY:"display",INTERACT:"interact",TRIGGER:"trigger",DISMISS:"dismiss",SUPPRESS:"suppressDisplay"},yS={[cr]:le.DISPLAY,[lr]:le.INTERACT,[Vs]:le.TRIGGER,[Us]:le.DISMISS,[go]:le.SUPPRESS},IS={[le.DISPLAY]:cr,[le.INTERACT]:lr,[le.TRIGGER]:Vs,[le.DISMISS]:Us,[le.SUPPRESS]:go},hp=e=>yS[e],yp=e=>IS[e];var SS={propositions:[]},Ip=({logger:e,options:t})=>{let r=w({propositions:ne(w({id:R().required(),scope:R().required(),scopeDetails:w({decisionProvider:R().required()}).required(),items:ne(w({id:R().required(),schema:R().required(),data:w(ze())})).nonEmpty().required()}).required()).nonEmpty().required(),metadata:w(ze()),viewName:R()}).required();try{return r(t)}catch(o){return e.warn("Invalid options for applyPropositions. No propositions will be applied.",o),SS}};var Sp=({getPageLocation:e,logger:t,fetchDataHandler:r,viewChangeHandler:o,onClickHandler:n,isAuthoringModeEnabled:i,mergeQuery:s,viewCache:a,showContainers:c,applyPropositions:d,setTargetMigration:l,mergeDecisionsMeta:u,renderedPropositions:m,onDecisionHandler:p,handleConsentFlicker:f})=>({lifecycle:{onComponentsRegistered(){f()},onDecision:p,onBeforeRequest({request:y}){return l(y),Promise.resolve()},onBeforeEvent({event:y,renderDecisions:v,decisionScopes:A=[],personalization:b={},onResponse:N=z,onRequestFailure:k=z}){if(N(()=>({propositions:[]})),k(()=>c()),i())return t.warn(gp),s(y,{enabled:!1}),Promise.resolve();let J=Ep({getPageLocation:e,renderDecisions:v,decisionScopes:A,personalization:b,event:y,isCacheInitialized:a.isInitialized(),logger:t}),Y=[];if(J.shouldIncludeRenderedPropositions()&&Y.push(m.clear()),J.shouldFetchData()){let F=a.createCacheUpdate(J.getViewName());k(()=>F.cancel()),r({cacheUpdate:F,personalizationDetails:J,event:y,onResponse:N})}else J.shouldUseCachedData()&&Y.push(o({personalizationDetails:J,event:y,onResponse:N,onRequestFailure:k}));return Promise.all(Y).then(F=>{let te=F.flatMap(de=>de);q(te)&&u(y,te,[le.DISPLAY])})},onClick({event:y,clickedElement:v}){n({event:y,clickedElement:v})}},commands:{applyPropositions:{optionsValidator:y=>Ip({logger:t,options:y}),run:d}}});var lt=(e="undefined")=>ue(Nl,{},{innerHTML:e});var TS=":eq(",vS=/:eq\((\d+)\)/g,kn=e=>e.indexOf(TS)===-1,Tp=e=>e.split(vS).filter(he);var AS=/(#|\.)(-?\w+)/g,bS=(e,t,r)=>`${t}${CSS.escape(r)}`,CS=e=>e.replace(AS,bS),wS=e=>{let t=[],r=CS(e.trim()),o=Tp(r),{length:n}=o,i=0;for(;i<n;){let s=o[i],a=o[i+1];a?t.push({sel:s,eq:Number(a)}):t.push({sel:s}),i+=2}return t},dr=e=>{let t=document;if(kn(e))return Ie(e,t);let r=wS(e),{length:o}=r,n=[],i=t,s=0;for(;s<o;){let{sel:a,eq:c}=r[s],d=Ie(a,i),{length:l}=d;if(l===0||c!=null&&c>l-1)break;s<o-1&&(c==null?[i]=d:i=d[c]),s===o-1&&(c==null?n=d:n=[d[c]]),s+=1}return n};var Mn=(e,t=document)=>t.getElementById(e);var $t=(e,t,r)=>{e.setAttribute(t,r)};var Ae=(e,t)=>e.getAttribute(t);var js=(e,t)=>{e.removeAttribute(t)};var ur=(e,t,r,o)=>{let n;o?n=`${t}:${r} !${o};`:n=`${t}:${r};`,e.style.cssText+=`;${n}`};var Ln=e=>e.parentNode;var Bs=e=>e.nextElementSibling;var ho=(e,t)=>{if(!e)return;let r=Ln(e);r&&r.insertBefore(t,Bs(e))};var mr=(e,t)=>{if(!e)return;let r=Ln(e);r&&r.insertBefore(t,e)};var Fs=e=>{let{children:t}=e;return t?Lt(t):[]};var dt=e=>{let{childNodes:t}=e;return t?Lt(t):[]};var $s=e=>e.firstElementChild;var Hs,It=(e=document)=>{if(Hs===void 0){let t=e.querySelector("[nonce]");Hs=t&&(t.nonce||t.getAttribute("nonce"))}return Hs};var ut="src";var vp=e=>e.tagName===Sr,qs=e=>ue(Sr,{src:e}),Ht=e=>{Ie(Sr,e).forEach(r=>{let o=Ae(r,ut);o&&qs(o)})};var _S=(e,t)=>e.tagName===t,OS=e=>_S(e,Tr)&&!Ae(e,ut),qt=e=>{let t=Ie(Tr,e),{length:r}=t,o=It();if(o)for(let n=0;n<r;n+=1){let i=t[n];OS(i)&&(i.nonce=o)}};var xS=(e,t)=>new Promise((r,o)=>{t.onload=()=>{r(t)},t.onerror=()=>{o(new Error(`Failed to load script: ${e}`))}}),RS=e=>{let t=document.createElement("script");t.src=e,t.async=!0;let r=xS(e,t);return document.head.appendChild(t),r},Vn=(e,t)=>!!e&&e.tagName===t,NS=e=>Vn(e,vr)&&!Ae(e,ut),DS=e=>Vn(e,vr)&&Ae(e,ut),Gt=e=>{let t=Ie(vr,e),r=[],{length:o}=t,n=It(),i={...n&&{nonce:n}};for(let s=0;s<o;s+=1){let a=t[s];if(!NS(a))continue;let{textContent:c}=a;c&&r.push(ue(vr,i,{textContent:c}))}return r},Wt=e=>{let t=Ie(vr,e),r=[],{length:o}=t;for(let n=0;n<o;n+=1){let i=t[n];if(!DS(i))continue;let s=Ae(i,ut);s&&r.push(s)}return r},Yt=(e,t)=>{t.forEach(r=>{e.appendChild(r),e.removeChild(r)})},zt=e=>Promise.all(e.map(RS));var yo=(e,t,r)=>{let o=lt(t);qt(o);let n=dt(o),i=Gt(o),s=Wt(o);return Ht(o),n.forEach(a=>{Re(e,a)}),r(e),Yt(e,i),zt(s)};var PS=e=>{dt(e).forEach(We)},Gs=(e,t,r)=>(PS(e),yo(e,t,r));var Un=(e,t,r)=>{let o=lt(t);qt(o);let n=dt(o),i=Gt(o),s=Wt(o),{length:a}=n,c=a-1;for(Ht(o);c>=0;){let d=n[c];r(d);let l=$s(e);l?mr(l,d):Re(e,d),c-=1}return Yt(e,i),zt(s)};var Ws="alloy-prehiding",kS="{ visibility: hidden }",jn={},Bn=e=>{if(jn[e])return;let t=It(),r={...t&&{nonce:t}},o={textContent:`${e} ${kS}`},n=ue(Tr,r,o);Re(document.head,n),jn[e]=n},Fn=e=>{let t=jn[e];t&&(We(t),delete jn[e])},Ap=e=>t=>{if(!t||Mn(Ws))return;let o=It(),n={id:Ws,...o&&{nonce:o}},s=ue(Tr,n,{textContent:t});e.logOnContentHiding({status:"hide-containers",message:"Prehiding style applied to hide containers.",logLevel:"info"}),Re(document.head,s)},bp=e=>()=>{let t=Mn(Ws);t&&(e.logOnContentHiding({status:"show-containers",message:"Prehiding style removed to show containers.",logLevel:"info"}),We(t))};var Ys=(e,t,r)=>{r(e),e.textContent=t};var Io=(e,t,r)=>{let o=lt(t);qt(o);let n=dt(o),i=Gt(o),s=Wt(o);return Ht(o),n.forEach(a=>{r(a),mr(e,a)}),Yt(e,i),zt(s)};var zs=(e,t,r)=>Io(e,t,r).then(()=>{We(e)});var Ks=(e,t,r)=>{let o=lt(t);qt(o);let n=dt(o),i=Gt(o),s=Wt(o);Ht(o);let a=e;return n.forEach(c=>{r(c),ho(a,c),a=c}),Yt(e,i),zt(s)};var Xs=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{ur(e,i,n[i],o)}),r(e)};var Js=(e,t,r)=>{Object.keys(t).forEach(o=>{$t(e,o,t[o])}),r(e)};var Qs=(e,t,r)=>{vp(e)&&(qs(t),r(e),js(e,ut),$t(e,ut,t))};var Zs=(e,{from:t,to:r},o)=>{let n=Fs(e),i=n[t],s=n[r];!i||!s||(t<r?ho(s,i):mr(s,i),o(s),o(i))};var MS=({containers:e,content:t,decorateProposition:r,renderFunc:o,renderStatusHandler:n,alwaysRender:i})=>{let s=e.filter(a=>i||n.shouldRender(a)).map(async a=>{await o(a,t,r),n.markAsRendered(a)});return Promise.all(s)},Te=(e,t=!1)=>async(r,o,n)=>{let{selector:i,prehidingSelector:s,content:a}=r;Bn(s);try{let c=await zr(i,dr);MS({containers:c,content:a,decorateProposition:o,renderFunc:e,renderStatusHandler:n,alwaysRender:t})}finally{Fn(s)}};var $n=e=>`${e}`.endsWith("px")?e:`${e}px`;var Cp=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{let s=n[i];(i==="left"||i==="top")&&(s=$n(s)),ur(e,i,s,o)}),r(e)};var wp=(e,t,r)=>{r(e)};var _p=(e,t,r)=>{let{priority:o,...n}=t;Object.keys(n).forEach(i=>{let s=n[i];(i==="width"||i==="height")&&(s=$n(s)),ur(e,i,s,o)}),r(e)};var LS="setHtml",ea="customCode",VS="setText",US="setAttribute",jS="setImageSource",BS="setStyle",FS="move",$S="resize",HS="rearrange",qS="remove",GS="insertAfter",WS="insertBefore",YS="replaceHtml",zS="prependHtml",ta="appendHtml",Hn="click",ra="collectInteractions",oa=()=>({[LS]:Te(Gs,!0),[ea]:Te(Un),[VS]:Te(Ys,!0),[US]:Te(Js,!0),[jS]:Te(Qs,!0),[BS]:Te(Xs,!0),[FS]:Te(Cp,!0),[$S]:Te(_p,!0),[HS]:Te(Zs),[qS]:Te(We,!0),[GS]:Te(Ks),[WS]:Te(Io),[YS]:Te(zs,!0),[zS]:Te(Un),[ta]:Te(yo),[ra]:Te(wp,!0)});var qn=({eventManager:e,mergeDecisionsMeta:t})=>({decisionsMeta:r=[],propositionAction:o,documentMayUnload:n=!1,eventType:i=cr,propositionEventTypes:s=[hp(i)],viewName:a})=>{let c=e.createEvent(),d={eventType:i};return a&&(d.web={webPageDetails:{viewName:a}}),q(r)&&t(c,r,s,o),c.mergeXdm(d),n&&c.documentMayUnload(),e.sendEvent(c)};var KS="personalization:decisions",Op=({logger:e,prehidingStyle:t,showContainers:r,hideContainers:o,mergeQuery:n,processPropositions:i,createProposition:s,notificationHandler:a,consent:c})=>({cacheUpdate:d,personalizationDetails:l,event:u,onResponse:m})=>{let{state:p,wasSet:f}=c.current();p==="out"&&f||(l.isRenderDecisions()?o(t):r()),n(u,l.createQueryDetails());let y=a(l.isRenderDecisions(),l.isSendDisplayEvent(),l.getViewName());m(({response:v})=>{let A=v.getPayloadsByType(KS);q(A)||e.logOnContentRendering({status:"no-offers",message:"No offers were returned.",logLevel:"info",detail:{query:l.createQueryDetails()}});let b=A.map(ie=>s(ie)),{page:N=[],view:k=[],proposition:J=[]}=er(b,ie=>ie.getScopeType()),Y=d.update(k),F,te,de;return l.isRenderDecisions()?({render:F,returnedPropositions:te,returnedDecisions:de}=i([...N,...Y],J),q(N)&&e.logOnContentRendering({status:"rendering-started",message:"Started rendering propositions for page-wide scope.",logLevel:"info",detail:{scope:Ke,propositions:N.map(ie=>ie.toJSON())}}),q(Y)&&e.logOnContentRendering({status:"rendering-started",message:`Rendering propositions started for view scope - ${l.getViewName()}.`,logLevel:"info",detail:{scope:l.getViewName(),propositions:Y.map(ie=>ie.toJSON())}}),F().then(y),r()):{returnedPropositions:te,returnedDecisions:de}=i([],[...N,...Y,...J]),{propositions:te,decisions:de}})};var xp=(e,t)=>{if(kn(e))return Wi(e,t);let r=dr(e),o=!1;for(let n=0;n<r.length;n+=1)if(r[n]===t){o=!0;break}return o};var mt="view",Rp="page",Np="proposition";var Gn=e=>e.map(t=>{let{trackingLabel:r,scopeType:o,...n}=t;return n}),Dp=e=>e.filter((t,r)=>{let o=JSON.stringify(t);return r===e.findIndex(n=>JSON.stringify(n)===o)});var XS=(e,t,r)=>{let{documentElement:o}=document,n=e,i=0;for(;n&&n!==o;){if(xp(t,n)){let s=r(t),a={metas:s},c=s.find(l=>l.trackingLabel);c&&(a.label=c.trackingLabel,a.weight=i);let d=s.find(l=>l.scopeType===mt);return d&&(a.viewName=d.scope,a.weight=i),a}n=n.parentNode,i+=1}return{metas:null}},Pp=(e,t,r)=>{let o=[],n="",i=Number.MAX_SAFE_INTEGER,s,a=Number.MAX_SAFE_INTEGER;for(let c=0;c<t.length;c+=1){let{metas:d,label:l,weight:u,viewName:m}=XS(e,t[c],r);d&&(l&&u<=i&&(n=l,i=u),m&&u<=a&&(s=m,a=u),o.push(...Gn(d)))}return{decisionsMeta:Dp(o),propositionActionLabel:n,propositionActionToken:void 0,viewName:s}};var kp=(e=document)=>e.location.href.indexOf("adobe_authoring_enabled")!==-1;var Dr=(e,t,r,o)=>{if(t.length===0)return;let n={};r.forEach(s=>{n[s]=1});let i={_experience:{decisioning:{propositions:t,propositionEventType:n}}};o&&(i._experience.decisioning.propositionAction=o),e.mergeXdm(i)},na=(e,t)=>{e.mergeQuery({personalization:{...t}})};var JS=(e,t)=>{if(!t&&!e)return;let r={};return e&&(r.label=e),t&&(r.tokens=[t]),r},Mp=({mergeDecisionsMeta:e,collectInteractions:t,collectClicks:r,getInteractionMetas:o,getClickMetas:n,getClickSelectors:i,autoCollectPropositionInteractions:s})=>({event:a,clickedElement:c})=>{let d=[],l,u,m;if([t(c,o,s),r(c,i(),n)].forEach(({decisionsMeta:p,propositionActionLabel:f,propositionActionToken:y,viewName:v})=>{Array.prototype.push.apply(d,p),!l&&f&&(l=f),!u&&y&&(u=y),!m&&v&&(m=v)}),q(d)){let p={eventType:lr};m&&(p.web={webPageDetails:{viewName:m}}),a.mergeXdm(p),e(a,d,[le.INTERACT],JS(l,u))}};var Lp=({createProposition:e})=>{let t=!1,r=Promise.resolve({}),o=(a,c)=>{let d=a[c.toLowerCase()];return d&&d.length>0?d:[e({scope:c,scopeDetails:{characteristics:{scopeType:mt}},items:[{schema:Ft}]},!1)]};return{createCacheUpdate:a=>{let c=At();return t=!0,r=r.then(d=>c.promise.then(l=>({...d,...l})).catch(()=>d)),{update(d){let l=d.filter(m=>m.getScope()),u=er(l,m=>m.getScope().toLowerCase());return c.resolve(u),a?o(u,a):[]},cancel(){c.reject()}}},getView:a=>r.then(c=>o(c,a)),isInitialized:()=>t}};var Vp=({processPropositions:e,viewCache:t,logger:r})=>({personalizationDetails:o,onResponse:n})=>{let i,s,a=o.getViewName();return n(()=>({propositions:i,decisions:s})),t.getView(a).then(c=>{let d;return o.isRenderDecisions()?({render:d,returnedPropositions:i,returnedDecisions:s}=e(c),r.logOnContentRendering({status:"rendering-started",message:`Started rendering propositions for view scope - ${a}.`,logLevel:"info",detail:{scope:a,propositions:c.map(l=>l.toJSON())}}),d()):({returnedPropositions:i,returnedDecisions:s}=e([],c),[])})};var QS=e=>Object.keys(e).map(t=>({id:t,...e[t]})),Up=()=>{let e={};return{storeClickMeta:({selector:n,meta:{id:i,scope:s,scopeDetails:a,trackingLabel:c,scopeType:d}})=>{e[n]||(e[n]={}),e[n][i]={scope:s,scopeDetails:a,trackingLabel:c,scopeType:d}},getClickSelectors:()=>Object.keys(e),getClickMetas:n=>e[n]?QS(e[n]):{}}};var jp=()=>{let e={},t={};return{storeInteractionMeta:(n,i,s,a,c)=>{c=parseInt(c,10),e[c]||(e[c]={},t[c]={}),t[c][n]||(t[c][n]=new Set),t[c][n].add(i),e[c][n]={...a,scopeType:s}},getInteractionMetas:n=>!Array.isArray(n)||n.length===0?[]:Object.values(n.map(i=>parseInt(i,10)).reduce((i,s)=>(Object.keys(e[s]||{}).forEach(a=>{i[a]||(i[a]={proposition:e[s][a],items:new Set}),i[a].items=new Set([...i[a].items,...t[s][a]])}),i),{})).map(({proposition:i,items:s})=>({...i,items:Array.from(s).map(a=>({id:a}))}))}};var ia=(e,t)=>e===ar&&t===ra,Bp={[ir]:()=>!0,[sr]:()=>!0,[ar]:ia,[yt]:()=>!0,[Ft]:()=>!0},ZS=(e,t)=>typeof Bp[e]=="function"&&Bp[e](e,t),Fp=({processPropositions:e,createProposition:t,renderedPropositions:r,viewCache:o})=>{let n=({items:a,metadataForScope:c={}})=>{let{actionType:d,selector:l}=c;return a.filter(u=>ZS(u.schema,d)).map(u=>{let{schema:m}=u;if(m!==sr&&!ia(m,d))return{...u};if(!pe(c))return{...u,schema:ia(m,d)?ir:m,data:{...u.data,selector:l,type:d}}}).filter(u=>u)},i=a=>!(a.scope===Ke&&a.renderAttempted),s=({propositions:a,metadata:c})=>a.filter(i).map(d=>{if(q(d.items)){let{id:l,scope:u,scopeDetails:m}=d;return{id:l,scope:u,scopeDetails:m,items:n({items:d.items,metadataForScope:c[d.scope]})}}return d}).filter(d=>q(d.items));return({propositions:a=[],metadata:c={},viewName:d})=>{let l=At();r.concat(l.promise);let u=s({propositions:a,metadata:c}).map(m=>t(m));return Promise.resolve().then(()=>d?o.getView(d):[]).then(m=>{let{render:p,returnedPropositions:f}=e([...u,...m]);return p().then(l.resolve),{propositions:f}})}};var $p=({window:e})=>()=>e.location;var Hp=({targetMigrationEnabled:e})=>e?t=>{t.getPayload().mergeMeta({target:{migration:!0}})}:z;var eT="BODY > *:eq(0)",qp=e=>{let{selector:t,type:r}=e;return r!==ea||t!==eT?e:{...e,selector:"BODY"}};var tT="SCRIPT,LINK,STYLE",rT=e=>{let t=lt(e);return Ie(tT,t).map(o=>o.outerHTML).join("")},Gp=e=>{let t={...e},{content:r,selector:o}=t;if(xn(r)||o==null)return t;let n=dr(o);return Vn(n[0],Dl)&&(t.type=ta,t.content=rT(r)),t};var Wp=e=>t=>t&&e.reduce((r,o)=>({...r,...o(r)}),t);var Yp=({preprocess:e,isPageWideSurface:t})=>{let r=(o,n)=>{let{id:i,schema:s,data:a,characteristics:{trackingLabel:c}={}}=o,d=a?a.type:void 0,l=e(a);return{getId(){return i},getSchema(){return s},getSchemaType(){return d},getData(){return l},getProposition(){return n},getTrackingLabel(){return c},getOriginalItem(){return o},toString(){return JSON.stringify(o)},toJSON(){return o}}};return(o,n=!0,i=!1)=>{let{id:s,scope:a,scopeDetails:c,items:d=[]}=o,{characteristics:{scopeType:l}={}}=c||{};return{getScope(){return a},getScopeType(){return a===Ke||t(a)?Rp:l===mt?mt:Np},getItems(){return d.map(u=>r(u,this))},getNotification(){return{id:s,scope:a,scopeDetails:c}},getId(){return s},toJSON(){return o},shouldSuppressDisplay(){return i},addToReturnValues(u,m,p,f){n&&(u.push({...o,items:p.map(y=>y.getOriginalItem()),renderAttempted:f}),f||m.push({...o,items:p.map(y=>y.getOriginalItem())}))}}}};var zp=()=>{let e=Promise.resolve([]);return{concat(t){e=e.then(r=>t.then(o=>r.concat(o)).catch(()=>r))},clear(){let t=e;return e=Promise.resolve([]),t}}};var Kp=()=>({render:z,setRenderAttempted:!0,includeInNotification:!0});var Kt="always",Wn="never",So="decoratedElementsOnly",Xp=[Kt,Wn,So];var Yn="data-aep-interact-id",zn="data-aep-click-label",Jp="data-aep-click-token",oT=0,nT=(e,t)=>t?parseInt(t,10):++oT,iT=(e,t)=>!e||!e[t]?!1:[Kt,So].includes(e[t]),sT=(e,t,r,o,n,i,s,a)=>{let{scopeDetails:c={}}=s,{decisionProvider:d}=c;return!iT(e,d)&&t!==Hn?z:l=>{if(!l.tagName)return;let u=nT(r,Ae(l,Yn));a(r,o,i,s,u),$t(l,Yn,u),n&&!Ae(l,zn)&&$t(l,zn,n)}},Kn=sT;var Xn=(e,t)=>e!==mt?{shouldRender:()=>!0,markAsRendered:()=>{}}:{shouldRender:r=>r?!(r.dataset.adobePropositionIds??"").split(",").includes(t):!0,markAsRendered:r=>{let o=(r.dataset.adobePropositionIds??"").split(",");o.includes(t)||o.push(t),r.dataset.adobePropositionIds=o.sort().join(",")}};var Qp=({modules:e,logger:t,storeInteractionMeta:r,storeClickMeta:o,autoCollectPropositionInteractions:n})=>i=>{let{type:s,selector:a}=i.getData()||{};if(!s)return t.warn("Invalid DOM action data: missing type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};if(s===Hn)return a?(o({selector:a,meta:{...i.getProposition().getNotification(),trackingLabel:i.getTrackingLabel(),scopeType:i.getProposition().getScopeType()}}),{setRenderAttempted:!0,includeInNotification:!1}):(t.warn("Invalid DOM action data: missing selector.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1});if(!e[s])return t.warn("Invalid DOM action data: unknown type.",i.getData()),{setRenderAttempted:!1,includeInNotification:!1};let c=Xn(i.getProposition().getScopeType(),i.getId()),d=Kn(n,s,i.getProposition().getId(),i.getId(),i.getTrackingLabel(),i.getProposition().getScopeType(),i.getProposition().getNotification(),r);return{render:()=>e[s](i.getData(),d,c),setRenderAttempted:!0,includeInNotification:!0}};var Zp=({modules:e,logger:t,storeInteractionMeta:r,autoCollectPropositionInteractions:o})=>n=>{let{type:i,selector:s}=n.getData()||{};if(!s||!i)return{setRenderAttempted:!1,includeInNotification:!1};if(!e[i])return t.warn("Invalid HTML content data",n.getData()),{setRenderAttempted:!1,includeInNotification:!1};let a=Kn(o,i,n.getProposition().getId(),n.getId(),n.getTrackingLabel(),n.getProposition().getScopeType(),n.getProposition().getNotification(),r),c=Xn(n.getProposition().getScopeType(),n.getId());return{render:()=>e[i](n.getData(),a,c),setRenderAttempted:!0,includeInNotification:!0}};var ef="BODY",tf=({logger:e,executeRedirect:t,collect:r})=>o=>{let{content:n}=o.getData()||{};return n?{render:()=>(Bn(ef),r({decisionsMeta:[o.getProposition().getNotification()],documentMayUnload:!0}).then(()=>(e.logOnContentRendering({status:"rendering-redirect",detail:{propositionDetails:o.getProposition().getNotification(),redirect:n},message:`Redirect action ${o.toString()} executed.`,logLevel:"info"}),t(n))).catch(s=>{throw Fn(ef),s})),setRenderAttempted:!0,onlyRenderThis:!0}:(e.warn("Invalid Redirect data",o.getData()),{})};var rf=({schemaProcessors:e,logger:t})=>{let r=(s,a)=>()=>Promise.resolve().then(s).then(()=>(t.enabled&&t.info(`Action ${a.toString()} executed.`),a.toJSON())).catch(c=>{let{message:d,stack:l}=c,u=`Failed to execute action ${a.toString()}. ${d} ${l}`;t.logOnContentRendering({status:"rendering-failed",detail:{propositionDetails:a.getProposition().getNotification(),item:a.toJSON()},error:c,message:u,logLevel:"warn"})}),o=async(s,a)=>{let d=(await Promise.allSettled(s.map(l=>l()))).filter(l=>l.status==="fulfilled").map(l=>l.value);if(a&&q(d))return{...a,items:d}},n=s=>{let a=e[s.getSchema()];return a?a(s):{}},i=({renderers:s,returnedPropositions:a,returnedDecisions:c,items:d,proposition:l})=>{let u=[...s],m=[...a],p=[...c],f=[],y=[],v=[],A=!1,b,N,k,J=!1,Y=0,F;for(;d.length>Y;){if(F=d[Y],{render:b,setRenderAttempted:N,includeInNotification:k,onlyRenderThis:J}=n(F),J){m=[],p=[],N?(f=[F],y=[]):(f=[],y=[F]),u=[],v=[b],A=k;break}b&&v.push(r(b,F)),k&&(A=!0),N?f.push(F):y.push(F),Y+=1}if(v.length>0){let te=A?l.getNotification():void 0;u.push(()=>o(v,te))}else A&&u.push(()=>Promise.resolve(l.getNotification()));return f.length>0&&l.addToReturnValues(m,p,f,!0),y.length>0&&l.addToReturnValues(m,p,y,!1),{renderers:u,returnedPropositions:m,returnedDecisions:p,onlyRenderThis:J}};return(s,a=[])=>{let c=[],d=[],l=[],u,m=0,p,f;for(;s.length>m&&(p=s[m],f=p.getItems(),{renderers:c,returnedPropositions:d,returnedDecisions:l,onlyRenderThis:u}=i({renderers:c,returnedPropositions:d,returnedDecisions:l,items:f,proposition:p}),!u);)m+=1;return u&&s.forEach((v,A)=>{A!==m&&v.addToReturnValues(d,l,v.getItems(),!1)}),a.forEach(v=>{v.addToReturnValues(d,l,v.getItems(),!1)}),{returnedPropositions:d,returnedDecisions:l,render:()=>Promise.all(c.map(v=>v())).then(v=>{let A=v.filter(N=>N),b=A.map(N=>{let{id:k,scope:J,scopeDetails:Y}=N;return{id:k,scope:J,scopeDetails:Y}});if(q(A)){let N=er(A,k=>k.scope);t.logOnContentRendering({status:"rendering-succeeded",detail:{...N},message:`Scopes: ${JSON.stringify(N)} successfully executed.`,logLevel:"info"})}return b})}}};var aT=()=>{let e=0;return t=>{let{items:r=[]}=t;return r.some(o=>o.schema===yt)?(e+=1,e>1):!1}},of=({processPropositions:e,createProposition:t,notificationHandler:r})=>({renderDecisions:o,propositions:n,event:i,personalization:s={}})=>{if(!o)return Promise.resolve();let{sendDisplayEvent:a=!0}=s,c=i?i.getViewName():void 0,d=aT(),l=n.map(y=>t(y,!0,d(y))),{render:u,returnedPropositions:m}=e(l),p=r(o,a,c),f=l.reduce((y,v)=>(y[v.getId()]=v,y),{});return u().then(y=>{let v=y.filter(b=>!f[b.id].shouldSuppressDisplay()),A=y.filter(b=>f[b.id].shouldSuppressDisplay());p(v,A)}),Promise.resolve({propositions:m})};var To="text/html",nf="application/json";var cT="defaultContent",sf=["content","contentType"],af=["mobileParameters","webParameters","html"],lT=(e,t)=>{for(let n=0;n<sf.length;n+=1){let i=sf[n];if(!Object.prototype.hasOwnProperty.call(e,i))return t.warn(`Invalid in-app message data: missing property '${i}'.`,e),!1}let{content:r,contentType:o}=e;if(o===nf)for(let n=0;n<af.length;n+=1){let i=af[n];if(!Object.prototype.hasOwnProperty.call(r,i))return t.warn(`Invalid in-app message data.content: missing property '${i}'.`,e),!1}return!0},cf=({modules:e,logger:t})=>r=>{let o=r.getData(),n=r.getProposition(),i={...n.getNotification()},s=n.shouldSuppressDisplay();if(!o)return t.warn("Invalid in-app message data: undefined.",o),{};let{type:a=cT}=o;return e[a]?lT(o,t)?i?{render:()=>s?null:e[a]({...o,meta:i}),setRenderAttempted:!0,includeInNotification:!0}:(t.warn("Invalid in-app message meta: undefined.",i),{}):{}:(t.warn("Invalid in-app message data: unknown type.",o),{})};var lf=e=>{let t=Ie(`#${e}`,document);t&&t.length>0&&We(t[0])},df=e=>{let t={};if(!e||e.tagName.toLowerCase()!=="a")return t;let{href:r}=e;if(!r||!r.startsWith("adbinapp://"))return t;let o=r.split("?"),n=o[0].split("://")[1],i=e.innerText,s=e.getAttribute("data-uuid")||"",a,c;if(q(o)){let d=Ye.parse(o[1]);a=d.interaction||"",c=fo(d.link||"")}return{action:n,interaction:a,link:c,label:i,uuid:s}};var Jn=e=>(t,r=!1)=>(r?e.location.href=t:e.location.replace(t),new Promise(()=>{}));var vo="alloy-messaging-container",Ao="alloy-overlay-container",sa="alloy-content-iframe",mf=()=>[vo,Ao].forEach(lf),dT=(e,t=Jn(window))=>r=>{r.preventDefault(),r.stopImmediatePropagation();let{target:o}=r,n=o.tagName.toLowerCase()==="a"?o:o.closest("a");if(!n)return;let{action:i,interaction:s,link:a,label:c,uuid:d}=df(n);e(i,{label:c,id:s,uuid:d,link:a}),i==="dismiss"&&mf(),he(a)&&a.length>0&&t(a,!0)},uT=(e,t)=>{let o=new DOMParser().parseFromString(e,To),n=o.querySelector("script");n&&n.setAttribute("nonce",It());let i=ue("iframe",{src:URL.createObjectURL(new Blob([o.documentElement.outerHTML],{type:"text/html"})),id:sa});return i.addEventListener("load",()=>{let{addEventListener:s}=i.contentDocument||i.contentWindow.document;s("click",t)}),i},mT=(e,t,r,o)=>{[{id:Ao,element:o},{id:vo,element:r},{id:sa,element:e}].forEach(({id:n,element:i})=>{let{style:s={},params:a={}}=t[n];Object.assign(i.style,s);let{parentElement:c="body",insertionMethod:d="appendChild",enabled:l=!0}=a,u=document.querySelector(c);l&&u&&typeof u[d]=="function"&&u[d](i)})},pT=e=>{let{verticalAlign:t,width:r,horizontalAlign:o,backdropColor:n,height:i,cornerRadius:s,horizontalInset:a,verticalInset:c,uiTakeover:d=!1}=e,l={width:r?`${r}%`:"100%",backgroundColor:n||"rgba(0, 0, 0, 0.5)",borderRadius:s?`${s}px`:"0px",border:"none",position:d?"fixed":"relative",overflow:"hidden"};return o==="left"?l.left=a?`${a}%`:"0":o==="right"?l.right=a?`${a}%`:"0":o==="center"&&(l.left="50%",l.transform="translateX(-50%)"),t==="top"?l.top=c?`${c}%`:"0":t==="bottom"?(l.position="fixed",l.bottom=c?`${c}%`:"0"):t==="center"&&(l.top="50%",l.transform=`${o==="center"?`${l.transform} `:""}translateY(-50%)`,l.display="flex",l.alignItems="center",l.justifyContent="center"),i?l.height=`${i}vh`:l.height="100%",l},fT=e=>{let{backdropOpacity:t,backdropColor:r}=e;return{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"transparent",opacity:t||.5,backgroundColor:r||"#FFFFFF"}},uf=["enabled","parentElement","insertionMethod"],ET=e=>{if(!e)return!1;let t=Object.keys(e);if(!t.includes(vo)||!t.includes(Ao))return!1;let r=Object.values(e);for(let o=0;o<r.length;o+=1){if(!w(r[o],"style")||!w(r[o],"params"))return!1;for(let n=0;n<uf.length;n+=1)if(!w(r[o].params,uf[n]))return!1}return!0},gT=e=>{if(!e)return;let{uiTakeover:t=!1}=e;return{[sa]:{style:{border:"none",width:"100%",height:"100%"},params:{enabled:!0,parentElement:"#alloy-messaging-container",insertionMethod:"appendChild"}},[vo]:{style:pT(e),params:{enabled:!0,parentElement:"body",insertionMethod:"appendChild"}},[Ao]:{style:fT(e),params:{enabled:t===!0,parentElement:"body",insertionMethod:"appendChild"}}}},hT=(e={},t)=>{mf();let{content:r,contentType:o,mobileParameters:n}=e,{webParameters:i}=e;if(o!==To)return;let s=ue("div",{id:vo}),a=uT(r,dT(t)),c=ue("div",{id:Ao});ET(i)||(i=gT(n)),i&&mT(a,i,s,c)},pf=(e,t)=>new Promise(r=>{let{meta:o}=e;hT(e,(n,i)=>{let s={};s[le.INTERACT]=1,Object.values(le).indexOf(n)!==-1&&(s[n]=1),t({decisionsMeta:[o],propositionAction:i,eventType:lr,propositionEventTypes:Object.keys(s)})}),r({meta:o})});var ff=e=>({defaultContent:t=>pf(t,e)});var Ef=(e,t)=>(r,o,n)=>{if(!r)return()=>{};if(!o){let i=At();return t.concat(i.promise),i.resolve}return(i=[],s=[])=>{q(i)&&e({decisionsMeta:i,viewName:n}),q(s)&&e({decisionsMeta:s,eventType:go,propositionAction:{reason:"Conflict"},viewName:n})}};var gf=({showContainers:e,consent:t})=>()=>{let{state:r,wasSet:o}=t.current();r===Cr&&o?e():t.awaitConsent().catch(e)};var yT=e=>{let{documentElement:t}=document,r=e,o=new Set,n,i;for(;r&&r!==t&&!(r instanceof ShadowRoot);){let s=Ae(r,Yn);s&&o.add(s),n=n||Ae(r,zn),i=i||Ae(r,Jp),r=r.parentNode}return{interactIds:[...o],clickLabel:n,clickToken:i}},IT=e=>{let t=e.find(r=>r.scopeType===mt);return t?t.scope:void 0},ST=(e,t,r)=>o=>{let{scopeDetails:n={}}=o,{decisionProvider:i}=n;return e[i]===Kt?!0:e[i]===So&&(t||r)},hf=(e,t,r)=>{let{interactIds:o,clickLabel:n="",clickToken:i}=yT(e),s=ST(r,n,i);if(o.length===0)return{};let a=t(o).filter(s);return{decisionsMeta:Gn(a),propositionActionLabel:n,propositionActionToken:i,viewName:IT(a)}};var yf="personalization:decisions",bo="AJO",aa="TGT";var ca=({config:e,logger:t,eventManager:r,consent:o})=>{let{targetMigrationEnabled:n,prehidingStyle:i,autoCollectPropositionInteractions:s}=e,a=qn({eventManager:r,mergeDecisionsMeta:Dr}),c=bp(t),d=Ap(t),{storeInteractionMeta:l,getInteractionMetas:u}=jp(),{storeClickMeta:m,getClickSelectors:p,getClickMetas:f}=Up(),y=$p({window}),v=oa(),A=Wp([Gp,qp]),b=Yp({preprocess:A,isPageWideSurface:dp}),N=Lp({createProposition:b}),k=Jn(window),J={[Ft]:Kp,[ir]:Qp({modules:v,logger:t,storeInteractionMeta:l,storeClickMeta:m,autoCollectPropositionInteractions:s}),[sr]:Zp({modules:v,logger:t,storeInteractionMeta:l,autoCollectPropositionInteractions:s}),[Pn]:tf({logger:t,executeRedirect:k,collect:a}),[yt]:cf({modules:ff(a),logger:t})},Y=rf({schemaProcessors:J,logger:t}),F=zp(),te=Ef(a,F),de=Op({prehidingStyle:i,showContainers:c,hideContainers:d,mergeQuery:na,processPropositions:Y,createProposition:b,notificationHandler:te,consent:o,logger:t}),ie=Mp({mergeDecisionsMeta:Dr,collectInteractions:hf,collectClicks:Pp,getInteractionMetas:u,getClickMetas:f,getClickSelectors:p,autoCollectPropositionInteractions:s}),ke=Vp({processPropositions:Y,viewCache:N,logger:t}),Me=Fp({processPropositions:Y,createProposition:b,renderedPropositions:F,viewCache:N}),be=Hp({targetMigrationEnabled:n}),Oe=of({processPropositions:Y,createProposition:b,notificationHandler:te}),ve=gf({showContainers:c,consent:o});return Sp({getPageLocation:y,logger:t,fetchDataHandler:de,viewChangeHandler:ke,onClickHandler:ie,isAuthoringModeEnabled:kp,mergeQuery:na,viewCache:N,showContainers:c,applyPropositions:Me,setTargetMigration:be,mergeDecisionsMeta:Dr,renderedPropositions:F,onDecisionHandler:Oe,handleConsentFlicker:ve})};ca.namespace="Personalization";var If=Xp.map(e=>ms(e));ca.configValidators=w({prehidingStyle:R().nonEmpty(),targetMigrationEnabled:X().default(!1),autoCollectPropositionInteractions:w({[bo]:jt(If).default(Kt),[aa]:jt(If).default(Wn)}).default({[bo]:Kt,[aa]:Wn}).noUnknownFields()});var Sf=ca;var Tf=e=>e!==null&&typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype,vf=(e,t={},r=[])=>(Object.keys(e).forEach(o=>{Tf(e[o])||Array.isArray(e[o])?vf(e[o],t,[...r,o]):t[[...r,o].join(".")]=e[o]}),t),Qn=e=>Tf(e)?vf(e):e;var Af=({renderDecisions:e,decisionProvider:t,applyResponse:r,event:o,personalization:n,decisionContext:i})=>{let s={...Qn(o.getContent()),...i};return({response:a})=>{if(t.addPayloads(a.getPayloadsByType(yf)),!o.hasQuery())return{propositions:[]};let c=t.evaluate(s);return r({renderDecisions:e,propositions:c,event:o,personalization:n})}};var la={MATCHER:"matcher",GROUP:"group",HISTORICAL:"historical"},ye={EQUALS:"eq",NOT_EQUALS:"ne",EXISTS:"ex",NOT_EXISTS:"nx",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"ge",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"le",CONTAINS:"co",NOT_CONTAINS:"nc",STARTS_WITH:"sw",ENDS_WITH:"ew"},bf={AND:"and",OR:"or"},Cf={ORDERED:"ordered",MOST_RECENT:"mostRecent"};function Xe(e){return typeof e=="object"||typeof e>"u"}function TT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o===String(r[n]).toLowerCase())return!0;return!1}}}function vT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o===String(r[n]).toLowerCase())return!1;return!0}}}function AT(){return{matches:(e,t)=>typeof e[t]<"u"&&e[t]!==null}}function bT(){return{matches:(e,t)=>typeof e[t]>"u"||e[t]===null}}function Xt(e){return typeof e=="number"}function CT(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Xt(o))return!1;for(let n=0;n<r.length;n+=1)if(Xt(r[n])&&o>r[n])return!0;return!1}}}function wT(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Xt(o))return!1;for(let n=0;n<r.length;n+=1)if(Xt(r[n])&&o>=r[n])return!0;return!1}}}function _T(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Xt(o))return!1;for(let n=0;n<r.length;n+=1)if(Xt(r[n])&&o<r[n])return!0;return!1}}}function OT(){return{matches:(e,t,r=[])=>{let o=e[t];if(!Xt(o))return!1;for(let n=0;n<r.length;n+=1)if(Xt(r[n])&&o<=r[n])return!0;return!1}}}function xT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o.indexOf(String(r[n]).toLowerCase())!==-1)return!0;return!1}}}function RT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o.indexOf(String(r[n]).toLowerCase())!==-1)return!1;return!0}}}function NT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o.startsWith(String(r[n]).toLowerCase()))return!0;return!1}}}function DT(){return{matches:(e,t,r=[])=>{if(Xe(e[t]))return!1;let o=String(e[t]).toLowerCase();for(let n=0;n<r.length;n+=1)if(!Xe(r[n])&&o.endsWith(r[n].toLowerCase()))return!0;return!1}}}var PT={[ye.EQUALS]:TT(),[ye.NOT_EQUALS]:vT(),[ye.EXISTS]:AT(),[ye.NOT_EXISTS]:bT(),[ye.GREATER_THAN]:CT(),[ye.GREATER_THAN_OR_EQUAL_TO]:wT(),[ye.LESS_THAN]:_T(),[ye.LESS_THAN_OR_EQUAL_TO]:OT(),[ye.CONTAINS]:xT(),[ye.NOT_CONTAINS]:RT(),[ye.STARTS_WITH]:NT(),[ye.ENDS_WITH]:DT()};function kT(e){return PT[e]}function Of(e){return typeof e>"u"}var MT="iam.id",LT="eventId",VT="id",UT="iam.eventType",xf="eventType",jT="type",BT=[UT,xf,jT],FT=[MT,VT],$T=(e,t,r)=>{switch(t){case ye.GREATER_THAN:return e>r;case ye.GREATER_THAN_OR_EQUAL_TO:return e>=r;case ye.LESS_THAN:return e<r;case ye.LESS_THAN_OR_EQUAL_TO:return e<=r;case ye.EQUALS:return e===r;case ye.NOT_EQUALS:return e!==r;default:return!1}},wf=(e,t)=>{for(let r=0;r<t.length;r+=1)if(!Of(e[t[r]]))return t[r];throw new Error("The event does not match the expected schema.")},ma=e=>{let t=structuredClone(e);return[[wf(t,BT),xf],[wf(t,FT),LT]].forEach(([r,o])=>{r!==o&&(t[o]=t[r],delete t[r])}),t};function HT(e,t,r,o=0,n=1/0){return e.reduce((i,s)=>{try{let a=r.generateEventHash(ma(s)),c=t.events[a];if(!c)return i;let{timestamps:d=[]}=c;return i+d.filter(l=>l>=o&&l<=n).length}catch{return i}},0)}function qT(e,t,r,o=0,n=1/0){try{let i=o,s=e.every(a=>{let c=r.generateEventHash(ma(a)),d=t.events[c];if(!d)return!1;let l=d.timestamps[0],u=l>=i&&l<=n;return i=l,u});return Number(s)}catch{return 0}}function GT(e,t,r,o=0,n=1/0){try{return e.reduce((i,s,a)=>{let c=r.generateEventHash(ma(s)),d=t.events[c];if(!d)return i;let l=d.timestamps.filter(u=>u>=o&&u<=n).pop();return l&&l>i.timestamp?{index:a,timestamp:l}:i},{index:-1,timestamp:0}).index}catch{return-1}}function WT(e,t,r){let o=!0;for(let n=0;n<t.length;n+=1)o=o&&t[n].evaluate(e,r);return o}function YT(e,t,r){let o=!1;for(let n=0;n<t.length;n+=1)if(o=o||t[n].evaluate(e,r),o)return!0;return!1}function zT(e,t,r){return{version:e,rules:t,metadata:r}}function KT(e,t,r){return{key:r,execute:(o,n)=>e.evaluate(o,n)?t:[],toString:()=>`Rule{condition=${e}, consequences=${t}}`}}function da(e,t){return{evaluate:(r,o)=>t.evaluate(r,o),toString(){return`Condition{type=${e}, definition=${t}}`}}}function XT(e,t,r){return{id:e,type:t,detail:r}}function JT(e,t){return{evaluate:(r,o)=>bf.AND===e?WT(r,t,o):bf.OR===e?YT(r,t,o):!1}}function QT(e,t,r){return{evaluate:o=>{let n=kT(t);return n?n.matches(o,e,r):!1}}}function ZT(e,t,r,o,n,i){return{evaluate:(s,a)=>{let c;return Cf.MOST_RECENT===i?c=GT(e,s,a,o,n):Cf.ORDERED===i?c=qT(e,s,a,o,n):c=HT(e,s,a,o,n),$T(c,t,r)}}}function ev(e){let{key:t,matcher:r,values:o}=e;return QT(t,r,o)}function tv(e){let{logic:t,conditions:r}=e;return JT(t,r.map(Rf))}function rv(e){let{events:t,from:r,to:o,matcher:n,value:i,searchType:s}=e;return ZT(t,n,i,r,o,s)}function Rf(e){let{type:t,definition:r}=e;if(la.MATCHER===t){let o=ev(r);return da(t,o)}if(la.GROUP===t){let o=tv(r);return da(t,o)}if(la.HISTORICAL===t){let o=rv(r);return da(t,o)}throw new Error("Can not parse condition")}function ov(e){let{id:t,type:r,detail:o}=e;return XT(t,r,o)}function nv(e){let{condition:t,consequences:r,key:o}=e,n=Rf(t),i=r.map(ov);return KT(n,i,o)}function iv(e){return e?{provider:e.provider,providerData:Object.assign({},e.providerData)}:void 0}function sv(e){let{version:t,rules:r,metadata:o}=e,n=r.map(nv),i=iv(o);return zT(t,n,i)}var Nf="TGT",av="DEFAULT";function cv(e,t){return{provider:av,execute:r=>e.map(o=>o.execute(r,t)).filter(o=>o.length>0)}}function lv(e){let{providerData:t}=e;if(!t)throw new Error("Provider data is missing in metadata");let{identityTemplate:r,buckets:o}=t;if(!r)throw new Error("Identity template is missing in provider data");if(!o)throw new Error("Buckets is missing in provider data")}var dv="ECID";function uv(e){let{xdm:t}=e;if(!t)throw new Error("XDM object is missing in the context");let{identityMap:r}=t;if(!r)throw new Error("Identity map is missing in the XDM object");let o=r[dv];if(!o)throw new Error("ECID identity namespace is missing in the identity map");if(!Array.isArray(o)||o.length===0)throw new Error("ECID identities array is empty or not an array");let n=o[0].id;if(!n)throw new Error("ECID identity is missing in the identities array");return n}var mv="<key>",pv="<identity>";function fv(e,t,r){let{providerData:o}=r,{identityTemplate:n}=o;return n.replace(mv,t).replace(pv,e)}function Ev(e){return!Of(e)}function Df(e,t=r=>r[0]){let r={};return function(...n){let i=t(n);return Ev(r[i])||(r[i]=e(...n)),r[i]}}function Pr(e,t){let r=t&65535;return((t-r)*e|0)+(r*e|0)|0}function gv(e,t=0){let r,o=e.length,n=3432918353,i=461845907,s=t,a=o&-2;for(let c=0;c<a;c+=2)r=e.charCodeAt(c)|e.charCodeAt(c+1)<<16,r=Pr(r,n),r=(r&131071)<<15|r>>>17,r=Pr(r,i),s^=r,s=(s&524287)<<13|s>>>19,s=s*5+3864292196|0;return o%2===1&&(r=e.charCodeAt(a),r=Pr(r,n),r=(r&131071)<<15|r>>>17,r=Pr(r,i),s^=r),s^=o<<1,s^=s>>>16,s=Pr(s,2246822507),s^=s>>>13,s=Pr(s,3266489909),s^=s>>>16,s}var hv=Df(gv,e=>e.join("-")),ua=100;function yv(e,t){let r=hv(e),n=Math.abs(r)%t/t*ua;return Math.round(n*ua)/ua}var Iv=Df(yv);function Sv(e,t,r){return{allocation:Iv(e,t),...r}}function Tv(e){let t={};for(let r=0;r<e.length;r+=1){let o=e[r];o.key&&(t[o.key]||(t[o.key]=[]),t[o.key].push(o))}return t}function _f(e,t){return t.map(r=>r.execute(e)).filter(r=>r.length>0)}function vv(e,t){lv(t);let r=e.filter(i=>!i.key),o=Tv(e),{buckets:n}=t.providerData;return{provider:Nf,execute:i=>{let s=uv(i),a=_f(i,r),c=Object.keys(o),d=[];for(let l=0;l<c.length;l+=1){let u=c[l],m=o[u],p=fv(s,u,t),f=Sv(p,n,i),y=_f(f,m);d.push(...y)}return[...a,...d]}}}function Av(e,t,r){let{provider:o}=t;return o===Nf?vv(e,t):cv(e,r)}function Pf(e,t={generateEventHash:()=>{throw new Error("No hash function provided")}}){let{rules:r,metadata:o={}}=sv(e);return Av(r,o,t)}var kr=e=>{let t=structuredClone(e),r=Object.keys(t).sort().reduce((o,n)=>{let i=t[n];return i==null||i===""||(o+=`${n}:${i}`),o},"");return Xr(r)};var pa=e=>{let t=new Date;return t.setDate(t.getDate()-e),t};var fa="events";var Co={TYPE:"~type",SOURCE:"~source"},Ea={LIFECYCLE:"com.adobe.eventType.lifecycle",TRACK:"com.adobe.eventType.generic.track",EDGE:"com.adobe.eventType.edge",RULES_ENGINE:"com.adobe.eventType.rulesEngine"},ga={LAUNCH:"com.adobe.eventSource.applicationLaunch",REQUEST:"com.adobe.eventSource.requestContent"},kf="cjmiam",Mf="schema",Lf="insert",Vf="insertIfNotExists";var ha=(e=30,t=1e3)=>r=>{let o=Object.entries(r).reduce((i,[s,{timestamps:a=[]}])=>(a.forEach(c=>{i.push({key:s,timestamp:c})}),i),[]),n=pa(e);return o=o.filter(({timestamp:i})=>i>=n),o.sort((i,s)=>i.timestamp-s.timestamp),o=o.slice(-t),o.reduce((i,{key:s,timestamp:a})=>(i[s]||(i[s]={timestamps:[]}),i[s].timestamps.push(a),i),{})};var ya=e=>{let{_experience:t}=e||{};return!!t&&typeof t=="object"};var pr=e=>e?.scopeDetails?.activity?.id,Ia=e=>e?.scopeDetails?.decisionProvider;var Sa=(e,t)=>r=>{try{let o=e.getItem(t);return[JSON.parse(o),o.length]}catch{}return[r,0]},Ta=(e,t)=>r=>{e.setItem(t,JSON.stringify(r))},va=()=>{let e={};return{getItem:t=>t in e?e[t]:null,setItem:(t,r)=>{e[t]=r}}},Zn=e=>{e.clear()};var Uf=(e=[])=>Array.isArray(e)?e.flat(1/0):e;var jf=(e,t,r)=>{let{html:o,mobileParameters:n}=r;return{schema:yt,data:{mobileParameters:n,webParameters:{},content:o,contentType:To},id:e}};var Bf=(e,t,r)=>{let{schema:o,data:n,id:i}=r;return{schema:o,data:n,id:i||e}};var Ff={[kf]:jf,[Mf]:Bf},$f=()=>e=>{let{id:t,type:r,detail:o}=e;return typeof Ff[r]=="function"?Ff[r](t,r,o):o};var wv=e=>{let{schema:t,data:r}=e;if(t===Eo)return!0;if(t!==ar)return!1;try{let o=typeof r.content=="string"?JSON.parse(r.content):r.content;return o&&Object.prototype.hasOwnProperty.call(o,"version")&&Object.prototype.hasOwnProperty.call(o,"rules")}catch{return!1}},Hf=(e,t)=>{let r=$f(),o=pr(e),n=[],i=a=>{let{data:c={},schema:d}=a,l=d===Eo?c:c.content;l&&n.push(Pf(typeof l=="string"?JSON.parse(l):l,{generateEventHash:kr}))},s=a=>{let d=t.getEvent(cr,o)?.timestamps[0],l=Uf(n.map(u=>u.execute(a))).map(r).map(u=>{let p=t.addEvent({eventType:le.TRIGGER,eventId:o}).timestamps[0];return{...u,data:{...u.data,qualifiedDate:p,displayedDate:d}}});return{...e,items:l}};return Array.isArray(e.items)&&e.items.filter(wv).forEach(i),{rank:e?.scopeDetails?.rank||1/0,evaluate:s,isEvaluable:n.length>0}};var qf=({eventRegistry:e})=>{let t={},r=i=>{let s=pr(i);if(!s)return;let a=Hf(i,e);a.isEvaluable&&(t[s]=a)};return{addPayload:r,addPayloads:i=>{i.forEach(r)},evaluate:(i={})=>Object.values(t).sort(({rank:a},{rank:c})=>a-c).map(a=>a.evaluate(i)).filter(a=>a.items.length>0)}};var Gf=e=>{let t=[];return e.forEach(r=>{let o=[];r.items.forEach(n=>{n.schema===pp?t.push({operation:n.data.operation,event:{eventId:n.data.content["iam.id"],eventType:n.data.content["iam.eventType"]}}):o.push(n)}),r.items=o}),t};var Wf=({lifecycle:e,eventRegistry:t})=>({renderDecisions:r=!1,propositions:o=[],event:n,personalization:i})=>{if(e){let s=Gf(o);t.addEventPayloads(s),e.onDecision({renderDecisions:r,propositions:o,event:n,personalization:i})}return{propositions:o}};var Yf=({storage:e,logger:t})=>{let r=e,o,n,i,s=u=>{r=u;let m=Sa(r,fa);o=Ta(r,fa),[n,i]=m({}),i>2097152&&(n=ha()(n),o(n))};s(e);let a=(u={eventType:null,eventId:null},m=Lf)=>{let{eventType:p,eventId:f}=u;if(!p||!f)return;let y=kr(u);if(m===Vf&&n[y])return;(!n[y]||!Array.isArray(n[y].timestamps))&&(n[y]={timestamps:[]});let v=new Date().getTime();return n[y].timestamps.push(v),n[y].timestamps.sort(),t.info("[Event History] Added event for",u,"with hash",y,"and timestamp",v),o(n),n[y]};return{addExperienceEdgeEvent:u=>{let{xdm:m}=u.getContent();if(!ya(m))return;let{_experience:{decisioning:{propositionEventType:p={},propositionAction:{id:f}={},propositions:y=[]}={}}}=m;Object.keys(p).filter(v=>p[v]===1).forEach(v=>{y.forEach(A=>{Ia(A)===bo&&a({eventId:pr(A),eventType:v,action:f})})})},addEvent:a,addEventPayloads:(u=[])=>u.map(({operation:m,event:p})=>a(p,m)),getEvent:(u,m)=>{let p=kr({eventType:u,eventId:m});if(n[p])return n[p]},toJSON:()=>n,setStorage:s}};var zf=({eventRegistry:e,window:t,getBrowser:r})=>{let o=new Date().getTime(),n=()=>({name:r()}),i=()=>({title:t.title,url:t.url,...dn(t.url)}),s=()=>({url:t.referrer,...dn(t.referrer)}),a=()=>{let m=new Date,p=m.getTime();return{pageLoadTimestamp:o,currentTimestamp:p,currentDate:m.getDate(),"~state.com.adobe.module.lifecycle/lifecyclecontextdata.dayofweek":m.getDay()+1,"~state.com.adobe.module.lifecycle/lifecyclecontextdata.hourofday":m.getHours(),currentMinute:m.getMinutes(),currentMonth:m.getMonth(),currentYear:m.getFullYear(),pageVisitDuration:p-o,"~timestampu":p/1e3,"~timestampz":m.toISOString()}},c=()=>{let m=t.height,p=t.width,f=t.scrollY,y=t.scrollX;return{height:m,width:p,scrollY:f,scrollX:y}},d={browser:n(),page:i(),referringPage:s()},l=()=>({...d,...a(),window:c(),"~sdkver":Or});return{getContext:(m={})=>{let p={...l(),...m};return{...Qn(p),events:e.toJSON()}}}};var Ov=(e,...t)=>t,xv=(e,...t)=>!0,Rv=()=>{let e=Ov,t=xv,r=0,o={},n=u=>()=>{delete o[u]};return{add:(u,m=void 0)=>typeof u!="function"?()=>{}:(r+=1,o[r]={callback:u,params:m},{id:r,unsubscribe:n(r)}),emit:(...u)=>{Object.values(o).forEach(({callback:m,params:p})=>{let f=e(p,...u);t(p,...f)&&m(...f)})},emitOne:(u,...m)=>{if(!u||!o[u])return;let{callback:p,params:f}=o[u],y=e(f,...m);t(f,...y)&&p(...y)},hasSubscriptions:()=>Object.keys(o).length>0,setEmissionPreprocessor:u=>{typeof u=="function"&&(e=u)},setEmissionCondition:u=>{typeof u=="function"&&(t=u)}}},Kf=Rv;var Nv=({options:e})=>w({surfaces:ne(R()).uniqueItems(),schemas:ne(R()).uniqueItems(),callback:it().required()}).noUnknownFields()(e),Dv=e=>{let{id:t,scope:r,scopeDetails:o}=e;return{id:t,scope:r,scopeDetails:o}},Xf=({collect:e})=>{let t=()=>{},r=new Set,o=u=>[le.INTERACT,le.DISMISS].includes(u),n=(u,m,p)=>{let f=[u,m].join("-"),y=!p.has(f)&&(o(u)||!r.has(f));return p.add(f),r.add(f),y},i=(u,m=[])=>{if(!(m instanceof Array)||!Object.values(le).includes(u))return Promise.resolve();let p=[],f=new Set;return m.forEach(y=>{let v=Dv(y);n(u,v.id,f)&&p.push(v)}),p.length>0?e({decisionsMeta:p,eventType:yp(u),documentMayUnload:!0}):Promise.resolve()},s=Kf(),a=(u,m)=>{let{surfacesFilter:p,schemasFilter:f}=u;return[{propositions:m.filter(v=>p?p.includes(v.scope):!0).map(v=>{let{items:A=[]}=v;return{...v,items:A.filter(b=>f?f.includes(b.schema):!0)}}).filter(v=>v.items.length>0)},i]};return s.setEmissionPreprocessor(a),{refresh:u=>{t=m=>{if(m){s.emitOne(m,u);return}s.emit(u)},t()},command:{optionsValidator:u=>Nv({options:u}),run:({surfaces:u,schemas:m,callback:p})=>{let{id:f,unsubscribe:y}=s.add(p,{surfacesFilter:u instanceof Array?u:void 0,schemasFilter:m instanceof Array?m:void 0});return t(f),Promise.resolve({unsubscribe:y})}}}};var Pv=({options:e})=>w({renderDecisions:X(),personalization:w({decisionContext:w({})})}).noUnknownFields()(e),Jf=({contextProvider:e,decisionProvider:t})=>({optionsValidator:n=>Pv({options:n}),run:({renderDecisions:n,decisionContext:i,applyResponse:s})=>s({renderDecisions:n,propositions:t.evaluate(e.getContext(i))})});var Aa=({config:e,eventManager:t,createNamespacedStorage:r,consent:o,getBrowser:n,logger:i})=>{let{orgId:s,personalizationStorageEnabled:a}=e,c=qn({eventManager:t,mergeDecisionsMeta:Dr}),d=r(`${rt(s)}.decisioning.`);a||Zn(d.persistent);let l=Yf({storage:va(),logger:i}),u=qf({eventRegistry:l}),m=zf({eventRegistry:l,window,getBrowser:n}),p=Jf({contextProvider:m,decisionProvider:u}),f=Xf({collect:c}),y;return{lifecycle:{onDecision({propositions:v}){f.refresh(v)},onComponentsRegistered(v){y=Wf({lifecycle:v.lifecycle,eventRegistry:l}),a&&o.awaitConsent().then(()=>{l.setStorage(d.persistent)}).catch(()=>{d&&Zn(d.persistent)})},onBeforeEvent({event:v,renderDecisions:A,personalization:b={},onResponse:N=z}){let{decisionContext:k={}}=b;N(Af({renderDecisions:A,decisionProvider:u,applyResponse:y,event:v,personalization:b,decisionContext:m.getContext({[Co.TYPE]:Ea.EDGE,[Co.SOURCE]:ga.REQUEST,...k})}))},onBeforeRequest({request:v}){let A=v.getPayload().toJSON(),{events:b=[]}=A;b.length!==0&&b.forEach(N=>l.addExperienceEdgeEvent(N))}},commands:{evaluateRulesets:{run:({renderDecisions:v,personalization:A={}})=>{let{decisionContext:b={}}=A;return p.run({renderDecisions:v,decisionContext:{[Co.TYPE]:Ea.RULES_ENGINE,[Co.SOURCE]:ga.REQUEST,...b},applyResponse:y})},optionsValidator:p.optionsValidator},subscribeRulesetItems:f.command}}};Aa.namespace="RulesEngine";Aa.configValidators=w({personalizationStorageEnabled:X().default(!1)});var Qf=Aa;var Zf=w({streamingMedia:w({channel:R().nonEmpty().required(),playerName:R().nonEmpty().required(),appVersion:R(),mainPingInterval:Ee().minimum(10).maximum(50).default(10),adPingInterval:Ee().minimum(1).maximum(10).default(10)}).noUnknownFields()});var eE=({options:e})=>jt([w({playerId:R().required(),getPlayerDetails:it().required(),xdm:w({mediaCollection:w({sessionDetails:w(ze()).required()})}),edgeConfigOverrides:De}).required(),w({xdm:w({mediaCollection:w({playhead:Ee().required(),sessionDetails:w(ze()).required()})}),edgeConfigOverrides:De}).required()],"an object with playerId, getPlayerDetails and xdm.mediaCollection.sessionDetails, or an object with xdm.mediaCollection.playhead and xdm.mediaCollection.sessionDetails")(e);var tE=({options:e})=>jt([w({playerId:R().required(),xdm:w({eventType:st(...Object.values(ce)).required(),mediaCollection:w(ze())}).required()}).required(),w({xdm:w({eventType:st(...Object.values(ce)).required(),mediaCollection:w({playhead:Ee().integer().required(),sessionID:R().required()}).required()}).required()}).required()],"Error validating the sendMediaEvent command options.")(e);var rE=({config:e,trackMediaEvent:t,trackMediaSession:r,mediaResponseHandler:o})=>({lifecycle:{onBeforeEvent({mediaOptions:n,onResponse:i=z}){if(!n)return;let{legacy:s,playerId:a,getPlayerDetails:c}=n;s||i(({response:d})=>o({playerId:a,getPlayerDetails:c,response:d}))}},commands:{createMediaSession:{optionsValidator:n=>eE({options:n}),run:r},sendMediaEvent:{optionsValidator:n=>tE({options:n}),run:n=>e.streamingMedia?t(n):Promise.reject(new Error("Streaming media is not configured."))}}});var ba=({config:e,logger:t,eventManager:r,sendEdgeNetworkRequest:o,consent:n})=>{let i=wn({config:e}),s=Cn({config:e,eventManager:r,logger:t,consent:n,sendEdgeNetworkRequest:o,setTimestamp:_r(()=>new Date)}),a=_n({mediaSessionCacheManager:i,mediaEventManager:s,config:e}),c=On({config:e,mediaEventManager:s,mediaSessionCacheManager:i}),d=Rn({mediaSessionCacheManager:i,config:e,trackMediaEvent:a});return rE({config:e,trackMediaEvent:a,mediaEventManager:s,mediaResponseHandler:d,trackMediaSession:c})};ba.namespace="Streaming media";ba.configValidators=Zf;var oE=ba;var ei="advertising";var ti="_les_lsc",ri="lastConversionTime",oi="displayClickCookieExpires",Ca="rampIdExpires",nE="lastConversionTimeExpires",iE="s_kwcid",sE="ef_id",Je="surferId",Qe="rampId",Ot="id5Id",aE="";var cE="advertising.enrichment_ct",ni="advertising.enrichment";var lE="trackingCode",dE="trackingIdentities",uE="https://www.everestjs.net/static/id5-api.js",mE="pixel.everesttech.net",pE="1";var fE="www.everestjs.net",EE="gsurfer";var gE="Processing ad conversion";var hE="Unable to obtain ad identity",yE="Ad conversion submitted successfully",ii="Ad conversion submission failed",wo="ev_lcc";async function wa({eventManager:e,cookieManager:t,adConversionHandler:r,logger:o,skwcid:n,efid:i}){o.info(gE,{skwcid:n,efid:i});let s=e.createEvent();if(typeof n<"u"&&typeof i<"u"&&n.startsWith("AL!")){let c={click_time:Date.now(),...typeof n<"u"&&{skwcid:n},...typeof i<"u"&&{efid:i}};t.setValue(ti,c)}let a={_experience:{adcloud:{conversionDetails:{...typeof n<"u"&&{[lE]:n},...typeof i<"u"&&{[dE]:i}}}},eventType:cE,timestamp:new Date().toISOString()};s.setUserXdm(a),t.setValue(ri),t.setValue(nE,Date.now()+91*24*60*60*1e3);try{return await r.trackAdConversion({event:s})}catch(c){throw o.error(ii,c),c}}var Mr="",IE="",_o=null,Mv=e=>{document.body?document.body.appendChild(e):window.addEventListener("load",()=>{document.body.appendChild(e)},!1)},Lv=e=>ue("iframe",{src:e},{height:0,width:0,frameBorder:0,style:{display:"none"}},[]),Vv=e=>window.addEventListener("message",e,!1),Uv=e=>window.removeEventListener("message",e,!1),jv=()=>_o||(_o=new Promise((e,t)=>{setTimeout(()=>{let r=document.location.protocol==="https:"?"https:":"http:",o=new URLSearchParams({google:"__EFGCK__",gsurfer:"__EFGSURFER__",imsId:"__EFIMSORGID__",is_fb_cookie_synced:"__EFFB__",optout:"__EFOPTOUT__",throttleCookie:"__EFSYNC__",time:"__EFTIME__",ev_lcc:"__LCC__"}),n=`${r}//www.everestjs.net/static/pixel_details.html#${o.toString()}`,i=new URLSearchParams({ev_gb:"0",url:n}),s=`${r}//${mE}/${pE}/gr?${i.toString()}`,a=Lv(s);Mv(a),Vv(function d(l){if(l.origin.includes(fE))try{let u=l.data,m=u.indexOf("#");if(m===-1){e({surferId:null,displayClickCookie:null});return}let p=new URLSearchParams(u.substring(m+1)),f,y,v=p.get(EE);v&&(f=v);let A=p.get(wo);A&&A!=="__LCC__"&&(y=A),Uv(d),f?(Mr=f,IE=y,e({surferId:Mr,displayClickCookie:IE})):e({surferId:null,displayClickCookie:null})}catch(u){t(u)}finally{_o=null}})},5e3)}),_o),Bv=function(t,r,o=!0){if(r&&!Jr({getBrowser:r})())return Promise.resolve(null);if(Mr&&Mr!=="")return Promise.resolve(Mr);if(t){let n=t.getValue(Je);if(n)return Mr=n,Promise.resolve(n)}return o?jv().then(n=>(t&&n&&(n.surferId&&t.setValue(Je,n.surferId),n.displayClickCookie&&(t.setValue(wo,n.displayClickCookie),t.setValue(oi,Date.now()+15*60*1e3))),n.surferId)):Promise.resolve(null)},si=Bv;var Lr={MAX_COUNT:15,MAX_TIME_MS:3e4,DELAY_BASE_MS:500,MAX_DELAY_MS:5e3,SHORT_TIMEOUT_MS:2e3},W={rampIdEnv:void 0,rampIdCallInitiated:!1,inProgressRampIdPromise:null,scriptLoadingInitiated:!1,envelopeRetrievalInProgress:!1},_a=(e,t,r,o)=>{let n;try{n=JSON.parse(e).envelope}catch{n=e}n&&!W.rampIdCallInitiated?(W.rampIdCallInitiated=!0,W.rampIdEnv=n,W.envelopeRetrievalInProgress=!1,W.inProgressRampIdPromise=null,r.setValue(Qe,W.rampIdEnv),r.setValue(Ca,Date.now()+48*60*60*1e3),t(W.rampIdEnv)):(o.warn("Invalid RampID envelope received",{envelope:n}),W.envelopeRetrievalInProgress=!1)},Fv=(e,t,r,o)=>{let n=Lr.MAX_COUNT,i=1,s=0,a=()=>{if(W.rampIdEnv)return;if(s>Lr.MAX_TIME_MS){o.error("Maximum retry time exceeded"),W.envelopeRetrievalInProgress=!1,t(new Error("Failed to retrieve RampID - timeout")),W.inProgressRampIdPromise=null;return}if(n===0){o.error("Maximum retries exceeded"),W.envelopeRetrievalInProgress=!1,t(new Error("Failed to retrieve RampID after maximum retries")),W.inProgressRampIdPromise=null;return}let c=Math.min(Lr.DELAY_BASE_MS*i,Lr.MAX_DELAY_MS);setTimeout(()=>{s+=c,n-=1,i+=1,typeof window.ats<"u"&&window.ats!==null&&!W.rampIdEnv&&!W.envelopeRetrievalInProgress?(W.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(d=>{_a(d,e,r,o),W.rampIdEnv||a()},()=>{o.warn("Failed to retrieve envelope"),W.envelopeRetrievalInProgress=!1,a()})):a()},c)};a()},$v=(e,t,r,o=!1)=>{if(W.inProgressRampIdPromise)return W.inProgressRampIdPromise;let n=o?Lr.SHORT_TIMEOUT_MS:Lr.MAX_TIME_MS,i=!1,s=new Promise((c,d)=>{Kr(e,{onLoad:()=>{typeof window.ats<"u"&&!W.envelopeRetrievalInProgress&&(W.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(l=>{l?i||_a(l,c,t,r):(W.envelopeRetrievalInProgress=!1,window.addEventListener("lrEnvelopePresent",()=>{W.envelopeRetrievalInProgress||i||(W.envelopeRetrievalInProgress=!0,window.ats.retrieveEnvelope().then(u=>{i||_a(u,c,t,r)},u=>{i||(r.error("Failed to retrieve envelope after event",u),W.envelopeRetrievalInProgress=!1,d(u),W.inProgressRampIdPromise=null)}))}))}).catch(l=>{i||(r.error("Error retrieving envelope",l),W.envelopeRetrievalInProgress=!1,d(l),W.inProgressRampIdPromise=null)})),Fv(l=>{i||c(l)},l=>{i||d(l)},t,r)},onError:l=>{i||d(l),W.inProgressRampIdPromise=null}})}),a=new Promise(c=>{setTimeout(()=>{i=!0,c(null)},n)});return W.inProgressRampIdPromise=Promise.race([s,a]).finally(()=>{W.inProgressRampIdPromise=null}),W.inProgressRampIdPromise},ai=(e,t,r,o=!0,n=!1)=>{if(W.rampIdEnv)return Promise.resolve(W.rampIdEnv);if(r){let i=r.getValue(Qe),s=r.getValue(Ca);if(i&&s&&s>Date.now())return W.rampIdEnv=i,Promise.resolve(i)}return!o||t==null?Promise.resolve(null):$v(t,r,e,n)};var Ze="",Oo=null,Hv=2e3,qv=3e4,Gv=(e,t,r)=>{if(e=Math.floor(Number(e)),Oo)return Oo;let o=t?Hv:qv,n=!1,i=new Promise((a,c)=>{if(!e){r.error("Missing partner ID"),c(new Error("ID5 partner ID is required"));return}let d=()=>{try{if(typeof window.ID5>"u"){c(new Error("ID5 object not available after script load"));return}Ze=window.ID5.init({partnerId:e}).getUserId();let u=m=>{n||a(m)};Ze?u(Ze):window.ID5.init({partnerId:e}).onAvailable(function(p){Ze=p.getUserId(),Ze?u(Ze):window.ID5.init({partnerId:e}).onAvailable(function(y){Ze=y.getUserId(),Ze?u(Ze):(r.error("Failed to get ID5 ID after all retries"),u(null))})},1e3)}catch(l){r.error("Error during ID5 initialization",l),c(l)}};typeof window.ID5<"u"?d():Kr(uE,{onLoad:d,onError:l=>{r.error("Script loading failed",l),c(l)}})}),s=new Promise(a=>{setTimeout(()=>{n=!0,a(null)},o)});return Oo=Promise.race([i,s]).finally(()=>{Oo=null}),Oo},ci=function(t,r,o=!0,n=!1){return Ze&&Ze!==""?Promise.resolve(Ze):o?Gv(r,n,t).then(i=>i).catch(i=>{throw t.error("Failed to get ID5 ID",i),i}):Promise.resolve(null)};var li=()=>{let e=Ye.parse(window.location.search);return{skwcid:e[iE],efid:e[sE]}};var Oa=e=>!e||!Array.isArray(e)?aE:e.filter(t=>t&&t.enabled===!0&&t.advertiserId).map(t=>t.advertiserId).join(", "),di=(e,t,r,o,n=!1)=>{let i=r.getValue(ti),s=null,a=r.getValue(oi);a&&a>Date.now()&&(s=r.getValue(wo));let c={advertising:{...i?.click_time&&{lastSearchClick:i.click_time},...s&&{lastDisplayClick:s},stitchIds:{...e[Je]&&{surferId:e[Je]},...e[Ot]&&{id5:e[Ot]},...e[Qe]&&{rampIdEnv:e[Qe]},ipAddress:"DUMMY_IP_ADDRESS"},advIds:Oa(o.advertiserSettings),...n&&{eventType:ni}}};return t.mergeQuery(c),t},SE=(e,t)=>Object.entries(e).some(([r])=>!t[r]),TE=(e,t,r,o)=>{let n=Date.now();e.forEach(i=>{t[i]=!0,r.setValue(`${i}_last_conversion`,n),o.info(yE.replace("{0}",i))}),r.setValue(ri,n)},Pe=(e,t)=>{let r=Date.now(),o=30*60*1e3,n=t.getValue(`${e}_last_conversion`);return!!(n&&r-n<o)};var Wv=(e,t,r,o)=>{let n={};return Pe(Je,r)||(n.surferId=si(r,o,!0).catch(()=>null)),t.id5PartnerId&&t.dspEnabled&&!Pe(Ot,r)&&(n.id5Id=ci(e,t.id5PartnerId).catch(()=>null)),t.rampIdJSPath&&t.dspEnabled&&!Pe(Qe,r)&&(n.rampId=ai(e,t.rampIdJSPath,r,!0).catch(()=>null)),n},vE=Wv;async function xa({eventManager:e,cookieManager:t,logger:r,componentConfig:o,adConversionHandler:n,getBrowser:i}){let s={},a={},c=async()=>{if(!SE(s,a))return null;let u=Object.keys(s);try{let m=di(s,e.createEvent(),t,o,!0),p={eventType:ni,timestamp:new Date().toISOString()};m.setUserXdm(p);let f=await n.trackAdConversion({event:m});return TE(u,a,t,r),f}catch(m){return r.error(ii,m),null}},d=vE(r,o,t,i);if(Object.keys(d).length===0)return[];let l=Object.entries(d).map(([u,m])=>m.then(p=>{if(p)return s[u]=p,c()}).catch(p=>(r.error(hE.replace("{0}",u),p),null)));return Promise.allSettled(l)}var AE=({eventManager:e,cookieManager:t,adConversionHandler:r,logger:o,componentConfig:n,getBrowser:i})=>{let s=n?.advertiserSettings?Oa(n.advertiserSettings):"";return async()=>{let{skwcid:a,efid:c}=li(),d=!!(a||c);try{if(d)return wa({eventManager:e,cookieManager:t,adConversionHandler:r,logger:o,skwcid:a,efid:c});s&&xa({eventManager:e,cookieManager:t,logger:o,componentConfig:n,adConversionHandler:r,getBrowser:i}).catch(l=>o.error("Error in view through:",l))}catch(l){o.error("Error in sendAdConversion:",l)}}};var Yv=e=>![En,ao].includes(e?.handleAdvertisingData?.toLowerCase()),zv=e=>e?.handleAdvertisingData?.toLowerCase()===ao;async function Ra({cookieManager:e,logger:t,event:r,componentConfig:o,advertising:n,getBrowser:i}){let{skwcid:s,efid:a}=li(),c=!!(s&&a);if(!(Yv(n)||c||Pe(Je,e)&&Pe(Ot,e)&&Pe(Qe,e)))try{let d=zv(n),l=null;(!i||i()!==br)&&(l=ai(t,o.rampIdJSPath,e,d,d));let[u,m,p]=await Promise.allSettled([si(e,i,d),ci(t,o.id5PartnerId,d,d),l]),f={};if(u.status==="fulfilled"&&u.value&&!Pe(Je,e)&&(f.surferId=u.value),m.status==="fulfilled"&&m.value&&!Pe(Ot,e)&&(f.id5Id=m.value),p.status==="fulfilled"&&p.value&&!Pe(Qe,e)&&(f.rampId=p.value),Object.keys(f).length===0&&(Pe(Je,e)||Pe(Ot,e)||Pe(Qe,e)))return;di(f,r,e,o)}catch(d){t.error("Error in onBeforeSendEvent hook:",d)}}var bE=({logger:e,config:t,eventManager:r,cookieManager:o,adConversionHandler:n,getBrowser:i})=>{let s=t.advertising,a=AE({eventManager:r,cookieManager:o,adConversionHandler:n,logger:e,componentConfig:s,getBrowser:i});return{lifecycle:{onComponentsRegistered(){return a()},onBeforeEvent:({event:c,advertising:d={}})=>Ra({cookieManager:o,logger:e,event:c,componentConfig:s,advertising:d,getBrowser:i})}}};var CE=w({advertising:w({id5PartnerId:R(),rampIdJSPath:R(),dspEnabled:X(),advertiserSettings:ne(w({advertiserId:R().required(),enabled:X().required()}).noUnknownFields())}).noUnknownFields()});var wE=({sendEdgeNetworkRequest:e,consent:t,createDataCollectionRequest:r,createDataCollectionRequestPayload:o,logger:n})=>({trackAdConversion:({event:s})=>{let a=o();a.addEvent(s),s.finalize();let c=r({payload:a});return t.awaitConsent().then(()=>e({request:c}).then(()=>({success:!0})).catch(d=>{throw n.error("Failed to send ad conversion event",d),d}))}});var _E=({orgId:e,logger:t})=>{let r=vt({logger:t,cookieJar:_e}),o=(u,m=!0)=>m?ot(e,u):u,n=(u=30)=>new Date(Date.now()+u*60*1e3),i=u=>{try{if(u?.startsWith("%7B")||u?.startsWith("{"))return JSON.parse(decodeURIComponent(u))}catch{}return u},s=u=>typeof u=="object"&&u!==null?encodeURIComponent(JSON.stringify(u)):u,a=(u,m=!0)=>{try{let p=o(u,m),f=r.get(p);return f?i(f):null}catch(p){return t.error(`Error reading cookie: ${u}`,p),null}},c=(u,m,p={},f=!0)=>{try{let y=o(u,f),v=s(m);return r.set(y,v,p),!0}catch(y){return t.error(`Error writing cookie: ${u}`,y),!1}};return{setValue:(u,m,p={})=>{let y={...a(ei)||{},[u]:m};return c(ei,y,{expires:n(527040),...p})},getValue:u=>(a(ei)||{})[u]}};var Na=({logger:e,config:t,eventManager:r,sendEdgeNetworkRequest:o,consent:n,getBrowser:i})=>{let s=_E({orgId:t.orgId,logger:e}),a=wE({eventManager:r,sendEdgeNetworkRequest:o,consent:n,createDataCollectionRequest:mo,createDataCollectionRequestPayload:Ct,logger:e});return bE({logger:e,config:t,eventManager:r,cookieManager:s,adConversionHandler:a,getBrowser:i})};Na.namespace="Advertising";Na.configValidators=CE;var OE=Na;var xE=async({vapidPublicKey:e,window:t})=>{if(!("serviceWorker"in t.navigator))throw new Error("Service workers are not supported in this browser.");if(!("PushManager"in t)||!("Notification"in t))throw new Error("Push notifications are not supported in this browser.");if(t.Notification.permission!=="granted")throw new Error("The user has not given permission to send push notifications.");let o=await t.navigator.serviceWorker.getRegistration();if(!o)throw new Error("No service worker registration was found.");if(!e)throw new Error("No VAPID public key was provided.");let n={userVisibleOnly:!0,applicationServerKey:Wr(e)};try{let i=await o.pushManager.subscribe(n);return{endpoint:i.endpoint,keys:{p256dh:Qo(new Uint8Array(i.getKey("p256dh")),{urlSafe:!0}),auth:Qo(new Uint8Array(i.getKey("auth")),{urlSafe:!0})}}}catch(i){let s=await o.pushManager.getSubscription();if(!s||!await s.unsubscribe())throw i;return xE({vapidPublicKey:e,window:t})}},RE=xE;var NE=({payload:e})=>at({payload:e,getAction(){return"interact"},getUseSendBeacon(){return!1}});var DE=async({ecid:e,eventManager:t,serializedPushSubscriptionDetails:r,appId:o})=>{let n=t.createEvent();n.setUserData({pushNotificationDetails:[{appID:o,token:r,platform:"web",denylisted:!1,identity:{namespace:{code:"ECID"},id:e}}]}),n.finalize();let i=Ct();return i.addEvent(n),i};var PE="alloyPushNotifications";var xo="config",Da="alloyConfig";async function Ro(e,t){try{let r=await Ji(PE,1,i=>{i.objectStoreNames.contains(xo)||i.createObjectStore(xo,{keyPath:"id"})}),n={...await Qi(r,xo,Da)||{},...e,id:Da,timestamp:Date.now()};await Zi(r,xo,n),r.close(),t.info("Successfully saved web SDK config to IndexedDB",n)}catch(r){t.error("Failed to save config to IndexedDB",{error:r})}}var kE="subscriptionDetails",ME=async({config:{vapidPublicKey:e,appId:t},storage:r,logger:o,sendEdgeNetworkRequest:n,consent:i,eventManager:s,identity:a,window:c})=>{await a.awaitIdentity();let d=a.getEcidFromCookie(),l=await RE({vapidPublicKey:e,window:c}),u=JSON.stringify(to(l)),m=`${d}${u}`;if(m===r.getItem(kE)){o.info("Subscription details have not changed. Not sending to the server.");return}r.setItem(kE,m);let p=await DE({eventManager:s,ecid:d,serializedPushSubscriptionDetails:u,appId:t}),f=NE({payload:p});await i.awaitConsent(),await n({request:f}),await Ro({ecid:d},o)};var LE=({orgId:e,pushNotifications:{vapidPublicKey:t,appId:r,trackingDatasetId:o}={vapidPublicKey:void 0,appId:void 0,trackingDatasetId:void 0}})=>e&&t&&r&&o,Pa=({createNamespacedStorage:e,eventManager:t,config:r,logger:o,consent:n,identity:i,getBrowser:s,sendEdgeNetworkRequest:a})=>({lifecycle:{async onComponentsRegistered(){if(LE(r)){let{datastreamId:c,edgeDomain:d,edgeBasePath:l,pushNotifications:{trackingDatasetId:u}}=r;await Ro({datastreamId:c,edgeDomain:d,edgeBasePath:l,datasetId:u,browser:s()},o)}}},commands:{sendPushSubscription:{run:async()=>{if(!LE(r))throw new Error("Push notifications module is not configured.");let{orgId:c,pushNotifications:{vapidPublicKey:d,appId:l}={vapidPublicKey:void 0,appId:void 0}}=r||{},u=e(`${rt(c)}.pushNotifications.`);return ME({config:{vapidPublicKey:d,appId:l},storage:u.persistent,logger:o,sendEdgeNetworkRequest:a,consent:n,eventManager:t,identity:i,window})},optionsValidator:w({}).noUnknownFields()}}});Pa.namespace="Push Notifications";Pa.configValidators=w({pushNotifications:w({vapidPublicKey:R().required(),appId:R().required(),trackingDatasetId:R().required()}).noUnknownFields()});var VE=Pa;var{console:Qv}=window,Zv=tr(window),eA=(e={})=>{let t=w({name:R().default("alloy"),monitors:ne(w({})).default([]),components:ne(it())}).noUnknownFields(),{name:r,monitors:o,components:n}=t(e),i=fs({console:Qv,locationSearch:window.location.search,createLogger:Is,instanceName:r,createNamespacedStorage:Zv,getMonitors:vs.bind(null,o)}),s=tm({instanceName:r,logController:i,components:n});return i.logger.logOnInstanceCreated({instance:s}),s},UE=(e={})=>{let t=w({name:R().default("alloy"),monitors:ne(w({})).default([])}).noUnknownFields(),{name:r,monitors:o}=t(e);return eA({name:r,monitors:o,components:Object.values(ka)})};import{getCookieConsentValidatorInstance as tA}from"@amzn/awsmcc";var Ma="custom_awsm_acslibs_on-consent-changed",jE=()=>tA({onConsentChanged:t=>{let r=new CustomEvent(Ma,{detail:{consent:t}});window.dispatchEvent(r)}}),BE=e=>{let t=e._shortbread.getConsentCookie(),r=o=>{let n={functional:"f",essential:"e",performance:"p",advertising:"a",ccba:"ccba"};return t&&o in n&&o in t?`${n[o]}:${t[o]?"1":"0"}`:""};return t?Object.keys(t).reduce((o,n)=>o.length?`${o}|${r(n)}`:`${r(n)}`,""):""};var La=e=>{let t=e.indexOf("=");if(t===-1)return[e.trim(),""];let r=e.slice(0,t).trim(),o=e.slice(t+1).trim();return[r,o]},FE=e=>{let t=document.cookie.split(";");for(let r of t){let[o,n]=La(r);if(o===e&&n)return n}return null};var $E=()=>FE("regStatus");var HE=()=>{let e=$E();return e?{status:e}:null};var ui=(e,t,r,o)=>{let i=e?.querySelector("html")?.getAttribute("lang"),s=e?.title,a=t?.href||t,c=e?.referrer,d,l,u=HE();return r&&(d=BE(r),l=r._shortbread.getConsentCookie()?.ccba?"1":"0"),{advertisementId:o,cookieConsent:d,ccba:l,pageLocale:i,pageTitle:s,pageUrl:a,pageReferrer:c,...u&&{registration:u}}},qE=e=>{let t=r=>{let o=r.elements.filter(n=>n.id);return o.length?{[r.namespace]:o.map(({id:n,isAuthenticated:i,primary:s})=>({id:n,authenticatedState:i?"authenticated":"ambiguous",primary:s}))}:null};return e.reduce((r,o)=>{let n=t(o);return n&&(r={...r,...n}),r},{})};var fr=class extends Error{};fr.prototype.name="InvalidTokenError";function rA(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let o=r.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function oA(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return rA(t)}catch{return atob(t)}}function GE(e,t){if(typeof e!="string")throw new fr("Invalid token specified: must be a string");t||(t={});let r=t.header===!0?0:1,o=e.split(".")[r];if(typeof o!="string")throw new fr(`Invalid token specified: missing part #${r+1}`);let n;try{n=oA(o)}catch(i){throw new fr(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(n)}catch(i){throw new fr(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}var WE=()=>{let e=null,t=null,r=document.cookie.split(";");for(let o of r){let n=iA(o);e=e||n;let i=sA(o);t=t||i}return e||t},nA=e=>{let t=e.split(":");return t[4]&&t[4].match("[0-9]+")?t[4]:null},iA=e=>{let t=/^__Secure-aws-session-id-/,r=e.split("=")[0].trim();if(t.test(r)){let o=r.split("-");return o[o.length-2]}return null},sA=e=>{let t="aws-userInfo-signed",[r,o]=La(e);if(r===t){let n=GE(o);return nA(n.arn)}return null};var YE=e=>!!new URLSearchParams(e.search).get("debugACSLibs");var mi=e=>({val:e?"y":"n"}),pi=(e,t)=>{let r=e(yr),o=e(Uo),n=t();return{hasAdobeConsent:r,hasAdvertisementConsent:o,hasCCBAConsent:n}},fi=(e,t,r)=>({collect:e,share:t&&r,personalize:t});var zE={"docs.aws.amazon.com":"download"};function aA(e){Object.keys(zE).forEach(t=>{e.URL.includes(t)&&(e.type=zE[t])})}function KE(e){return e?.xdm?.web?.webInteraction?.linkClicks&&aA(e.xdm?.web?.webInteraction),e}var XE=e=>e.eventType===we.SITE_OPTIMIZATION_CLICK||e.eventType===we.SITE_OPTIMIZATION_IMPRESSION,JE=e=>{let t=[],o=e.xdm?._aws?.mediaOperations;if(!o||typeof o!="object"||Array.isArray(o))return t.push("[Media Event] Content must be an object"),t;let n=o,i=["name","type","videoTitle"];for(let a of i)a in n||t.push(`[Media Event] Missing required property: '${a}'`);if(t.length)return t;for(let a of i)switch(a){case"name":case"videoTitle":typeof n[a]!="string"&&t.push(`[Media Event] Invalid '${a}': must be a string`);break;case"type":n[a]!=="video"&&t.push(`[Media Event] Invalid '${a}': must be 'video'`);break;default:t.push(`[Media Event] Unknown field validation: '${a}'`);break}let s=["description","duration","playerName","target","time","videoId","videoUrl"];for(let a of s)if(a in n)switch(a){case"description":case"playerName":case"target":case"videoId":case"videoUrl":typeof n[a]!="string"&&t.push(`[Media Event] Invalid '${a}': must be a string`);break;case"duration":case"time":typeof n[a]!="number"&&t.push(`[Media Event] Invalid '${a}': must be a number`);break;default:t.push(`[Media Event] Unknown field validation: '${a}'`);break}return t},QE=e=>{let t=[],o=e.xdm?._aws?.searchOperations;if(!o||typeof o!="object"||Array.isArray(o))return t.push("[Search Event] Content must be an object"),t;let n=o,i=["searchTerm","searchFilter","resultCount"];for(let s of i)s in n||t.push(`[Search Event] Missing required property: '${s}'`);if(t.length)return t;for(let s of i)switch(s){case"searchTerm":{typeof n[s]!="string"&&t.push(`[Search Event] Invalid '${s}': must be a string`);break}case"searchFilter":{let a=n[s];(!Array.isArray(a)||!a.every(c=>typeof c=="string"))&&t.push(`[Search Event] Invalid '${s}': must be an array of strings`);break}case"resultCount":{typeof n[s]!="number"&&t.push(`[Search Event] Invalid '${s}': must be a number`);break}default:{t.push(`[Search Event] Unknown field validation: '${s}'`);break}}return t};var ZE=(e,t)=>{switch(e){case we.MEDIA_EVENT:return{metricName:$.MEDIA_EVENT,handler:r=>{t.sendSingleEvent(r)},validator:JE};case we.SEARCH_EVENT:return{metricName:$.SEARCH_EVENT,handler:r=>{t.sendSingleEvent(r)},validator:QE};default:return{metricName:$.SEND_EVENT,handler:r=>{XE(r)?t.sendAnalyticsEvent(r):t.sendSingleEvent(r)}}}};var Ei=class{constructor(t,r){this.essentialConsent=!1;this.config=t,this.consentSet=!1,this.isInDebugMode=YE(document.location),this.loggerInstance=Nt(He),this.alloyClient=this.initAlloy(),this.cookieConsentInstance=r,this.configure(),this.listenCustomEvents();try{this.cookieConsentInstance?.hasConsent("aws-token-a")}catch(o){let n="AdvertisementIdCookieAccessError";o instanceof Error?this.loggerInstance.logMetricErrorCount(n,Mt(o)):this.loggerInstance.logMetricErrorCount(n,Ge)}}initAlloy(){try{let{name:t}=this.config,r=UE({name:t});return this.loggerInstance.logMetricCount(`${$.ALLOY_CLIENT_INIT}${K.SUCCESS}`),r}catch(t){let r=`${$.ALLOY_CLIENT_INIT}${K.ERROR}`;throw t instanceof Error?this.loggerInstance.logMetricErrorCount(r,Mt(t)):this.loggerInstance.logMetricErrorCount(r,Ge),new Ir("Alloy Client has initialization error")}}get isConsentSet(){return this.consentSet}get visitorId(){return this.visitorIdValue}set visitorId(t){this.visitorIdValue=t}get advertisementId(){return this.advertisementIdValue}set advertisementId(t){this.advertisementIdValue=t}get awsAccountId(){return this.awsAccountIdValue}set awsAccountId(t){this.awsAccountIdValue=t}configure(){let{dataStreamId:t,organizationId:r,defaultConsent:o,edgeBasePath:n,edgeDomain:i}=this.config;this.isInDebugMode&&(window.alloy=this.alloyClient),this.alloyClient("configure",{datastreamId:t,orgId:r,clickCollectionEnabled:!0,clickCollection:{internalLinkEnabled:!0,downloadLinkEnabled:!0,externalLinkEnabled:!0,eventGroupingEnabled:!1,sessionStorageEnabled:!1},context:["web","device","environment","placeContext","highEntropyUserAgentHints"],debugEnabled:this.isInDebugMode,defaultConsent:o,downloadLinkQualifier:".(pdf|msi|pdf|rss|xlsx|zip|pptx|exe|mysql)$",edgeBasePath:n,edgeDomain:i,idMigrationEnabled:!0,targetMigrationEnabled:!1,thirdPartyCookiesEnabled:!1,onBeforeEventSend:s=>{KE(s),s?.xdm&&(s.xdm._aws={...ui(document,location,this.cookieConsentInstance,this.advertisementId),...s.xdm._aws||{}}),this.addIdentityMapObject(s)}})}addIdentityMapObject(t){let r=this.visitorId,o=this.awsAccountId,n=!!o,i=[{namespace:"visitorID",elements:[{id:r,isAuthenticated:n,primary:!0}]},{namespace:"awsAccountID",elements:[{id:o||"",isAuthenticated:n,primary:!1}]}];n&&this.loggerInstance.logMetricCount(`${$.AUTHENTICATED_STATE}${K.SUCCESS}`);let s=qE(i);t.xdm=t.xdm||{},t.xdm.identityMap=t.xdm.identityMap?{...t.xdm.identityMap,...s}:s}getAwsAccountId(){let t=WE();t&&(this.awsAccountId=t)}async getD2CVisitorId(){if(!this.visitorId){let{stage:t}=this.config,r=Ni(t),o;try{o=new kc({cookieAllowed:this.essentialConsent,env:r})}catch(n){let i=`${$.D2C_VISITOR_ID_CLIENT_INIT}${K.ERROR}`;n instanceof Error?this.loggerInstance.logMetricErrorCount(i,n.message):this.loggerInstance.logMetricErrorCount(i,Ge)}if(o){let n=this.loggerInstance.logPerformanceMetric(`${$.GET_IDENTITY}${K.LATENCY}`);this.visitorId=await new Promise(i=>{o.getVisitorId({onSuccess:s=>{n.send(),this.loggerInstance.logMetricCount(`${$.GET_IDENTITY}${K.SUCCESS}`),i(s)},onError:s=>{n.send(),this.loggerInstance.logMetricErrorCount(`${$.GET_IDENTITY}${K.FAILURE}`,s.message),i(void 0)}})})}}return this.visitorId}async getECIDVisitorId(){return this.visitorId||this.alloyClient("getIdentity").then(t=>{this.visitorId=t?.identity?.ECID}),this.visitorId}async getD2CAdvertisementId(){let t="no AWSADID";if(!this.advertisementId){let{stage:r}=this.config,o=Ni(r),n=!!this.cookieConsentInstance?.hasConsent(Uo),i;try{i=new Mc({cookieAllowed:n,env:o})}catch(s){let a=`${$.D2C_AD_ID_CLIENT_INIT}${K.ERROR}`;s instanceof Error?this.loggerInstance.logMetricErrorCount(a,s.message):this.loggerInstance.logMetricErrorCount(a,Ge)}if(i){let s=this.loggerInstance.logPerformanceMetric(`${$.GET_IDENTITY}${K.LATENCY}`);this.advertisementId=await new Promise(a=>{i.getAdvertisementToken({onSuccess:c=>{s.send(),this.loggerInstance.logMetricCount(`${$.GET_IDENTITY}${K.SUCCESS}`),a(c.aid||this.advertisementId||t)},onError:c=>{s.send(),this.loggerInstance.logMetricErrorCount(`${$.GET_IDENTITY}${K.FAILURE}`,c.message),a(this.advertisementId||t)}})})}}return this.advertisementId}setConsent(t,r,o){let n={collect:mi(t)},i=r===void 0?{}:{share:mi(r)},s=o===void 0?{}:{personalize:{content:mi(o)}},a={consent:[{standard:"Adobe",version:"2.0",value:{...n,...i,...s}}]};this.essentialConsent=t;let c=this.loggerInstance.logPerformanceMetric(`${$.SET_CONSENT}${K.LATENCY}`);this.alloyClient("setConsent",a).then(()=>{c.send(),this.loggerInstance.logMetricCount(`${$.SET_CONSENT}${K.SUCCESS}`)}).catch(d=>{c.send(),this.loggerInstance.logMetricErrorCount(`${$.SET_CONSENT}${K.FAILURE}`,d.message)}),this.consentSet=!0}async sendSingleEvent({eventType:t,data:r,xdm:o,useBeacon:n=!1}){if(this.cookieConsentInstance&&!this.cookieConsentInstance.hasConsent(yr))return;let i={data:r,type:t,xdm:o,documentUnloading:n};this.addIdentityMapObject(i);let s=this.loggerInstance.logPerformanceMetric(`${$.SEND_EVENT}${K.LATENCY}`);return this.alloyClient("sendEvent",i).then(()=>{s.send(),this.loggerInstance.logMetricCount(`${$.SEND_EVENT}${K.SUCCESS}`)}).catch(a=>{s.send(),this.loggerInstance.logMetricErrorCount(`${$.SEND_EVENT}${K.FAILURE}`,a.message)})}async sendAnalyticsEvent({eventType:t,data:r,xdm:o,useBeacon:n=!1}){if(this.cookieConsentInstance&&!this.cookieConsentInstance.hasConsent(yr))return;let{overwriteDataStreamId:i}=this.config,s={data:r,type:t,xdm:o,documentUnloading:n,edgeConfigOverrides:{datastreamId:i}};this.addIdentityMapObject(s);let a=this.loggerInstance.logPerformanceMetric(`${$.SEND_EVENT}${K.LATENCY}`);return this.alloyClient("sendEvent",s).then(()=>{a.send(),this.loggerInstance.logMetricCount(`${$.SEND_EVENT}${K.SUCCESS}`)}).catch(c=>{a.send(),this.loggerInstance.logMetricErrorCount(`${$.SEND_EVENT}${K.FAILURE}`,c.message)})}async sendDecisionEvent(t,r){if(!r)return;this.addIdentityMapObject(t);let o=this.loggerInstance.logPerformanceMetric(`${$.SEND_DECISION_EVENT}${K.LATENCY}`);return this.alloyClient("sendEvent",t).then(n=>(o.send(),this.loggerInstance.logMetricCount(`${$.SEND_DECISION_EVENT}${K.SUCCESS}`),n)).catch(n=>(o.send(),this.loggerInstance.logMetricErrorCount(`${$.SEND_DECISION_EVENT}${K.FAILURE}`,n.message),{}))}async sendMetricEvent(t){if(this.cookieConsentInstance&&!this.cookieConsentInstance.hasConsent(yr))return;this.addIdentityMapObject(t);let r=this.loggerInstance.logPerformanceMetric(`${$.SEND_PROPOSITION_DISPLAY_EVENT}${K.LATENCY}`);return this.alloyClient("sendEvent",t).then(()=>{r.send(),this.loggerInstance.logMetricCount(`${$.SEND_PROPOSITION_DISPLAY_EVENT}${K.SUCCESS}`)}).catch(o=>(r.send(),this.loggerInstance.logMetricErrorCount(`${$.SEND_PROPOSITION_DISPLAY_EVENT}${K.FAILURE}`,o.message),{}))}listenForConsentChange(t,r,o){window.addEventListener(o,async()=>{let{hasAdobeConsent:n,hasAdvertisementConsent:i,hasCCBAConsent:s}=pi(t,r),{collect:a,share:c,personalize:d}=fi(n,i,s);(this.isConsentSet||a||c||d)&&(this.setConsent(a,c,d),this.essentialConsent=n),this.advertisementId=i?await this.getD2CAdvertisementId():void 0})}listenCustomEvents(){let t=r=>{let{detail:o}=r;if(!o)return;let n=ZE(o.eventType,this);if(n.validator){let i=n.validator(o);if(i.length>0){this.loggerInstance.logMetricErrorCount(`${n.metricName}${K.ERROR}`,i.join(`
`));return}}n.handler(o)};window.addEventListener(Gr,t)}};var eg=async()=>{let e=Bc({hostname:location.hostname,document,dataStreamMap:Uc,defaultConsent:"pending",overwriteDataStreamMap:jc}),t=jE(),r=new Ei(e,t),o=()=>t._shortbread.getConsentCookie()?.ccba||!1,{hasAdobeConsent:n,hasAdvertisementConsent:i,hasCCBAConsent:s}=pi(t.hasConsent,o),{collect:a,share:c,personalize:d}=fi(n,i,s),l;(a||c||d)&&r.setConsent(a,c,d),r.listenForConsentChange(t.hasConsent,o,Ma),n&&(await r.getD2CVisitorId(),r.getAwsAccountId()),i&&(l=await r.getD2CAdvertisementId()),r.sendSingleEvent({eventType:jo.PAGE_VIEW,xdm:{_aws:ui(document,location,t,l)}}),_l(window,document,r);let u=$c(),m=a&&d;if(u.length){let p=await r.sendDecisionEvent({renderDecisions:!1,decisionScopes:u},m);yl(p?.decisions,r,u)}bl(e.impressionSelector,r)};var Va;try{Va=Nt(He),await eg()}catch(e){let t=e instanceof Ir;e instanceof Error&&!t?Va?.logMetricErrorCount($.UNKNOWN_ERROR,Mt(e)):Va?.logMetricErrorCount($.UNKNOWN_ERROR,Ge)}
